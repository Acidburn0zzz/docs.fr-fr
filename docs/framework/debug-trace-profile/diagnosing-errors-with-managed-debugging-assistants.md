---
title: Diagnostic d'erreurs avec les Assistants de débogage managés
ms.date: 03/30/2017
f1_keywords:
- EHMDA
helpviewer_keywords:
- run-time error debugging
- managed code, run-time debugging
- resource debugging
- registry, MDAs
- common language runtime, debugging
- MDAs (managed debugging assistants)
- configuration files [.NET Framework], debugging runtime events
- messages, managed debugging assistants
- application configuration files, managed debugging assistants
- debugging [.NET Framework], managed debugging assistants
- environment variables, MDAs
- access violation debugging [.NET Framework]
- diagnostics, managed debugging assistants
- unmanaged code, run-time debugging
- default debug output stream
- memory, debugging
- app.config files, managed debugging assistants
- managed debugging assistants (MDAs)
- debugging [.NET Framework], run-time errors
- trapping events
- runtime, error debugging
- disabling MDAs
- output, managed debugging assistants
- errors [.NET Framework], managed debugging assistants
ms.assetid: 76994ee6-9fa9-4059-b813-26578d24427c
author: mairaw
ms.author: mairaw
ms.openlocfilehash: 16a039a5edb0e1023551f97deefbf7874a19638b
ms.sourcegitcommit: 3d5d33f384eeba41b2dff79d096f47ccc8d8f03d
ms.translationtype: MT
ms.contentlocale: fr-FR
ms.lasthandoff: 05/04/2018
ms.locfileid: "33392318"
---
# <a name="diagnosing-errors-with-managed-debugging-assistants"></a><span data-ttu-id="87577-102">Diagnostic d'erreurs avec les Assistants de débogage managés</span><span class="sxs-lookup"><span data-stu-id="87577-102">Diagnosing Errors with Managed Debugging Assistants</span></span>
<span data-ttu-id="87577-103">Les Assistants Débogage managé sont des aides au débogage qui fonctionnent conjointement avec le Common Language Runtime (CLR) pour fournir des informations sur l'état d'exécution.</span><span class="sxs-lookup"><span data-stu-id="87577-103">Managed debugging assistants (MDAs) are debugging aids that work in conjunction with the common language runtime (CLR) to provide information on runtime state.</span></span> <span data-ttu-id="87577-104">Les Assistants génèrent des messages d'information sur les événements du runtime que vous ne pouvez pas intercepter en temps normal.</span><span class="sxs-lookup"><span data-stu-id="87577-104">The assistants generate informational messages about runtime events that you cannot otherwise trap.</span></span> <span data-ttu-id="87577-105">Vous pouvez utiliser les Assistants Débogage managé pour isoler les bogues d'application difficiles à déceler qui se produisent pendant les phases de transition entre un code managé et un code non managé.</span><span class="sxs-lookup"><span data-stu-id="87577-105">You can use MDAs to isolate hard-to-find application bugs that occur when transitioning between managed and unmanaged code.</span></span> <span data-ttu-id="87577-106">Vous pouvez activer ou désactiver tous les Assistants Débogage managé en ajoutant une clé au Registre Windows ou en définissant une variable d'environnement.</span><span class="sxs-lookup"><span data-stu-id="87577-106">You can enable or disable all MDAs by adding a key to the Windows registry or by setting an environment variable.</span></span> <span data-ttu-id="87577-107">Vous pouvez activer des Assistants Débogage managé spécifiques à l'aide de paramètres de configuration d'application.</span><span class="sxs-lookup"><span data-stu-id="87577-107">You can enable specific MDAs by using application configuration settings.</span></span> <span data-ttu-id="87577-108">Vous pouvez définir des paramètres de configuration supplémentaires pour certains Assistants Débogage managé dans le fichier de configuration de l'application.</span><span class="sxs-lookup"><span data-stu-id="87577-108">You can set additional configuration settings for some individual MDAs in the application's configuration file.</span></span> <span data-ttu-id="87577-109">Comme ces fichiers de configuration sont analysés au chargement du runtime, vous devez activer l'Assistant Débogage managé avant que l'application managée ne démarre.</span><span class="sxs-lookup"><span data-stu-id="87577-109">Because these configuration files are parsed when the runtime is loaded, you must enable the MDA before the managed application starts.</span></span> <span data-ttu-id="87577-110">Vous ne pouvez pas l'activer pour les applications qui ont déjà démarré.</span><span class="sxs-lookup"><span data-stu-id="87577-110">You cannot enable it for applications that have already started.</span></span>  
  
> [!NOTE]
>  <span data-ttu-id="87577-111">Quand un Assistant Débogage managé est activé, il est actif même si votre code n'est pas en cours d'exécution sous un débogueur.</span><span class="sxs-lookup"><span data-stu-id="87577-111">When an MDA is enabled, it is active even when your code is not executing under a debugger.</span></span> <span data-ttu-id="87577-112">Si un événement d'Assistant Débogage managé est déclenché en l'absence de débogueur, le message de l'événement est présenté dans une boîte de dialogue d'exception non gérée, bien qu'il ne s'agisse pas d'une exception non gérée.</span><span class="sxs-lookup"><span data-stu-id="87577-112">If an MDA event is raised when a debugger is not present, the event message is presented in an unhandled exception dialog box, although it is not an unhandled exception.</span></span> <span data-ttu-id="87577-113">Pour éviter l'affichage de la boîte de dialogue, supprimez les paramètres de désactivation de l'Assistant Débogage managé quand votre code ne s'exécute pas dans un environnement de débogage.</span><span class="sxs-lookup"><span data-stu-id="87577-113">To avoid the dialog box, remove the MDA-enabling settings when your code is not executing in a debugging environment.</span></span>  
  
> [!NOTE]
>  <span data-ttu-id="87577-114">Quand votre code s'exécute dans l'environnement de développement intégré (IDE) de Visual Studio, vous pouvez éviter la boîte de dialogue d'exception qui apparaît pour des événements d'Assistant Débogage managé spécifiques.</span><span class="sxs-lookup"><span data-stu-id="87577-114">When your code is executing in the Visual Studio integrated development environment (IDE), you can avoid the exception dialog box that appears for specific MDA events.</span></span> <span data-ttu-id="87577-115">Pour ce faire, dans le menu **Déboguer**, cliquez sur **Exceptions**.</span><span class="sxs-lookup"><span data-stu-id="87577-115">To do that, on the **Debug** menu, click **Exceptions**.</span></span> <span data-ttu-id="87577-116">(Si le menu **Déboguer** ne contient pas la commande **Exceptions**, cliquez sur **Personnaliser** dans le menu **Outils** pour l’ajouter.) Dans la boîte de dialogue **Exceptions**, développez la liste **Assistants Débogage managé**, puis décochez la case **Levé** pour l’Assistant Débogage managé concerné.</span><span class="sxs-lookup"><span data-stu-id="87577-116">(If the **Debug** menu does not contain an **Exceptions** command, click **Customize** on the **Tools** menu to add it.) In the **Exceptions** dialog box, expand the **Managed Debugging Assistants** list, and then clear the **Thrown** check box for the individual MDA.</span></span> <span data-ttu-id="87577-117">Par exemple, pour éviter la boîte de dialogue d’exception pour un [contextSwitchDeadlock](../../../docs/framework/debug-trace-profile/contextswitchdeadlock-mda.md), décochez la case **Levé** en regard de son nom dans la liste **Assistants Débogage managé**.</span><span class="sxs-lookup"><span data-stu-id="87577-117">For example, to avoid the exception dialog box for a [contextSwitchDeadlock](../../../docs/framework/debug-trace-profile/contextswitchdeadlock-mda.md) clear the **Thrown** check box next to its name in the **Managed Debugging Assistants** list.</span></span> <span data-ttu-id="87577-118">Vous pouvez également utiliser cette boîte de dialogue pour activer l'affichage des boîtes de dialogue d'exception des Assistants Débogage managé.</span><span class="sxs-lookup"><span data-stu-id="87577-118">You can also use this dialog box to enable the display of MDA exception dialog boxes.</span></span>  
  
 <span data-ttu-id="87577-119">Le tableau suivant répertorie les Assistants Débogage managé fournis avec le .NET Framework.</span><span class="sxs-lookup"><span data-stu-id="87577-119">The following table lists the MDAs that ship with the .NET Framework.</span></span>  
  
|||  
|-|-|  
|[<span data-ttu-id="87577-120">asynchronousThreadAbort</span><span class="sxs-lookup"><span data-stu-id="87577-120">asynchronousThreadAbort</span></span>](../../../docs/framework/debug-trace-profile/asynchronousthreadabort-mda.md)|[<span data-ttu-id="87577-121">bindingFailure</span><span class="sxs-lookup"><span data-stu-id="87577-121">bindingFailure</span></span>](../../../docs/framework/debug-trace-profile/bindingfailure-mda.md)|  
|[<span data-ttu-id="87577-122">callbackOnCollectedDelegate</span><span class="sxs-lookup"><span data-stu-id="87577-122">callbackOnCollectedDelegate</span></span>](../../../docs/framework/debug-trace-profile/callbackoncollecteddelegate-mda.md)|[<span data-ttu-id="87577-123">contextSwitchDeadlock</span><span class="sxs-lookup"><span data-stu-id="87577-123">contextSwitchDeadlock</span></span>](../../../docs/framework/debug-trace-profile/contextswitchdeadlock-mda.md)|  
|[<span data-ttu-id="87577-124">dangerousThreadingAPI</span><span class="sxs-lookup"><span data-stu-id="87577-124">dangerousThreadingAPI</span></span>](../../../docs/framework/debug-trace-profile/dangerousthreadingapi-mda.md)|[<span data-ttu-id="87577-125">dateTimeInvalidLocalFormat</span><span class="sxs-lookup"><span data-stu-id="87577-125">dateTimeInvalidLocalFormat</span></span>](../../../docs/framework/debug-trace-profile/datetimeinvalidlocalformat-mda.md)|  
|[<span data-ttu-id="87577-126">dirtyCastAndCallOnInterface</span><span class="sxs-lookup"><span data-stu-id="87577-126">dirtyCastAndCallOnInterface</span></span>](../../../docs/framework/debug-trace-profile/dirtycastandcalloninterface-mda.md)|[<span data-ttu-id="87577-127">disconnectedContext</span><span class="sxs-lookup"><span data-stu-id="87577-127">disconnectedContext</span></span>](../../../docs/framework/debug-trace-profile/disconnectedcontext-mda.md)|  
|[<span data-ttu-id="87577-128">dllMainReturnsFalse</span><span class="sxs-lookup"><span data-stu-id="87577-128">dllMainReturnsFalse</span></span>](../../../docs/framework/debug-trace-profile/dllmainreturnsfalse-mda.md)|[<span data-ttu-id="87577-129">exceptionSwallowedOnCallFromCom</span><span class="sxs-lookup"><span data-stu-id="87577-129">exceptionSwallowedOnCallFromCom</span></span>](../../../docs/framework/debug-trace-profile/exceptionswallowedoncallfromcom-mda.md)|  
|[<span data-ttu-id="87577-130">failedQI</span><span class="sxs-lookup"><span data-stu-id="87577-130">failedQI</span></span>](../../../docs/framework/debug-trace-profile/failedqi-mda.md)|[<span data-ttu-id="87577-131">fatalExecutionEngineError</span><span class="sxs-lookup"><span data-stu-id="87577-131">fatalExecutionEngineError</span></span>](../../../docs/framework/debug-trace-profile/fatalexecutionengineerror-mda.md)|  
|[<span data-ttu-id="87577-132">gcManagedToUnmanaged</span><span class="sxs-lookup"><span data-stu-id="87577-132">gcManagedToUnmanaged</span></span>](../../../docs/framework/debug-trace-profile/gcmanagedtounmanaged-mda.md)|[<span data-ttu-id="87577-133">gcUnmanagedToManaged</span><span class="sxs-lookup"><span data-stu-id="87577-133">gcUnmanagedToManaged</span></span>](../../../docs/framework/debug-trace-profile/gcunmanagedtomanaged-mda.md)|  
|[<span data-ttu-id="87577-134">illegalPrepareConstrainedRegion</span><span class="sxs-lookup"><span data-stu-id="87577-134">illegalPrepareConstrainedRegion</span></span>](../../../docs/framework/debug-trace-profile/illegalprepareconstrainedregion-mda.md)|[<span data-ttu-id="87577-135">invalidApartmentStateChange</span><span class="sxs-lookup"><span data-stu-id="87577-135">invalidApartmentStateChange</span></span>](../../../docs/framework/debug-trace-profile/invalidapartmentstatechange-mda.md)|  
|[<span data-ttu-id="87577-136">invalidCERCall</span><span class="sxs-lookup"><span data-stu-id="87577-136">invalidCERCall</span></span>](../../../docs/framework/debug-trace-profile/invalidcercall-mda.md)|[<span data-ttu-id="87577-137">invalidFunctionPointerInDelegate</span><span class="sxs-lookup"><span data-stu-id="87577-137">invalidFunctionPointerInDelegate</span></span>](../../../docs/framework/debug-trace-profile/invalidfunctionpointerindelegate-mda.md)|  
|[<span data-ttu-id="87577-138">invalidGCHandleCookie</span><span class="sxs-lookup"><span data-stu-id="87577-138">invalidGCHandleCookie</span></span>](../../../docs/framework/debug-trace-profile/invalidgchandlecookie-mda.md)|[<span data-ttu-id="87577-139">invalidIUnknown</span><span class="sxs-lookup"><span data-stu-id="87577-139">invalidIUnknown</span></span>](../../../docs/framework/debug-trace-profile/invalidiunknown-mda.md)|  
|[<span data-ttu-id="87577-140">invalidMemberDeclaration</span><span class="sxs-lookup"><span data-stu-id="87577-140">invalidMemberDeclaration</span></span>](../../../docs/framework/debug-trace-profile/invalidmemberdeclaration-mda.md)|[<span data-ttu-id="87577-141">invalidOverlappedToPinvoke</span><span class="sxs-lookup"><span data-stu-id="87577-141">invalidOverlappedToPinvoke</span></span>](../../../docs/framework/debug-trace-profile/invalidoverlappedtopinvoke-mda.md)|  
|[<span data-ttu-id="87577-142">invalidVariant</span><span class="sxs-lookup"><span data-stu-id="87577-142">invalidVariant</span></span>](../../../docs/framework/debug-trace-profile/invalidvariant-mda.md)|[<span data-ttu-id="87577-143">jitCompilationStart</span><span class="sxs-lookup"><span data-stu-id="87577-143">jitCompilationStart</span></span>](../../../docs/framework/debug-trace-profile/jitcompilationstart-mda.md)|  
|[<span data-ttu-id="87577-144">loaderLock</span><span class="sxs-lookup"><span data-stu-id="87577-144">loaderLock</span></span>](../../../docs/framework/debug-trace-profile/loaderlock-mda.md)|[<span data-ttu-id="87577-145">loadFromContext</span><span class="sxs-lookup"><span data-stu-id="87577-145">loadFromContext</span></span>](../../../docs/framework/debug-trace-profile/loadfromcontext-mda.md)|  
|[<span data-ttu-id="87577-146">marshalCleanupError</span><span class="sxs-lookup"><span data-stu-id="87577-146">marshalCleanupError</span></span>](../../../docs/framework/debug-trace-profile/marshalcleanuperror-mda.md)|[<span data-ttu-id="87577-147">marshaling</span><span class="sxs-lookup"><span data-stu-id="87577-147">marshaling</span></span>](../../../docs/framework/debug-trace-profile/marshaling-mda.md)|  
|[<span data-ttu-id="87577-148">memberInfoCacheCreation</span><span class="sxs-lookup"><span data-stu-id="87577-148">memberInfoCacheCreation</span></span>](../../../docs/framework/debug-trace-profile/memberinfocachecreation-mda.md)|[<span data-ttu-id="87577-149">moduloObjectHashcode</span><span class="sxs-lookup"><span data-stu-id="87577-149">moduloObjectHashcode</span></span>](../../../docs/framework/debug-trace-profile/moduloobjecthashcode-mda.md)|  
|[<span data-ttu-id="87577-150">nonComVisibleBaseClass</span><span class="sxs-lookup"><span data-stu-id="87577-150">nonComVisibleBaseClass</span></span>](../../../docs/framework/debug-trace-profile/noncomvisiblebaseclass-mda.md)|[<span data-ttu-id="87577-151">notMarshalable</span><span class="sxs-lookup"><span data-stu-id="87577-151">notMarshalable</span></span>](../../../docs/framework/debug-trace-profile/notmarshalable-mda.md)|  
|[<span data-ttu-id="87577-152">openGenericCERCall</span><span class="sxs-lookup"><span data-stu-id="87577-152">openGenericCERCall</span></span>](../../../docs/framework/debug-trace-profile/opengenericcercall-mda.md)|[<span data-ttu-id="87577-153">overlappedFreeError</span><span class="sxs-lookup"><span data-stu-id="87577-153">overlappedFreeError</span></span>](../../../docs/framework/debug-trace-profile/overlappedfreeerror-mda.md)|  
|[<span data-ttu-id="87577-154">pInvokeLog</span><span class="sxs-lookup"><span data-stu-id="87577-154">pInvokeLog</span></span>](../../../docs/framework/debug-trace-profile/pinvokelog-mda.md)|[<span data-ttu-id="87577-155">pInvokeStackImbalance</span><span class="sxs-lookup"><span data-stu-id="87577-155">pInvokeStackImbalance</span></span>](../../../docs/framework/debug-trace-profile/pinvokestackimbalance-mda.md)|  
|[<span data-ttu-id="87577-156">raceOnRCWCleanup</span><span class="sxs-lookup"><span data-stu-id="87577-156">raceOnRCWCleanup</span></span>](../../../docs/framework/debug-trace-profile/raceonrcwcleanup-mda.md)|[<span data-ttu-id="87577-157">reentrancy</span><span class="sxs-lookup"><span data-stu-id="87577-157">reentrancy</span></span>](../../../docs/framework/debug-trace-profile/reentrancy-mda.md)|  
|[<span data-ttu-id="87577-158">releaseHandleFailed</span><span class="sxs-lookup"><span data-stu-id="87577-158">releaseHandleFailed</span></span>](../../../docs/framework/debug-trace-profile/releasehandlefailed-mda.md)|[<span data-ttu-id="87577-159">reportAvOnComRelease</span><span class="sxs-lookup"><span data-stu-id="87577-159">reportAvOnComRelease</span></span>](../../../docs/framework/debug-trace-profile/reportavoncomrelease-mda.md)|  
|[<span data-ttu-id="87577-160">streamWriterBufferedDataLost</span><span class="sxs-lookup"><span data-stu-id="87577-160">streamWriterBufferedDataLost</span></span>](../../../docs/framework/debug-trace-profile/streamwriterbuffereddatalost-mda.md)|[<span data-ttu-id="87577-161">virtualCERCall</span><span class="sxs-lookup"><span data-stu-id="87577-161">virtualCERCall</span></span>](../../../docs/framework/debug-trace-profile/virtualcercall-mda.md)|  
  
 <span data-ttu-id="87577-162">Par défaut, le .NET Framework active une partie des Assistants Débogage managé pour tous les débogueurs managés.</span><span class="sxs-lookup"><span data-stu-id="87577-162">By default, the .NET Framework activates a subset of MDAs for all managed debuggers.</span></span> <span data-ttu-id="87577-163">Vous pouvez afficher l’ensemble par défaut dans Visual Studio en cliquant sur **Exceptions** dans le menu **Déboguer** et en développant la liste **Assistants Débogage managé**.</span><span class="sxs-lookup"><span data-stu-id="87577-163">You can view the default set in Visual Studio by clicking **Exceptions** on the **Debug** menu and expanding the **Managed Debugging Assistants** list.</span></span>  
  
## <a name="enabling-and-disabling-mdas"></a><span data-ttu-id="87577-164">Activation et désactivation des Assistants Débogage managé</span><span class="sxs-lookup"><span data-stu-id="87577-164">Enabling and Disabling MDAs</span></span>  
 <span data-ttu-id="87577-165">Vous pouvez activer et désactiver les Assistants Débogage managé en utilisant une clé de Registre, une variable d'environnement et des paramètres de configuration d'application.</span><span class="sxs-lookup"><span data-stu-id="87577-165">You can enable and disable MDAs by using a registry key, an environment variable, and application configuration settings.</span></span> <span data-ttu-id="87577-166">Vous devez activer la clé de Registre ou la variable d'environnement pour utiliser les paramètres de configuration d'application.</span><span class="sxs-lookup"><span data-stu-id="87577-166">You must enable either the registry key or the environment variable to use the application configuration settings.</span></span>  
  
 <span data-ttu-id="87577-167">Dans Visual Studio 2005 et versions ultérieures, quand le processus d'hébergement est activé, vous ne pouvez pas désactiver les Assistants Débogage managé qui se trouvent dans l'ensemble par défaut ou activer les Assistants Débogage managé qui ne s'y trouvent pas.</span><span class="sxs-lookup"><span data-stu-id="87577-167">In Visual Studio 2005 and later versions, when the hosting process is enabled, you cannot disable MDAs that are in the default set or enable MDAs that are not in the default set.</span></span> <span data-ttu-id="87577-168">Le processus d'hébergement étant activé par défaut, il doit être désactivé explicitement.</span><span class="sxs-lookup"><span data-stu-id="87577-168">The hosting process is enabled by default, so it must be explicitly disabled.</span></span>  
  
 <span data-ttu-id="87577-169">Pour désactiver le processus d'hébergement dans Visual Studio, procédez comme suit :</span><span class="sxs-lookup"><span data-stu-id="87577-169">To disable the hosting process in Visual Studio, do the following:</span></span>  
  
1.  <span data-ttu-id="87577-170">Dans l’**Explorateur de solutions**, sélectionnez un projet.</span><span class="sxs-lookup"><span data-stu-id="87577-170">In **Solution Explorer**, select a project.</span></span>  
  
2.  <span data-ttu-id="87577-171">Dans le menu **Projet**, cliquez sur **Propriétés**.</span><span class="sxs-lookup"><span data-stu-id="87577-171">On the **Project** menu, click **Properties**.</span></span>  
  
     <span data-ttu-id="87577-172">La fenêtre **Concepteur de projets** apparaît.</span><span class="sxs-lookup"><span data-stu-id="87577-172">The **Project Designer** window appears.</span></span>  
  
3.  <span data-ttu-id="87577-173">Cliquez sur l’onglet **Déboguer**.</span><span class="sxs-lookup"><span data-stu-id="87577-173">Click the **Debug** tab.</span></span>  
  
4.  <span data-ttu-id="87577-174">Dans la section **Activer les débogueurs**, décochez la case **Activer le processus d’hébergement Visual Studio**.</span><span class="sxs-lookup"><span data-stu-id="87577-174">In the **Enable Debuggers** section, clear the **Enable the Visual Studio hosting process** check box.</span></span>  
  
 <span data-ttu-id="87577-175">Toutefois, notez que la désactivation du processus d'hébergement peut affecter les performances.</span><span class="sxs-lookup"><span data-stu-id="87577-175">However, disabling the hosting process can affect performance.</span></span> <span data-ttu-id="87577-176">Pour éviter de désactiver les Assistants Débogage managé, vous pouvez empêcher Visual Studio d'afficher la boîte de dialogue d'Assistant Débogage managé chaque fois qu'une notification d'Assistant Débogage managé est reçue.</span><span class="sxs-lookup"><span data-stu-id="87577-176">You can avoid the need to disable MDAs by preventing Visual Studio from displaying the MDA dialog box whenever an MDA notification is received.</span></span> <span data-ttu-id="87577-177">Pour ce faire, cliquez sur **Exceptions** dans le menu **Déboguer**, développez la liste **Assistants Débogage managé**, puis cochez ou décochez la case **Levé** pour l’Assistant Débogage managé concerné.</span><span class="sxs-lookup"><span data-stu-id="87577-177">To do that, click **Exceptions** on the **Debug** menu, expand the **Managed Debugging Assistants** list, and then select or clear the **Thrown** check box for the individual MDA.</span></span>  
  
### <a name="enabling-and-disabling-mdas-by-using-a-registry-key"></a><span data-ttu-id="87577-178">Activation et désactivation des Assistants Débogage managé à l'aide d'une clé de Registre</span><span class="sxs-lookup"><span data-stu-id="87577-178">Enabling and Disabling MDAs by Using a Registry Key</span></span>  
 <span data-ttu-id="87577-179">Vous pouvez activer les Assistants Débogage managé en ajoutant la sous-clé HKEY_LOCAL_MACHINE\SOFTWARE\Microsoft\\.NETFramework\MDA (type REG_SZ, valeur 1) au Registre Windows.</span><span class="sxs-lookup"><span data-stu-id="87577-179">You can enable MDAs by adding the HKEY_LOCAL_MACHINE\SOFTWARE\Microsoft\\.NETFramework\MDA subkey (type REG_SZ, value 1) in the Windows registry.</span></span> <span data-ttu-id="87577-180">Copiez l’exemple suivant dans un fichier texte nommé MDAEnable.reg. Ouvrez l’Éditeur du Registre Windows (RegEdit.exe) et, dans le menu **Fichier**, choisissez **Importer**.</span><span class="sxs-lookup"><span data-stu-id="87577-180">Copy the following example into a text file named MDAEnable.reg. Open the Windows Registry Editor (RegEdit.exe) and from the **File** menu choose **Import**.</span></span> <span data-ttu-id="87577-181">Sélectionnez le fichier MDAEnable.reg pour activer les Assistants Débogage managé sur cet ordinateur.</span><span class="sxs-lookup"><span data-stu-id="87577-181">Select the MDAEnable.reg  file to enable MDAs on that computer.</span></span> <span data-ttu-id="87577-182">Définir la sous-clé sur la valeur de chaîne 1 (pas sur la valeur DWORD 1) active la lecture des paramètres d’Assistant Débogage managé à partir du fichier *nom_application.suffixe*.mda.config.</span><span class="sxs-lookup"><span data-stu-id="87577-182">Setting the subkey to string value of 1 (not DWORD value of 1) enables the reading of MDA settings from the *ApplicationName.suffix*.mda.config file.</span></span> <span data-ttu-id="87577-183">(Par exemple, le fichier de configuration d'Assistant Débogage managé pour le Bloc-notes porterait le nom notepad.exe.mda.config.)</span><span class="sxs-lookup"><span data-stu-id="87577-183">(For example the MDA configuration file for Notepad would be named notepad.exe.mda.config)</span></span>  
  
```  
Windows Registry Editor Version 5.00  
  
[HKEY_LOCAL_MACHINE\SOFTWARE\Microsoft\.NETFramework]  
"MDA"="1"  
```  
  
 <span data-ttu-id="87577-184">Si l'ordinateur exécute une application 32 bits sur un système d'exploitation 64 bits, la clé MDA doit être définie comme suit :</span><span class="sxs-lookup"><span data-stu-id="87577-184">If the computer is running a 32-bit application on a 64-bit operating system, then the MDA key should be set like the following:</span></span>  
  
```  
      Windows Registry Editor Version 5.00   
  
[HKEY_LOCAL_MACHINE\SOFTWARE\Wow6432Node\Microsoft\.NETFramework]  
"MDA"="1"  
```  
  
 <span data-ttu-id="87577-185">Pour plus d’informations, consultez [Activation et désactivation des Assistants Débogage managé à l’aide de paramètres de configuration spécifiques à l’application](#appConfig).</span><span class="sxs-lookup"><span data-stu-id="87577-185">See [Enabling and Disabling MDAs by Using Application-Specific Configuration Settings](#appConfig) for more information.</span></span> <span data-ttu-id="87577-186">Le paramétrage du Registre peut être remplacé par la variable d'environnement COMPLUS_MDA.</span><span class="sxs-lookup"><span data-stu-id="87577-186">The registry setting can be overridden by the COMPLUS_MDA environment variable.</span></span> <span data-ttu-id="87577-187">Pour plus d’informations, consultez [Activation et désactivation des Assistants Débogage managé à l’aide d’une variable d’environnement](#envVariable).</span><span class="sxs-lookup"><span data-stu-id="87577-187">See [Enabling and Disabling MDAs by Using an Environment Variable](#envVariable) for more information.</span></span>  
  
 <span data-ttu-id="87577-188">Pour désactiver les Assistants Débogage managé, définissez la sous-clé MDA sur 0 (zéro) à l'aide de l'Éditeur du Registre Windows.</span><span class="sxs-lookup"><span data-stu-id="87577-188">To disable MDAs, set the MDA subkey to 0 (zero) using the Windows Registry Editor.</span></span>  
  
 <span data-ttu-id="87577-189">Par défaut, certains Assistants Débogage managé sont activés quand vous exécutez une application qui est attachée à un débogueur, même sans que la clé de Registre soit ajoutée.</span><span class="sxs-lookup"><span data-stu-id="87577-189">By default, some MDAs are enabled when you run an application that is attached to a debugger, even without adding the registry key.</span></span> <span data-ttu-id="87577-190">[pInvokeStackImbalance](../../../docs/framework/debug-trace-profile/pinvokestackimbalance-mda.md) et [invalidApartmentStateChange](../../../docs/framework/debug-trace-profile/invalidapartmentstatechange-mda.md) sont des exemples d’Assistants de ce type.</span><span class="sxs-lookup"><span data-stu-id="87577-190">Examples of such assistants are [pInvokeStackImbalance](../../../docs/framework/debug-trace-profile/pinvokestackimbalance-mda.md) and [invalidApartmentStateChange](../../../docs/framework/debug-trace-profile/invalidapartmentstatechange-mda.md).</span></span> <span data-ttu-id="87577-191">Vous pouvez désactiver ces Assistants en exécutant le fichier MDADisable.reg, comme indiqué précédemment dans cette section.</span><span class="sxs-lookup"><span data-stu-id="87577-191">You can disable these assistants by running the MDADisable.reg file as described earlier in this section.</span></span>  
  
<a name="envVariable"></a>   
### <a name="enabling-and-disabling-mdas-by-using-an-environment-variable"></a><span data-ttu-id="87577-192">Activation et désactivation des Assistants Débogage managé à l'aide d'une variable d'environnement</span><span class="sxs-lookup"><span data-stu-id="87577-192">Enabling and Disabling MDAs by Using an Environment Variable</span></span>  
 <span data-ttu-id="87577-193">L'activation des Assistants Débogage managé peut également être contrôlée par la variable d'environnement COMPLUS_MDA, qui remplace la clé de Registre.</span><span class="sxs-lookup"><span data-stu-id="87577-193">MDA activation can also controlled by the environment variable COMPLUS_MDA, which overrides the registry key.</span></span> <span data-ttu-id="87577-194">La chaîne COMPLUS_MDA est une liste de noms d'Assistant Débogage managé ou d'autres chaînes de contrôle spéciales séparés par des points-virgules et sans distinction minuscules/majuscules.</span><span class="sxs-lookup"><span data-stu-id="87577-194">The COMPLUS_MDA string is a case-insensitive, semicolon-delimited list of MDA names or other special control strings.</span></span> <span data-ttu-id="87577-195">Démarrer sous un débogueur managé ou non managé active par défaut un ensemble d'Assistants Débogage managé.</span><span class="sxs-lookup"><span data-stu-id="87577-195">Starting under a managed or unmanaged debugger enables a set of MDAs by default.</span></span> <span data-ttu-id="87577-196">Pour ce faire, la valeur de la variable d'environnement ou de la clé de Registre doit être implicitement ajoutée au début de la liste délimitée par des points-virgules qui répertorie les Assistants Débogage managé activés par défaut sous les débogueurs.</span><span class="sxs-lookup"><span data-stu-id="87577-196">This is done by implicitly prepending the semicolon-delimited list of MDAs enabled by default under debuggers to the value of the environment variable or registry key.</span></span> <span data-ttu-id="87577-197">Les chaînes de contrôle spéciales sont les suivantes :</span><span class="sxs-lookup"><span data-stu-id="87577-197">The special control strings are the following:</span></span>  
  
-   <span data-ttu-id="87577-198">`0` : désactive tous les Assistants Débogage managé.</span><span class="sxs-lookup"><span data-stu-id="87577-198">`0` - Deactivates all MDAs.</span></span>  
  
-   <span data-ttu-id="87577-199">`1` : lit les paramètres d’Assistant Débogage managé dans le fichier *nom_application*.mda.config.</span><span class="sxs-lookup"><span data-stu-id="87577-199">`1` - Reads MDA settings from *ApplicationName*.mda.config.</span></span>  
  
-   <span data-ttu-id="87577-200">`managedDebugger` : active explicitement tous les Assistants Débogage managé qui sont implicitement activés quand un exécutable managé est démarré sous un débogueur.</span><span class="sxs-lookup"><span data-stu-id="87577-200">`managedDebugger` - Explicitly activates all MDAs that are implicitly activated when a managed executable is started under a debugger.</span></span>  
  
-   <span data-ttu-id="87577-201">`unmanagedDebugger` : active explicitement tous les Assistants Débogage managé qui sont implicitement activés quand un exécutable non managé est démarré sous un débogueur.</span><span class="sxs-lookup"><span data-stu-id="87577-201">`unmanagedDebugger` - Explicitly activates all MDAs that are implicitly activated when an unmanaged executable is started under a debugger.</span></span>  
  
 <span data-ttu-id="87577-202">En cas de conflit de paramètres, les paramètres les plus récents remplacent les paramètres antérieurs :</span><span class="sxs-lookup"><span data-stu-id="87577-202">If there are conflicting settings, the most recent settings override previous settings:</span></span>  
  
-   <span data-ttu-id="87577-203">`COMPLUS_MDA=0` désactive tous les Assistants Débogage managé, y compris ceux qui sont implicitement activés sous un débogueur.</span><span class="sxs-lookup"><span data-stu-id="87577-203">`COMPLUS_MDA=0` disables all MDAs, including those implicitly enabled under a debugger.</span></span>  
  
-   <span data-ttu-id="87577-204">`COMPLUS_MDA=gcUnmanagedToManaged` active `gcUnmanagedToManaged` outre tout Assistant Débogage managé implicitement activé sous un débogueur.</span><span class="sxs-lookup"><span data-stu-id="87577-204">`COMPLUS_MDA=gcUnmanagedToManaged` enables `gcUnmanagedToManaged` in addition to any MDAs that are implicitly enabled under a debugger.</span></span>  
  
-   <span data-ttu-id="87577-205">`COMPLUS_MDA=0;gcUnmanagedToManaged` active `gcUnmanagedToManaged`, mais désactive tout Assistant Débogage managé implicitement activé sous un débogueur.</span><span class="sxs-lookup"><span data-stu-id="87577-205">`COMPLUS_MDA=0;gcUnmanagedToManaged` enables `gcUnmanagedToManaged` but disables MDAs that would otherwise be implicitly enabled under a debugger.</span></span>  
  
<a name="appConfig"></a>   
### <a name="enabling-and-disabling-mdas-by-using-application-specific-configuration-settings"></a><span data-ttu-id="87577-206">Activation et désactivation des Assistants Débogage managé à l'aide de paramètres de configuration spécifiques à l'application</span><span class="sxs-lookup"><span data-stu-id="87577-206">Enabling and Disabling MDAs by Using Application-Specific Configuration Settings</span></span>  
 <span data-ttu-id="87577-207">Vous pouvez activer, désactiver et configurer certains Assistants séparément dans le fichier de configuration d'Assistant Débogage managé propre à l'application.</span><span class="sxs-lookup"><span data-stu-id="87577-207">You can enable, disable, and configure some assistants individually in the MDA configuration file for the application.</span></span> <span data-ttu-id="87577-208">Vous ne pouvez utiliser un fichier de configuration d'application pour configurer des Assistants Débogage managé que si la clé de Registre MDA ou la variable d'environnement COMPLUS_MDA est définie.</span><span class="sxs-lookup"><span data-stu-id="87577-208">To enable the use of an application configuration file for configuring MDAs, either the MDA registry key or the COMPLUS_MDA environment variable must be set.</span></span> <span data-ttu-id="87577-209">En règle générale, le fichier de configuration d'application se trouve dans le même répertoire que le fichier exécutable (.exe) de l'application.</span><span class="sxs-lookup"><span data-stu-id="87577-209">The application configuration file is typically located in the same directory as the application's executable (.exe) file.</span></span> <span data-ttu-id="87577-210">Le format du nom de fichier est *nom_application*.mda.config ; par exemple, notepad.exe.mda.config. Les Assistants qui sont activés dans le fichier de configuration d'application peuvent avoir des attributs ou des éléments qui permettent de contrôler le comportement de l'Assistant concerné.</span><span class="sxs-lookup"><span data-stu-id="87577-210">The file name takes the form *ApplicationName*.mda.config; for example, notepad.exe.mda.config. Assistants that are enabled in the application configuration file may have attributes or elements specifically designed to control that assistant's behavior.</span></span> <span data-ttu-id="87577-211">L’exemple suivant illustre l’activation et la configuration du [marshaling](../../../docs/framework/debug-trace-profile/marshaling-mda.md).</span><span class="sxs-lookup"><span data-stu-id="87577-211">The following example shows how to enable and configure the [marshaling](../../../docs/framework/debug-trace-profile/marshaling-mda.md).</span></span>  
  
```xml  
<mdaConfig>  
  <assistants>  
    <marshaling>  
      <methodFilter>  
        <match name="*"/>  
      </methodFilter>  
      <fieldFilter>  
        <match name="*"/>  
      </fieldFilter>  
    </marshaling>  
  </assistants>  
</mdaConfig>  
```  
  
 <span data-ttu-id="87577-212">L'Assistant Débogage managé `Marshaling` émet des informations sur le type managé qui est marshalé en un type non managé pour chaque transition de code managé vers un code non managé dans l'application.</span><span class="sxs-lookup"><span data-stu-id="87577-212">The `Marshaling` MDA emits information about the managed type that is being marshaled to an unmanaged type for each managed-to-unmanaged transition in the application.</span></span> <span data-ttu-id="87577-213">L'Assistant Débogage managé `Marshaling` peut également filtrer les noms des champs de méthode et de structure fournis dans les éléments enfants `<methodFilter>` et `<fieldFilter>`, respectivement.</span><span class="sxs-lookup"><span data-stu-id="87577-213">The `Marshaling` MDA can also filter the names of the method and structure fields supplied in the `<methodFilter>` and `<fieldFilter>` child elements, respectively.</span></span>  
  
 <span data-ttu-id="87577-214">L'exemple suivant illustre l'activation de plusieurs Assistants Débogage managé à l'aide de leurs paramètres par défaut.</span><span class="sxs-lookup"><span data-stu-id="87577-214">The following example shows how to enable multiple MDAs by using their default settings.</span></span>  
  
```xml  
<mdaConfig>  
  <assistants>  
    <illegalPrepareConstrainedRegion />  
    <invalidCERCall />  
    <openGenericCERCall />  
    <virtualCERCall />  
  </assistants>  
</mdaConfig>  
```  
  
> [!IMPORTANT]
>  <span data-ttu-id="87577-215">Quand vous spécifiez plusieurs Assistants dans un fichier de configuration, vous devez les répertorier dans l'ordre alphabétique.</span><span class="sxs-lookup"><span data-stu-id="87577-215">When you specify more than one assistant in a configuration file, you must list them in alphabetical order.</span></span> <span data-ttu-id="87577-216">Par exemple, pour activer les Assistants Débogage managé `virtualCERCall` et `invalidCERCall`, vous devez ajouter l'entrée `<invalidCERCall />` avant l'entrée `<virtualCERCall />`.</span><span class="sxs-lookup"><span data-stu-id="87577-216">For example, if you want to enable both the `virtualCERCall` and the `invalidCERCall` MDAs, you must add the `<invalidCERCall />` entry before the `<virtualCERCall />` entry.</span></span> <span data-ttu-id="87577-217">Si vous n'indiquez pas les entrées dans l'ordre alphabétique, vous obtenez un message d'exception non gérée liée à un fichier de configuration non valide.</span><span class="sxs-lookup"><span data-stu-id="87577-217">If the entries are not in alphabetical order, an unhandled invalid configuration file exception message is displayed.</span></span>  
  
### <a name="mda-output"></a><span data-ttu-id="87577-218">Sortie de l'Assistant Débogage managé</span><span class="sxs-lookup"><span data-stu-id="87577-218">MDA Output</span></span>  
 <span data-ttu-id="87577-219">La sortie de l'Assistant Débogage managé est similaire à l'exemple suivant, qui illustre la sortie de l'Assistant Débogage managé `pInvokeStackImbalance`.</span><span class="sxs-lookup"><span data-stu-id="87577-219">MDA output is similar to the following example, which shows the output from the `pInvokeStackImbalance` MDA.</span></span>  
  
 `A call to PInvoke function 'MDATest!MDATest.Program::StdCall' has unbalanced the stack. This is likely because the managed PInvoke signature does not match the unmanaged target signature. Check that the calling convention and parameters of the PInvoke signature match the target unmanaged signature.`  
  
## <a name="see-also"></a><span data-ttu-id="87577-220">Voir aussi</span><span class="sxs-lookup"><span data-stu-id="87577-220">See Also</span></span>  
 [<span data-ttu-id="87577-221">Débogage, traçage et profilage</span><span class="sxs-lookup"><span data-stu-id="87577-221">Debugging, Tracing, and Profiling</span></span>](../../../docs/framework/debug-trace-profile/index.md)
