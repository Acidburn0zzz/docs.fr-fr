---
title: Sécurisation de WCF Data Services
ms.date: 03/30/2017
dev_langs:
- csharp
- vb
helpviewer_keywords:
- securing application [WCF Data Services]
- WCF Data Services, security
ms.assetid: 99fc2baa-a040-4549-bc4d-f683d60298af
ms.openlocfilehash: 0fd966d696e08c74185dc2c3859fd74d90933296
ms.sourcegitcommit: d2ccb199ae6bc5787b4762e9ea6d3f6fe88677af
ms.translationtype: MT
ms.contentlocale: fr-FR
ms.lasthandoff: 02/12/2019
ms.locfileid: "56092694"
---
# <a name="securing-wcf-data-services"></a><span data-ttu-id="992c4-102">Sécurisation de WCF Data Services</span><span class="sxs-lookup"><span data-stu-id="992c4-102">Securing WCF Data Services</span></span>
<span data-ttu-id="992c4-103">Cette rubrique décrit les considérations sur la sécurité qui sont spécifiques au développement, au déploiement et à l'exécution de [!INCLUDE[ssAstoria](../../../../includes/ssastoria-md.md)] et des applications qui accèdent aux services prenant en charge l'[!INCLUDE[ssODataFull](../../../../includes/ssodatafull-md.md)].</span><span class="sxs-lookup"><span data-stu-id="992c4-103">This topic describes security considerations that are specific to developing, deploying, and running [!INCLUDE[ssAstoria](../../../../includes/ssastoria-md.md)] and applications that access services that support the [!INCLUDE[ssODataFull](../../../../includes/ssodatafull-md.md)].</span></span> <span data-ttu-id="992c4-104">Vous devez également suivre ces recommandations pour créer des applications [!INCLUDE[dnprdnshort](../../../../includes/dnprdnshort-md.md)] sécurisées.</span><span class="sxs-lookup"><span data-stu-id="992c4-104">You should also follow recommendations for creating secure [!INCLUDE[dnprdnshort](../../../../includes/dnprdnshort-md.md)] applications.</span></span>  
  
 <span data-ttu-id="992c4-105">Lors de la planification de la sécurité d'un service [!INCLUDE[ssAstoria](../../../../includes/ssastoria-md.md)] basé sur [!INCLUDE[ssODataShort](../../../../includes/ssodatashort-md.md)], vous devez résoudre l'authentification, le processus de découverte et de vérification de l'identité d'un principal et également son autorisation, en déterminant si un principal authentifié est autorisé à accéder aux ressources demandées.</span><span class="sxs-lookup"><span data-stu-id="992c4-105">When planning how to secure a [!INCLUDE[ssAstoria](../../../../includes/ssastoria-md.md)]-based [!INCLUDE[ssODataShort](../../../../includes/ssodatashort-md.md)] service, you must address both authentication, the process of discovering and verifying the identity of a principal, and authorization, the process of determining whether an authenticated principal is allowed to access the requested resources.</span></span> <span data-ttu-id="992c4-106">Vous devez également déterminer si chiffrer le message à l'aide de SSL.</span><span class="sxs-lookup"><span data-stu-id="992c4-106">You should also consider whether to encrypt the message by using SSL.</span></span>  
  
## <a name="authenticating-client-requests"></a><span data-ttu-id="992c4-107">Authentification des demandes du client</span><span class="sxs-lookup"><span data-stu-id="992c4-107">Authenticating Client Requests</span></span>  
 [!INCLUDE[ssAstoria](../../../../includes/ssastoria-md.md)] <span data-ttu-id="992c4-108">n'implémente aucun type d'authentification en lui-même, mais repose plutôt sur les dispositions d'authentification de l'hôte du service de données.</span><span class="sxs-lookup"><span data-stu-id="992c4-108">does not implement any kind of authentication of its own, but rather relies on the authentication provisions of the data service host.</span></span> <span data-ttu-id="992c4-109">Cela signifie que le service présume que toute demande qu'il reçoit a déjà été authentifiée par l'hôte réseau et que l'hôte a correctement identifié le principal de la demande via les interfaces fournies par [!INCLUDE[ssAstoria](../../../../includes/ssastoria-md.md)].</span><span class="sxs-lookup"><span data-stu-id="992c4-109">This means that the service assumes that any request that it receives has already been authenticated by the network host and that the host has correctly identified the principle for the request appropriately via the interfaces provided by [!INCLUDE[ssAstoria](../../../../includes/ssastoria-md.md)].</span></span> <span data-ttu-id="992c4-110">Ces approches et les options d’authentification sont détaillées dans [OData et séries d’authentification](https://go.microsoft.com/fwlink/?LinkId=200381).</span><span class="sxs-lookup"><span data-stu-id="992c4-110">These authentication options and approaches are detailed in [OData and Authentication series](https://go.microsoft.com/fwlink/?LinkId=200381).</span></span>  
  
### <a name="authentication-options-for-a-wcf-data-service"></a><span data-ttu-id="992c4-111">Options d'authentification pour un service de données WCF</span><span class="sxs-lookup"><span data-stu-id="992c4-111">Authentication Options for a WCF Data Service</span></span>  
 <span data-ttu-id="992c4-112">Le tableau suivant répertorie une partie des mécanismes d'authentification qui s'offrent à vous pour authentifier les demandes à un service de données WCF.</span><span class="sxs-lookup"><span data-stu-id="992c4-112">The following table lists some of the authentication mechanisms that are available to help you authenticate requests to a WCF Data Service.</span></span>  
  
|<span data-ttu-id="992c4-113">Options d’authentification</span><span class="sxs-lookup"><span data-stu-id="992c4-113">Authentication Options</span></span>|<span data-ttu-id="992c4-114">Description</span><span class="sxs-lookup"><span data-stu-id="992c4-114">Description</span></span>|  
|----------------------------|-----------------|  
|<span data-ttu-id="992c4-115">Authentification anonyme</span><span class="sxs-lookup"><span data-stu-id="992c4-115">Anonymous authentication</span></span>|<span data-ttu-id="992c4-116">Lorsque l'authentification anonyme HTTP est activée, n'importe quel principal est en mesure de se connecter au service de données.</span><span class="sxs-lookup"><span data-stu-id="992c4-116">When HTTP anonymous authentication is enabled, any principle is able to connect to the data service.</span></span> <span data-ttu-id="992c4-117">Les informations d'identification ne sont pas requises pour un accès anonyme.</span><span class="sxs-lookup"><span data-stu-id="992c4-117">Credentials are not required for anonymous access.</span></span> <span data-ttu-id="992c4-118">Utilisez cette option uniquement lorsque vous souhaitez autoriser tout le monde à accéder au service de données.</span><span class="sxs-lookup"><span data-stu-id="992c4-118">Use this option only when you want to allow anyone to access the data service.</span></span>|  
|<span data-ttu-id="992c4-119">Authentification de base et condensé</span><span class="sxs-lookup"><span data-stu-id="992c4-119">Basic and digest authentication</span></span>|<span data-ttu-id="992c4-120">Les informations d'identification comprenant un nom d'utilisateur et un mot de passe sont requises pour l'authentification.</span><span class="sxs-lookup"><span data-stu-id="992c4-120">Credentials consisting of a user name and password are required for authentication.</span></span> <span data-ttu-id="992c4-121">Prend en charge l'authentification des clients non Windows.</span><span class="sxs-lookup"><span data-stu-id="992c4-121">Supports authentication of non-Windows clients.</span></span> <span data-ttu-id="992c4-122">**Note de sécurité :**  Les informations d'authentification de base (nom d'utilisateur et mot de passe) sont envoyées en clair et peuvent être interceptées.</span><span class="sxs-lookup"><span data-stu-id="992c4-122">**Security Note:**  Basic authentication credentials (user name and password) are sent in the clear and can be intercepted.</span></span> <span data-ttu-id="992c4-123">L'authentification condensée envoie un hachage en fonction des informations d'identification fournies, les sécurisant davantage par rapport à une authentification basique.</span><span class="sxs-lookup"><span data-stu-id="992c4-123">Digest authentication sends a hash based-on the supplied credentials, which makes it more secure than basic authentication.</span></span> <span data-ttu-id="992c4-124">Ces deux authentifications sont vulnérables aux attaques de l'intercepteur (« Man-in-the-Middle »).</span><span class="sxs-lookup"><span data-stu-id="992c4-124">Both are susceptible to man-in-the-middle attacks.</span></span> <span data-ttu-id="992c4-125">Lorsque vous utilisez ces méthodes d'authentification, nous vous conseillons d'utiliser une communication chiffrée entre le client et le service de données à l'aide de SSL (Secure Sockets Layer).</span><span class="sxs-lookup"><span data-stu-id="992c4-125">When using these authentication methods, you should consider encrypting communication between client and the data service by using the Secure Sockets Layer (SSL).</span></span> <br /><br /> <span data-ttu-id="992c4-126">Microsoft Internet Information Services (IIS) fournit l'implémentation à la fois de l'authentification de base et condensée pour les demandes HTTP dans une application [!INCLUDE[vstecasp](../../../../includes/vstecasp-md.md)].</span><span class="sxs-lookup"><span data-stu-id="992c4-126">Microsoft Internet Information Services (IIS) provides an implementation of both basic and digest authentication for HTTP requests in an [!INCLUDE[vstecasp](../../../../includes/vstecasp-md.md)] application.</span></span> <span data-ttu-id="992c4-127">L'implémentation de ce fournisseur d'authentification Windows permet à une application cliente .NET Framework de fournir les informations d'identification dans l'en-tête HTTP de la demande au service de données pour négocier de façon transparente l'authentification d'un utilisateur Windows.</span><span class="sxs-lookup"><span data-stu-id="992c4-127">This Windows Authentication Provider implementation enables a .NET Framework client application to supply credentials in the HTTP header of the request to the data service to seamlessly negotiate authentication of a Windows user.</span></span> <span data-ttu-id="992c4-128">Pour plus d’informations, consultez [référence technique de l’authentification Digest](https://go.microsoft.com/fwlink/?LinkId=200408).</span><span class="sxs-lookup"><span data-stu-id="992c4-128">For more information, see [Digest Authentication Technical Reference](https://go.microsoft.com/fwlink/?LinkId=200408).</span></span><br /><br /> <span data-ttu-id="992c4-129">Lorsque vous souhaitez que votre service de données utilise l'authentification de base reposant sur un service d'authentification personnalisé et non les informations d'identification Windows, vous devez implémenter un module HTTP [!INCLUDE[vstecasp](../../../../includes/vstecasp-md.md)] pour l'authentification.</span><span class="sxs-lookup"><span data-stu-id="992c4-129">When you want to have your data service use basic authentication based on some custom authentication service and not Windows credentials, you must implement a custom [!INCLUDE[vstecasp](../../../../includes/vstecasp-md.md)] HTTP Module for authentication.</span></span><br /><br /> <span data-ttu-id="992c4-130">Pour obtenir un exemple montrant comment utiliser un schéma d’authentification personnalisé avec [!INCLUDE[ssAstoria](../../../../includes/ssastoria-md.md)], consultez le billet sur [l’authentification de base personnalisée](https://go.microsoft.com/fwlink/?LinkID=200388) dans le [!INCLUDE[ssODataShort](../../../../includes/ssodatashort-md.md)] et séries d’authentification.</span><span class="sxs-lookup"><span data-stu-id="992c4-130">For an example of how to use a custom basic authentication scheme with [!INCLUDE[ssAstoria](../../../../includes/ssastoria-md.md)], see the post on [Custom Basic Authentication](https://go.microsoft.com/fwlink/?LinkID=200388) in the [!INCLUDE[ssODataShort](../../../../includes/ssodatashort-md.md)] and authentication series.</span></span>|  
|<span data-ttu-id="992c4-131">Authentification Windows</span><span class="sxs-lookup"><span data-stu-id="992c4-131">Windows authentication</span></span>|<span data-ttu-id="992c4-132">Les informations d'identification basées sur Windows sont échangées à l'aide de NTLM ou Kerberos.</span><span class="sxs-lookup"><span data-stu-id="992c4-132">Windows-based credentials are exchanged by using NTLM or Kerberos.</span></span> <span data-ttu-id="992c4-133">Ce mécanisme est plus sécurisé que l'authentification de base ou condensée, mais requiert que le client soit une application basée sur Windows.</span><span class="sxs-lookup"><span data-stu-id="992c4-133">This mechanism is more secure than basic or digest authentication, but it requires that the client be a Windows-based application.</span></span> <span data-ttu-id="992c4-134">IIS fournit également l'implémentation de l'authentification Windows pour les demandes HTTP dans une application [!INCLUDE[vstecasp](../../../../includes/vstecasp-md.md)].</span><span class="sxs-lookup"><span data-stu-id="992c4-134">IIS also provides an implementation of Windows authentication for HTTP requests in an [!INCLUDE[vstecasp](../../../../includes/vstecasp-md.md)] application.</span></span> <span data-ttu-id="992c4-135">Pour plus d’informations, consultez [vue d’ensemble de l’authentification de formulaires ASP.NET](https://docs.microsoft.com/previous-versions/aspnet/7t6b43z4(v=vs.100)).</span><span class="sxs-lookup"><span data-stu-id="992c4-135">For more information, see [ASP.NET Forms Authentication Overview](https://docs.microsoft.com/previous-versions/aspnet/7t6b43z4(v=vs.100)).</span></span><br /><br /> <span data-ttu-id="992c4-136">Pour obtenir un exemple montrant comment utiliser l’authentification Windows avec [!INCLUDE[ssAstoria](../../../../includes/ssastoria-md.md)], consultez le billet sur [l’authentification Windows](https://go.microsoft.com/fwlink/?LinkID=200384) dans le [!INCLUDE[ssODataShort](../../../../includes/ssodatashort-md.md)] et séries d’authentification.</span><span class="sxs-lookup"><span data-stu-id="992c4-136">For an example of how to use Windows authentication with [!INCLUDE[ssAstoria](../../../../includes/ssastoria-md.md)], see the post on [Windows Authentication](https://go.microsoft.com/fwlink/?LinkID=200384) in the [!INCLUDE[ssODataShort](../../../../includes/ssodatashort-md.md)] and authentication series.</span></span>|  
|<span data-ttu-id="992c4-137">Authentification par formulaire [!INCLUDE[vstecasp](../../../../includes/vstecasp-md.md)]</span><span class="sxs-lookup"><span data-stu-id="992c4-137">[!INCLUDE[vstecasp](../../../../includes/vstecasp-md.md)] forms authentication</span></span>|<span data-ttu-id="992c4-138">L'authentification par formulaire vous permet d'authentifier des utilisateurs à l'aide de votre propre code puis de conserver un jeton d'authentification dans un cookie ou dans l'URL de la page.</span><span class="sxs-lookup"><span data-stu-id="992c4-138">Forms authentication lets you authenticate users by using your own code and then maintain an authentication token in a cookie or in the page URL.</span></span> <span data-ttu-id="992c4-139">Vous authentifiez le nom d'utilisateur et le mot de passe de vos utilisateurs en créant un formulaire de connexion.</span><span class="sxs-lookup"><span data-stu-id="992c4-139">You authenticate the user name and password of your users using a login form that you create.</span></span> <span data-ttu-id="992c4-140">Les demandes non authentifiées sont redirigées vers une page de connexion, où l'utilisateur fournit des informations d'identification et envoie le formulaire.</span><span class="sxs-lookup"><span data-stu-id="992c4-140">Unauthenticated requests are redirected to a login page, where the user provides credentials and submits the form.</span></span> <span data-ttu-id="992c4-141">Si l'application authentifie la demande, le système délivre un ticket qui contient une clé pour rétablir l'identité pour les demandes suivantes.</span><span class="sxs-lookup"><span data-stu-id="992c4-141">If the application authenticates the request, the system issues a ticket that contains a key for reestablishing the identity for subsequent requests.</span></span> <span data-ttu-id="992c4-142">Pour plus d’informations, consultez [fournisseur d’authentification Forms](https://docs.microsoft.com/previous-versions/aspnet/9wff0kyh(v=vs.100)).</span><span class="sxs-lookup"><span data-stu-id="992c4-142">For more information, see [Forms Authentication Provider](https://docs.microsoft.com/previous-versions/aspnet/9wff0kyh(v=vs.100)).</span></span> <span data-ttu-id="992c4-143">**Note de sécurité :**  Par défaut, le cookie qui contient le ticket de l'authentification par formulaire n'est pas sécurisé lorsque vous utilisez l'authentification par formulaire dans une application Web [!INCLUDE[vstecasp](../../../../includes/vstecasp-md.md)].</span><span class="sxs-lookup"><span data-stu-id="992c4-143">**Security Note:**  By default, the cookie that contains the forms authentication ticket is not secured when you use forms authentication in a [!INCLUDE[vstecasp](../../../../includes/vstecasp-md.md)] Web application.</span></span> <span data-ttu-id="992c4-144">Vous devriez considérer l'utilisation de SSL pour protéger le ticket d'authentification et les informations d'identification de la connexion initiale.</span><span class="sxs-lookup"><span data-stu-id="992c4-144">You should consider requiring SSL to protect both the authentication ticket and the initial login credentials.</span></span> <br /><br /> <span data-ttu-id="992c4-145">Pour un exemple montrant comment utiliser forms authentication avec [!INCLUDE[ssAstoria](../../../../includes/ssastoria-md.md)], consultez le billet sur [l’authentification par formulaire](https://go.microsoft.com/fwlink/?LinkID=200389) dans le [!INCLUDE[ssODataShort](../../../../includes/ssodatashort-md.md)] et séries d’authentification.</span><span class="sxs-lookup"><span data-stu-id="992c4-145">For an example of how to use forms authentication with [!INCLUDE[ssAstoria](../../../../includes/ssastoria-md.md)], see the post on [Forms Authentication](https://go.microsoft.com/fwlink/?LinkID=200389) in the [!INCLUDE[ssODataShort](../../../../includes/ssodatashort-md.md)] and authentication series.</span></span>|  
|<span data-ttu-id="992c4-146">Authentification basée sur les revendications</span><span class="sxs-lookup"><span data-stu-id="992c4-146">Claims-based authentication</span></span>|<span data-ttu-id="992c4-147">Dans l’authentification basée sur les revendications, le service de données s’appuie sur un service de fournisseur d’identité « tiers » approuvé pour authentifier l’utilisateur.</span><span class="sxs-lookup"><span data-stu-id="992c4-147">In claims-based authentication, the data service relies on a trusted "third-party" identity provider service to authenticate the user.</span></span> <span data-ttu-id="992c4-148">Le fournisseur d'identité authentifie positivement l'utilisateur qui demande l'accès aux ressources du service de données et émet un jeton qui accorde l'accès aux ressources demandées.</span><span class="sxs-lookup"><span data-stu-id="992c4-148">The identity provider positively authenticates the user that is requesting access to data service resources and issues a token that grants access to the requested resources.</span></span> <span data-ttu-id="992c4-149">Ce jeton est ensuite présenté au service de données, qui accorde ensuite l'accès à l'utilisateur en fonction de la relation d'approbation avec le service d'identité qui émet le jeton d'accès.</span><span class="sxs-lookup"><span data-stu-id="992c4-149">This token is then presented to the data service, which then grants access to the user based on the trust relationship with the identity service that issued the access token.</span></span><br /><br /> <span data-ttu-id="992c4-150">L'avantage d'utiliser un fournisseur d'authentification basée sur les revendications est que celles-ci peuvent être utilisées pour authentifier différents types de clients entre plusieurs domaines approuvés.</span><span class="sxs-lookup"><span data-stu-id="992c4-150">The benefit of using a claims-based authentication provider is that they can be used to authenticate various types of clients across trust domains.</span></span> <span data-ttu-id="992c4-151">En utilisant un tel fournisseur tiers, un service de données peut décharger les revendications de gestion et authentification des utilisateurs.</span><span class="sxs-lookup"><span data-stu-id="992c4-151">By employing such a third-party provider, a data service can offload the requirements of maintaining and authenticating users.</span></span> <span data-ttu-id="992c4-152">OAuth 2.0 est un protocole d'authentification basée sur les revendications pris en charge par le contrôle d'accès Microsoft Azure AppFabric pour l'autorisation fédérée en tant que service.</span><span class="sxs-lookup"><span data-stu-id="992c4-152">OAuth 2.0 is a claims-based authentication protocol that is supported by Windows Azure AppFabric Access Control for federated authorization as a service.</span></span> <span data-ttu-id="992c4-153">Ce protocole prend en charge les services REST.</span><span class="sxs-lookup"><span data-stu-id="992c4-153">This protocol supports REST-based services.</span></span> <span data-ttu-id="992c4-154">Pour obtenir un exemple montrant comment utiliser OAuth 2.0 avec [!INCLUDE[ssAstoria](../../../../includes/ssastoria-md.md)], consultez le billet sur [OData et OAuth](https://go.microsoft.com/fwlink/?LinkId=200514) dans le [!INCLUDE[ssODataShort](../../../../includes/ssodatashort-md.md)] et séries d’authentification.</span><span class="sxs-lookup"><span data-stu-id="992c4-154">For an example of how to use OAuth 2.0 with [!INCLUDE[ssAstoria](../../../../includes/ssastoria-md.md)], see the post on [OData and OAuth](https://go.microsoft.com/fwlink/?LinkId=200514) in the [!INCLUDE[ssODataShort](../../../../includes/ssodatashort-md.md)] and authentication series.</span></span>|  
  
<a name="clientAuthentication"></a>   
### <a name="authentication-in-the-client-library"></a><span data-ttu-id="992c4-155">Authentification dans la bibliothèque cliente</span><span class="sxs-lookup"><span data-stu-id="992c4-155">Authentication in the Client Library</span></span>  
 <span data-ttu-id="992c4-156">Par défaut, la bibliothèque cliente [!INCLUDE[ssAstoria](../../../../includes/ssastoria-md.md)] ne fournit aucune information d'identification lors d'une demande à un service [!INCLUDE[ssODataShort](../../../../includes/ssodatashort-md.md)].</span><span class="sxs-lookup"><span data-stu-id="992c4-156">By default, the [!INCLUDE[ssAstoria](../../../../includes/ssastoria-md.md)] client library does not supply credentials when making a request to an [!INCLUDE[ssODataShort](../../../../includes/ssodatashort-md.md)] service.</span></span> <span data-ttu-id="992c4-157">Lorsque les informations de connexions sont demandées par le service de données pour authentifier un utilisateur, elles peuvent être fournies par un <xref:System.Net.NetworkCredential> accédé depuis la propriété <xref:System.Data.Services.Client.DataServiceContext.Credentials%2A> du <xref:System.Data.Services.Client.DataServiceContext>, comme dans l'exemple suivant :</span><span class="sxs-lookup"><span data-stu-id="992c4-157">When login credentials are required by the data service to authenticate a user, these credentials can be supplied in a <xref:System.Net.NetworkCredential> accessed from the <xref:System.Data.Services.Client.DataServiceContext.Credentials%2A> property of the <xref:System.Data.Services.Client.DataServiceContext>, as in the following example:</span></span>  
  
```csharp  
// Set the client authentication credentials.  
context.Credentials =  
    new NetworkCredential(userName, password, domain);  
```  
  
```vb  
' Set the client authentication credentials.  
context.Credentials = _  
    New NetworkCredential(userName, password, domain)  
```  
  
 <span data-ttu-id="992c4-158">Pour plus d'informations, voir [Procédure : Spécifiez les informations d’identification du Client pour une demande de Service de données](../../../../docs/framework/data/wcf/specify-client-creds-for-a-data-service-request-wcf.md).</span><span class="sxs-lookup"><span data-stu-id="992c4-158">For more information, see [How to: Specify Client Credentials for a Data Service Request](../../../../docs/framework/data/wcf/specify-client-creds-for-a-data-service-request-wcf.md).</span></span>  
  
 <span data-ttu-id="992c4-159">Lorsque le service de données demande des informations de connexion qui ne peuvent pas être spécifiées à l'aide d'un objet <xref:System.Net.NetworkCredential>, comme un jeton ou un cookie basé sur des revendications, vous devez définir manuellement les en-têtes, généralement les en-têtes `Authorization` et `Cookie`, dans la demande HTTP.</span><span class="sxs-lookup"><span data-stu-id="992c4-159">When the data service requires login credentials that cannot be specified by using a <xref:System.Net.NetworkCredential> object, such as a claims-based token or cookie, you must manually set headers in the HTTP request, usually the `Authorization` and `Cookie` headers.</span></span> <span data-ttu-id="992c4-160">Pour plus d’informations sur ce type de scénario d’authentification, consultez le billet [OData et l’authentification : Les raccordements côté client](https://go.microsoft.com/fwlink/?LinkID=200385).</span><span class="sxs-lookup"><span data-stu-id="992c4-160">For more information about this kind of authentication scenario, see the post [OData and Authentication: Client-Side Hooks](https://go.microsoft.com/fwlink/?LinkID=200385).</span></span> <span data-ttu-id="992c4-161">Pour obtenir un exemple montrant comment définir des en-têtes HTTP dans un message de demande, consultez [Comment : Définir des en-têtes dans la demande du Client](../../../../docs/framework/data/wcf/how-to-set-headers-in-the-client-request-wcf-data-services.md).</span><span class="sxs-lookup"><span data-stu-id="992c4-161">For an example of how to set HTTP headers in a request message, see [How to: Set Headers in the Client Request](../../../../docs/framework/data/wcf/how-to-set-headers-in-the-client-request-wcf-data-services.md).</span></span>  
  
## <a name="impersonation"></a><span data-ttu-id="992c4-162">Emprunt d'identité</span><span class="sxs-lookup"><span data-stu-id="992c4-162">Impersonation</span></span>  
 <span data-ttu-id="992c4-163">Généralement, le service de données accède aux ressources demandées, comme les fichiers sur le serveur ou la base de données, à l'aide des informations d'authentification du processus de travail qui héberge actuellement le service de données.</span><span class="sxs-lookup"><span data-stu-id="992c4-163">Generally, the data service accesses required resources, such as files on the server or a database, by using the credentials of the worker process that is hosting the data service.</span></span> <span data-ttu-id="992c4-164">Lors de l'utilisation de l'emprunt d'identité, les applications [!INCLUDE[vstecasp](../../../../includes/vstecasp-md.md)] peuvent s'exécuter avec l'identité Windows (compte d'utilisateur) de l'utilisateur qui fait la requête.</span><span class="sxs-lookup"><span data-stu-id="992c4-164">When using impersonation, [!INCLUDE[vstecasp](../../../../includes/vstecasp-md.md)] applications can execute with the Windows identity (user account) of the user making the request.</span></span> <span data-ttu-id="992c4-165">L'emprunt d'identité est utilisé couramment dans les applications qui reposent sur IIS pour authentifier l'utilisateur et les informations d'identification de ce principal sont utilisées pour accéder aux ressources demandées.</span><span class="sxs-lookup"><span data-stu-id="992c4-165">Impersonation is commonly used in applications that rely on IIS to authenticate the user, and the credentials of this principle are used to access the required resources.</span></span> <span data-ttu-id="992c4-166">Pour plus d’informations, consultez [emprunt d’identité ASP.NET](https://docs.microsoft.com/previous-versions/aspnet/xh507fc5(v=vs.100)).</span><span class="sxs-lookup"><span data-stu-id="992c4-166">For more information, see [ASP.NET Impersonation](https://docs.microsoft.com/previous-versions/aspnet/xh507fc5(v=vs.100)).</span></span>  
  
## <a name="configuring-data-service-authorization"></a><span data-ttu-id="992c4-167">Configuration de l'autorisation du service de données</span><span class="sxs-lookup"><span data-stu-id="992c4-167">Configuring Data Service Authorization</span></span>  
 <span data-ttu-id="992c4-168">L'autorisation est le fait d'autoriser l'accès aux ressources d'une application à un principal ou à un processus identifié sur la base d'une authentification précédemment réussie.</span><span class="sxs-lookup"><span data-stu-id="992c4-168">Authorization is the granting of access to application resources to a principle or process that is identified based on a previously successful authentication.</span></span> <span data-ttu-id="992c4-169">En règle générale, vous ne devriez accorder aux utilisateurs du service de données que des droits suffisants pour exécuter les opérations requises par les applications clientes.</span><span class="sxs-lookup"><span data-stu-id="992c4-169">As a general practice, you should only grant sufficient rights to users of the data service to perform the operations required by client applications.</span></span>  
  
### <a name="restrict-access-to-data-service-resources"></a><span data-ttu-id="992c4-170">Restriction d'accès aux ressources du service de données</span><span class="sxs-lookup"><span data-stu-id="992c4-170">Restrict Access to Data Service Resources</span></span>  
 <span data-ttu-id="992c4-171">Par défaut, [!INCLUDE[ssAstoria](../../../../includes/ssastoria-md.md)] vous permet d'accorder à n'importe quel utilisateur pouvant accéder au service de données un accès en lecture et écriture commun aux ressources du service de données (jeu d'entités et opérations de service).</span><span class="sxs-lookup"><span data-stu-id="992c4-171">By default, [!INCLUDE[ssAstoria](../../../../includes/ssastoria-md.md)] enables you to grant common read and write access against data service resources (entity set and service operations) to any user that is able to access the data service.</span></span> <span data-ttu-id="992c4-172">Les règles qui définissent l'accès en lecture et écriture peuvent être définies séparément pour chaque jeu d'entité exposé par le service de données, tout comme toute opération de service.</span><span class="sxs-lookup"><span data-stu-id="992c4-172">Rules that define read and write access can be defined separately for each entity set exposed by the data service, as well as to any service operations.</span></span> <span data-ttu-id="992c4-173">Nous vous recommandons de limiter l'accès en lecture et écriture aux seules ressources requises par l'application cliente.</span><span class="sxs-lookup"><span data-stu-id="992c4-173">We recommend limiting both read and write access to only the resources required by the client application.</span></span> <span data-ttu-id="992c4-174">Pour plus d’informations, consultez [exigences d’accès Minimum ressource](../../../../docs/framework/data/wcf/configuring-the-data-service-wcf-data-services.md#accessRequirements).</span><span class="sxs-lookup"><span data-stu-id="992c4-174">For more information, see [Minimum Resource Access Requirements](../../../../docs/framework/data/wcf/configuring-the-data-service-wcf-data-services.md#accessRequirements).</span></span>  
  
### <a name="implement-role-based-interceptors"></a><span data-ttu-id="992c4-175">Implémentation d'intercepteurs basés sur le rôle</span><span class="sxs-lookup"><span data-stu-id="992c4-175">Implement Role-Based Interceptors</span></span>  
 <span data-ttu-id="992c4-176">Les intercepteurs vous permettent d'intercepter les demandes adressées aux ressources du service de données avant qu'elles ne soient traitées par le service de données.</span><span class="sxs-lookup"><span data-stu-id="992c4-176">Interceptors enable you to intercept requests against data service resources before they are acted on by the data service.</span></span> <span data-ttu-id="992c4-177">Pour plus d’informations, consultez [intercepteurs](../../../../docs/framework/data/wcf/interceptors-wcf-data-services.md).</span><span class="sxs-lookup"><span data-stu-id="992c4-177">For more information, see [Interceptors](../../../../docs/framework/data/wcf/interceptors-wcf-data-services.md).</span></span> <span data-ttu-id="992c4-178">Les intercepteurs vous permettent de prendre des décisions d'autorisation en fonction de l'utilisateur authentifié qui effectue la demande.</span><span class="sxs-lookup"><span data-stu-id="992c4-178">Interceptors enable you to make authorization decisions based the authenticated user that is making the request.</span></span> <span data-ttu-id="992c4-179">Pour obtenir un exemple montrant comment restreindre l’accès aux ressources de service de données basés sur une identité de l’utilisateur authentifié, consultez [Comment : Intercepter les Messages de Service de données](../../../../docs/framework/data/wcf/how-to-intercept-data-service-messages-wcf-data-services.md).</span><span class="sxs-lookup"><span data-stu-id="992c4-179">For an example of how to restrict access to data service resources based on an authenticated user identity, see [How to: Intercept Data Service Messages](../../../../docs/framework/data/wcf/how-to-intercept-data-service-messages-wcf-data-services.md).</span></span>  
  
### <a name="restrict-access-to-the-persisted-data-store-and-local-resources"></a><span data-ttu-id="992c4-180">Restriction d'accès aux ressources d'un magasin de données persistantes ou aux ressources locales</span><span class="sxs-lookup"><span data-stu-id="992c4-180">Restrict Access to the Persisted Data Store and Local Resources</span></span>  
 <span data-ttu-id="992c4-181">Les comptes que vous utilisez pour accéder au magasin de données persistantes doivent disposer uniquement des autorisations minimales pour prendre en charge les spécifications du service de données dans la base de données ou le système de fichiers.</span><span class="sxs-lookup"><span data-stu-id="992c4-181">The accounts that are used to access the persisted store should be granted only enough rights in a database or the file system to support the requirements of the data service.</span></span> <span data-ttu-id="992c4-182">Lorsque vous utilisez une authentification anonyme, il s'agit du compte utilisé pour exécuter l'application d'hébergement.</span><span class="sxs-lookup"><span data-stu-id="992c4-182">When anonymous authentication is used, this is the account used to run the hosting application.</span></span> <span data-ttu-id="992c4-183">Pour plus d'informations, voir [Procédure : Développer un Service de données WCF s’exécutant sur IIS](../../../../docs/framework/data/wcf/how-to-develop-a-wcf-data-service-running-on-iis.md).</span><span class="sxs-lookup"><span data-stu-id="992c4-183">For more information, see [How to: Develop a WCF Data Service Running on IIS](../../../../docs/framework/data/wcf/how-to-develop-a-wcf-data-service-running-on-iis.md).</span></span> <span data-ttu-id="992c4-184">Lorsque vous utilisez l'emprunt d'identité, les utilisateurs authentifiés doivent être autorisés à accéder à ces ressources, généralement dans le cadre d'un groupe Windows.</span><span class="sxs-lookup"><span data-stu-id="992c4-184">When impersonation is used, authenticated users must be granted access to these resources, usually as part of a Windows group.</span></span>  
  
## <a name="other-security-considerations"></a><span data-ttu-id="992c4-185">Autres considérations à propos de la sécurité</span><span class="sxs-lookup"><span data-stu-id="992c4-185">Other Security Considerations</span></span>  
  
### <a name="secure-the-data-in-the-payload"></a><span data-ttu-id="992c4-186">Sécurisation des données dans la charge utile</span><span class="sxs-lookup"><span data-stu-id="992c4-186">Secure the Data in the Payload</span></span>  
 [!INCLUDE[ssODataShort](../../../../includes/ssodatashort-md.md)] <span data-ttu-id="992c4-187">est basé sur le protocole HTTP.</span><span class="sxs-lookup"><span data-stu-id="992c4-187">is based on the HTTP protocol.</span></span> <span data-ttu-id="992c4-188">Dans un message HTTP, l'en-tête peut contenir des informations d'identification utiles concernant l'utilisateur, selon l'authentification implémentée par le service de données.</span><span class="sxs-lookup"><span data-stu-id="992c4-188">In an HTTP message, the header may contain valuable user credentials, depending on the authentication implemented by the data service.</span></span> <span data-ttu-id="992c4-189">Le corps du message peut également contenir des données utiles sur le client, qu'il convient de protéger.</span><span class="sxs-lookup"><span data-stu-id="992c4-189">The message body may also contain valuable customer data that must be protected.</span></span> <span data-ttu-id="992c4-190">Dans ces deux cas, nous vous recommandons d'utiliser SSL pour protéger ces informations lors de la transmission.</span><span class="sxs-lookup"><span data-stu-id="992c4-190">In both of these cases, we recommend that you use SSL to protect this information over the wire.</span></span>  
  
### <a name="ignored-message-headers-and-cookies"></a><span data-ttu-id="992c4-191">En-têtes et cookies de message ignorés</span><span class="sxs-lookup"><span data-stu-id="992c4-191">Ignored Message Headers and Cookies</span></span>  
 <span data-ttu-id="992c4-192">Les en-têtes des demandes HTTP autres que celles qui déclarent des types de contenu et des emplacements de ressources, sont ignorés et ne sont jamais définis par le service de données.</span><span class="sxs-lookup"><span data-stu-id="992c4-192">HTTP request headers, other than those that declare content types and resource locations, are ignored and are never set by the data service.</span></span>  
  
 <span data-ttu-id="992c4-193">Les cookies peuvent également être utilisés dans le cadre d'un schéma d'authentification, comme avec l'authentification par formulaire [!INCLUDE[vstecasp](../../../../includes/vstecasp-md.md)].</span><span class="sxs-lookup"><span data-stu-id="992c4-193">Cookies can be used as part of an authentication scheme, such as with [!INCLUDE[vstecasp](../../../../includes/vstecasp-md.md)] Forms Authentication.</span></span> <span data-ttu-id="992c4-194">Toutefois, les cookies HTTP définis sur une demande entrante sont ignorés par [!INCLUDE[ssAstoria](../../../../includes/ssastoria-md.md)].</span><span class="sxs-lookup"><span data-stu-id="992c4-194">However, any HTTP cookies set on an incoming request are ignored by [!INCLUDE[ssAstoria](../../../../includes/ssastoria-md.md)].</span></span> <span data-ttu-id="992c4-195">L'hôte d'un service de données peut traiter le cookie, mais le runtime [!INCLUDE[ssAstoria](../../../../includes/ssastoria-md.md)] n'analyse ni ne retourne jamais de cookies.</span><span class="sxs-lookup"><span data-stu-id="992c4-195">The host of a data service may process the cookie, but the [!INCLUDE[ssAstoria](../../../../includes/ssastoria-md.md)] runtime never analyzes or returns cookies.</span></span> <span data-ttu-id="992c4-196">La bibliothèque du client [!INCLUDE[ssAstoria](../../../../includes/ssastoria-md.md)] ne traite pas les cookies envoyés dans la réponse.</span><span class="sxs-lookup"><span data-stu-id="992c4-196">The [!INCLUDE[ssAstoria](../../../../includes/ssastoria-md.md)] client library also does not process cookies sent in the response.</span></span>  
  
### <a name="custom-hosting-requirements"></a><span data-ttu-id="992c4-197">Conditions d'hébergement personnalisé</span><span class="sxs-lookup"><span data-stu-id="992c4-197">Custom Hosting Requirements</span></span>  
 <span data-ttu-id="992c4-198">Par défaut, [!INCLUDE[ssAstoria](../../../../includes/ssastoria-md.md)] est créé dans une application [!INCLUDE[vstecasp](../../../../includes/vstecasp-md.md)] hébergée dans IIS.</span><span class="sxs-lookup"><span data-stu-id="992c4-198">By default, [!INCLUDE[ssAstoria](../../../../includes/ssastoria-md.md)] is created as an [!INCLUDE[vstecasp](../../../../includes/vstecasp-md.md)] application hosted in IIS.</span></span> <span data-ttu-id="992c4-199">Cela permet au service de données de tirer parti des comportements de sécurité de cette plateforme.</span><span class="sxs-lookup"><span data-stu-id="992c4-199">This enables the data service to leverage the secure behaviors of this platform.</span></span> <span data-ttu-id="992c4-200">Vous pouvez définir les services [!INCLUDE[ssAstoria](../../../../includes/ssastoria-md.md)] hébergés par un hôte client.</span><span class="sxs-lookup"><span data-stu-id="992c4-200">You can define [!INCLUDE[ssAstoria](../../../../includes/ssastoria-md.md)] that are hosted by a custom host.</span></span> <span data-ttu-id="992c4-201">Pour plus d’informations, consultez [qui héberge le Service de données](../../../../docs/framework/data/wcf/hosting-the-data-service-wcf-data-services.md).</span><span class="sxs-lookup"><span data-stu-id="992c4-201">For more information, see [Hosting the Data Service](../../../../docs/framework/data/wcf/hosting-the-data-service-wcf-data-services.md).</span></span> <span data-ttu-id="992c4-202">Les composants et la plateforme qui hébergent un service de données doivent assurer les comportements de sécurité suivants pour empêcher des attaques sur le service de données :</span><span class="sxs-lookup"><span data-stu-id="992c4-202">The components and platform hosting a data service must ensure the following security behaviors to prevent attacks on the data service:</span></span>  
  
-   <span data-ttu-id="992c4-203">Limiter la longueur de l'URI accepté dans une demande de service de données pour toutes les opérations possibles.</span><span class="sxs-lookup"><span data-stu-id="992c4-203">Limit the length of the URI accepted in a data service request for all possible operations.</span></span>  
  
-   <span data-ttu-id="992c4-204">Limiter la taille des messages HTTP entrants et sortants.</span><span class="sxs-lookup"><span data-stu-id="992c4-204">Limit the size of both incoming and outgoing HTTP messages.</span></span>  
  
-   <span data-ttu-id="992c4-205">Limiter le nombre total de demandes sortantes à tout moment.</span><span class="sxs-lookup"><span data-stu-id="992c4-205">Limit the total number of outstanding requests at any given time.</span></span>  
  
-   <span data-ttu-id="992c4-206">Limiter la taille des en-têtes HTTP et leurs valeurs, et fournir à [!INCLUDE[ssAstoria](../../../../includes/ssastoria-md.md)] un accès aux données d'en-tête.</span><span class="sxs-lookup"><span data-stu-id="992c4-206">Limit the size of HTTP headers and their values, and provide [!INCLUDE[ssAstoria](../../../../includes/ssastoria-md.md)] access to header data.</span></span>  
  
-   <span data-ttu-id="992c4-207">Détecter et répertorier les attaques connues, telles que TCP SYN et les attaques de relecture de message.</span><span class="sxs-lookup"><span data-stu-id="992c4-207">Detect and counter known attacks, such as TCP SYN and message replay attacks.</span></span>  
  
### <a name="values-are-not-further-encoded"></a><span data-ttu-id="992c4-208">Les valeurs ne sont pas encodées ultérieurement.</span><span class="sxs-lookup"><span data-stu-id="992c4-208">Values Are Not Further Encoded</span></span>  
 <span data-ttu-id="992c4-209">Les valeurs de propriété envoyées au service de données ne sont pas encodées ultérieurement par le runtime de [!INCLUDE[ssAstoria](../../../../includes/ssastoria-md.md)].</span><span class="sxs-lookup"><span data-stu-id="992c4-209">Property values sent to the data service are not further encoded by the [!INCLUDE[ssAstoria](../../../../includes/ssastoria-md.md)] runtime.</span></span> <span data-ttu-id="992c4-210">Par exemple, lorsqu'une propriété de chaîne d'une entité inclut un contenu HTML formaté, les balises ne sont pas encodées en HTML par le service de données.</span><span class="sxs-lookup"><span data-stu-id="992c4-210">For example, when a string property of an entity contains formatted HTML content, the tags are not HTML encoded by the data service.</span></span> <span data-ttu-id="992c4-211">De même, le service de données n'encode pas ultérieurement les valeurs de propriété dans la réponse.</span><span class="sxs-lookup"><span data-stu-id="992c4-211">The data service also does not further encode property values in the response.</span></span> <span data-ttu-id="992c4-212">La bibliothèque du client n'exécute aucun encodage supplémentaire.</span><span class="sxs-lookup"><span data-stu-id="992c4-212">The client library also does not perform any additional encoding.</span></span>  
  
### <a name="considerations-for-client-applications"></a><span data-ttu-id="992c4-213">Considérations pour les applications clientes</span><span class="sxs-lookup"><span data-stu-id="992c4-213">Considerations for Client Applications</span></span>  
 <span data-ttu-id="992c4-214">Les considérations sur la sécurité suivantes s'appliquent aux applications qui utilisent le client [!INCLUDE[ssAstoria](../../../../includes/ssastoria-md.md)] pour accéder aux services [!INCLUDE[ssODataShort](../../../../includes/ssodatashort-md.md)] :</span><span class="sxs-lookup"><span data-stu-id="992c4-214">The following security considerations apply to applications that use the [!INCLUDE[ssAstoria](../../../../includes/ssastoria-md.md)] client to access [!INCLUDE[ssODataShort](../../../../includes/ssodatashort-md.md)] services:</span></span>  
  
-   <span data-ttu-id="992c4-215">La bibliothèque du client suppose que les protocoles utilisés pour accéder au service de données fournissent un niveau de sécurité suffisant.</span><span class="sxs-lookup"><span data-stu-id="992c4-215">The client library assumes that the protocols used to access the data service provide an appropriate level of security.</span></span>  
  
-   <span data-ttu-id="992c4-216">La bibliothèque du client utilise toutes les valeurs par défaut des délais d'attente et des options d'analyse des piles de transport fournies par la plateforme sous-jacente.</span><span class="sxs-lookup"><span data-stu-id="992c4-216">The client library uses all the default values for timeouts and parsing options of the underlying platform-provided transport stacks.</span></span>  
  
-   <span data-ttu-id="992c4-217">La bibliothèque du client ne lit aucun paramètre des fichiers de configuration de l'application.</span><span class="sxs-lookup"><span data-stu-id="992c4-217">The client library does not read any settings from application configuration files.</span></span>  
  
-   <span data-ttu-id="992c4-218">La bibliothèque du client n'implémente aucun mécanisme d'accès entre domaines.</span><span class="sxs-lookup"><span data-stu-id="992c4-218">The client library does not implement any cross domain access mechanisms.</span></span> <span data-ttu-id="992c4-219">En revanche, elle utilise les mécanismes fournis par la pile HTTP sous-jacente.</span><span class="sxs-lookup"><span data-stu-id="992c4-219">Instead, it relies on the mechanisms provided by the underlying HTTP stack.</span></span>  
  
-   <span data-ttu-id="992c4-220">La bibliothèque du client ne dispose d'aucun élément d'interface utilisateur et elle ne tente jamais d'afficher ou de restituer les données qu'elle reçoit ou envoie.</span><span class="sxs-lookup"><span data-stu-id="992c4-220">The client library has no user interface elements, and it never tries to display or render the data that it receives or sends.</span></span>  
  
-   <span data-ttu-id="992c4-221">Nous recommandons que les applications clientes valident toujours les entrées utilisateur et les données acceptées provenant de services non approuvés.</span><span class="sxs-lookup"><span data-stu-id="992c4-221">We recommend that client applications always validate user input as well as data accepted from untrusted services.</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="992c4-222">Voir aussi</span><span class="sxs-lookup"><span data-stu-id="992c4-222">See also</span></span>
- [<span data-ttu-id="992c4-223">Définition de WCF Data Services</span><span class="sxs-lookup"><span data-stu-id="992c4-223">Defining WCF Data Services</span></span>](../../../../docs/framework/data/wcf/defining-wcf-data-services.md)
- [<span data-ttu-id="992c4-224">Bibliothèque cliente WCF Data Services</span><span class="sxs-lookup"><span data-stu-id="992c4-224">WCF Data Services Client Library</span></span>](../../../../docs/framework/data/wcf/wcf-data-services-client-library.md)
