---
title: Concepts Windows Workflow fondamentaux
ms.custom: ''
ms.date: 03/30/2017
ms.prod: .net-framework
ms.reviewer: ''
ms.suite: ''
ms.tgt_pltfrm: ''
ms.topic: article
ms.assetid: 0e930e80-5060-45d2-8a7a-95c0690105d4
caps.latest.revision: 27
author: dotnet-bot
ms.author: dotnetcontent
manager: wpickett
ms.workload:
- dotnet
ms.openlocfilehash: faeb05045049e9a53babf754f1ec058c6aac2f05
ms.sourcegitcommit: 03ee570f6f528a7d23a4221dcb26a9498edbdf8c
ms.translationtype: MT
ms.contentlocale: fr-FR
ms.lasthandoff: 04/28/2018
---
# <a name="fundamental-windows-workflow-concepts"></a><span data-ttu-id="d1c9d-102">Concepts Windows Workflow fondamentaux</span><span class="sxs-lookup"><span data-stu-id="d1c9d-102">Fundamental Windows Workflow Concepts</span></span>
<span data-ttu-id="d1c9d-103">Le développement de flux de travail dans [!INCLUDE[netfx_current_long](../../../includes/netfx-current-long-md.md)] fait appel à des concepts que certains développeurs peuvent ne pas connaître.</span><span class="sxs-lookup"><span data-stu-id="d1c9d-103">Workflow development in the [!INCLUDE[netfx_current_long](../../../includes/netfx-current-long-md.md)] uses concepts that may be new to some developers.</span></span> <span data-ttu-id="d1c9d-104">Cette rubrique en décrit quelques-uns, ainsi que la façon dont ils sont implémentés.</span><span class="sxs-lookup"><span data-stu-id="d1c9d-104">This topic describes some of the concepts and how they are implemented.</span></span>  
  
## <a name="workflows-and-activities"></a><span data-ttu-id="d1c9d-105">Flux de travail et activités</span><span class="sxs-lookup"><span data-stu-id="d1c9d-105">Workflows and Activities</span></span>  
 <span data-ttu-id="d1c9d-106">Un flux de travail est une collection structurée d'actions qui modélise un processus.</span><span class="sxs-lookup"><span data-stu-id="d1c9d-106">A workflow is a structured collection of actions that models a process.</span></span> <span data-ttu-id="d1c9d-107">Chaque action du flux de travail est modélisée en tant qu'activité.</span><span class="sxs-lookup"><span data-stu-id="d1c9d-107">Each action in the workflow is modeled as an activity.</span></span> <span data-ttu-id="d1c9d-108">Un hôte interagit avec un flux de travail à l'aide des objets suivants : <xref:System.Activities.WorkflowInvoker> pour l'appel d'un flux de travail comme s'il s'agissait d'une méthode, <xref:System.Activities.WorkflowApplication> pour le contrôle explicite sur l'exécution d'une instance de workflow unique et <xref:System.ServiceModel.WorkflowServiceHost> pour des interactions basées sur des messages dans les scénarios à plusieurs instances.</span><span class="sxs-lookup"><span data-stu-id="d1c9d-108">A host interacts with a workflow by using <xref:System.Activities.WorkflowInvoker> for invoking a workflow as if it were a method,  <xref:System.Activities.WorkflowApplication> for explicit control over the execution of a single workflow instance, and <xref:System.ServiceModel.WorkflowServiceHost> for message-based interactions in multi-instance scenarios.</span></span> <span data-ttu-id="d1c9d-109">Comme les étapes du flux de travail sont définies comme une hiérarchie d'activités, l'activité supérieure de la hiérarchie peut être désignée pour définir le flux de travail lui-même.</span><span class="sxs-lookup"><span data-stu-id="d1c9d-109">Because steps of the workflow are defined as a hierarchy of activities, the topmost activity in the hierarchy can be said to define the workflow itself.</span></span> <span data-ttu-id="d1c9d-110">Ce modèle de hiérarchie remplace les classes `SequentialWorkflow` et `StateMachineWorkflow` explicites des versions précédentes.</span><span class="sxs-lookup"><span data-stu-id="d1c9d-110">This hierarchy model takes the place of the explicit `SequentialWorkflow` and `StateMachineWorkflow` classes from previous versions.</span></span> <span data-ttu-id="d1c9d-111">Les activités elles-mêmes peuvent être développées comme des collections d'autres activités (à l'aide de la classe <xref:System.Activities.Activity> comme base, généralement définie en XAML). Sinon, elles peuvent être créées de façon personnalisée à l'aide de la classe <xref:System.Activities.CodeActivity> qui peut utiliser le runtime d'accès aux données ou à l'aide de la classe <xref:System.Activities.NativeActivity> qui montre la portée de l'exécution du workflow à l'auteur de l'activité.</span><span class="sxs-lookup"><span data-stu-id="d1c9d-111">Activities themselves are developed as collections of other activities (using the <xref:System.Activities.Activity> class as a base, usually defined by using XAML) or are custom created by using the <xref:System.Activities.CodeActivity> class, which can use the runtime for data access, or by using the <xref:System.Activities.NativeActivity> class, which exposes the breadth of the workflow runtime to the activity author.</span></span> <span data-ttu-id="d1c9d-112">Les activités développées à l'aide des classes <xref:System.Activities.CodeActivity> et <xref:System.Activities.NativeActivity> sont créées à l'aide de langages compatibles avec le CLR comme C#.</span><span class="sxs-lookup"><span data-stu-id="d1c9d-112">Activities developed by using <xref:System.Activities.CodeActivity> and <xref:System.Activities.NativeActivity> are created by using CLR-compliant languages such as C#.</span></span>  
  
## <a name="activity-data-model"></a><span data-ttu-id="d1c9d-113">Modèle de données des activités</span><span class="sxs-lookup"><span data-stu-id="d1c9d-113">Activity Data Model</span></span>  
 <span data-ttu-id="d1c9d-114">Les activités stockent et partagent des données à l'aide des types indiqués dans le tableau suivant :</span><span class="sxs-lookup"><span data-stu-id="d1c9d-114">Activities store and share data by using the types shown in the following table.</span></span>  
  
|||  
|-|-|  
|<span data-ttu-id="d1c9d-115">Variable</span><span class="sxs-lookup"><span data-stu-id="d1c9d-115">Variable</span></span>|<span data-ttu-id="d1c9d-116">Stocke des données dans une activité.</span><span class="sxs-lookup"><span data-stu-id="d1c9d-116">Stores data in an activity.</span></span>|  
|<span data-ttu-id="d1c9d-117">Argument</span><span class="sxs-lookup"><span data-stu-id="d1c9d-117">Argument</span></span>|<span data-ttu-id="d1c9d-118">Déplace les données vers l'intérieur et l'extérieur d'une activité.</span><span class="sxs-lookup"><span data-stu-id="d1c9d-118">Moves data into and out of an activity.</span></span>|  
|<span data-ttu-id="d1c9d-119">Expression</span><span class="sxs-lookup"><span data-stu-id="d1c9d-119">Expression</span></span>|<span data-ttu-id="d1c9d-120">Activité ayant une valeur de retour élevée utilisée dans les liaisons d'arguments.</span><span class="sxs-lookup"><span data-stu-id="d1c9d-120">An activity with an elevated return value used in argument bindings.</span></span>|  
  
## <a name="workflow-runtime"></a><span data-ttu-id="d1c9d-121">Exécution du workflow</span><span class="sxs-lookup"><span data-stu-id="d1c9d-121">Workflow Runtime</span></span>  
 <span data-ttu-id="d1c9d-122">L'exécution du workflow est l'environnement dans lequel les flux de travail s'exécutent.</span><span class="sxs-lookup"><span data-stu-id="d1c9d-122">The workflow runtime is the environment in which workflows execute.</span></span> <span data-ttu-id="d1c9d-123"><xref:System.Activities.WorkflowInvoker> est la façon la plus simple d'exécuter un flux de travail.</span><span class="sxs-lookup"><span data-stu-id="d1c9d-123"><xref:System.Activities.WorkflowInvoker> is the simplest way to execute a workflow.</span></span> <span data-ttu-id="d1c9d-124">L'hôte utilise l'objet <xref:System.Activities.WorkflowInvoker> pour les actions suivantes :</span><span class="sxs-lookup"><span data-stu-id="d1c9d-124">The host uses <xref:System.Activities.WorkflowInvoker> for the following:</span></span>  
  
-   <span data-ttu-id="d1c9d-125">appeler un flux de travail de façon synchrone ;</span><span class="sxs-lookup"><span data-stu-id="d1c9d-125">To synchronously invoke a workflow.</span></span>  
  
-   <span data-ttu-id="d1c9d-126">fournir l'entrée à un flux de travail ou en extraire des sorties ;</span><span class="sxs-lookup"><span data-stu-id="d1c9d-126">To provide input to, or retrieve output from a workflow.</span></span>  
  
-   <span data-ttu-id="d1c9d-127">ajouter des extensions à utiliser par les activités.</span><span class="sxs-lookup"><span data-stu-id="d1c9d-127">To add extensions to be used by activities.</span></span>  
  
 <span data-ttu-id="d1c9d-128"><xref:System.Activities.ActivityInstance> est le proxy thread-safe que les hôtes peuvent utiliser pour interagir avec le runtime.</span><span class="sxs-lookup"><span data-stu-id="d1c9d-128"><xref:System.Activities.ActivityInstance> is the thread-safe proxy that hosts can use to interact with the runtime.</span></span> <span data-ttu-id="d1c9d-129">L'hôte utilise l'objet <xref:System.Activities.ActivityInstance> pour les actions suivantes :</span><span class="sxs-lookup"><span data-stu-id="d1c9d-129">The host uses <xref:System.Activities.ActivityInstance> for the following:</span></span>  
  
-   <span data-ttu-id="d1c9d-130">acquérir une instance en la créant ou en la chargeant à partir d'un magasin d'instances ;</span><span class="sxs-lookup"><span data-stu-id="d1c9d-130">To acquire an instance by creating it or loading it from an instance store.</span></span>  
  
-   <span data-ttu-id="d1c9d-131">être informé des événements du cycle de vie de l'instance ;</span><span class="sxs-lookup"><span data-stu-id="d1c9d-131">To be notified of instance life-cycle events.</span></span>  
  
-   <span data-ttu-id="d1c9d-132">contrôler l'exécution du workflow ;</span><span class="sxs-lookup"><span data-stu-id="d1c9d-132">To control workflow execution.</span></span>  
  
-   <span data-ttu-id="d1c9d-133">fournir l'entrée à un flux de travail ou en extraire des sorties ;</span><span class="sxs-lookup"><span data-stu-id="d1c9d-133">To provide input to, or retrieve output from a workflow.</span></span>  
  
-   <span data-ttu-id="d1c9d-134">signaler une continuation de flux de travail et passer des valeurs dans le flux de travail ;</span><span class="sxs-lookup"><span data-stu-id="d1c9d-134">To signal a workflow continuation and pass values into the workflow.</span></span>  
  
-   <span data-ttu-id="d1c9d-135">rendre persistantes les données du workflow ;</span><span class="sxs-lookup"><span data-stu-id="d1c9d-135">To persist workflow data.</span></span>  
  
-   <span data-ttu-id="d1c9d-136">ajouter des extensions à utiliser par les activités.</span><span class="sxs-lookup"><span data-stu-id="d1c9d-136">To add extensions to be used by activities.</span></span>  
  
 <span data-ttu-id="d1c9d-137">Les activités accèdent à l'environnement d'exécution du flux de travail à l'aide de la classe dérivée <xref:System.Activities.ActivityContext> appropriée, telle que <xref:System.Activities.NativeActivityContext> ou <xref:System.Activities.CodeActivityContext>.</span><span class="sxs-lookup"><span data-stu-id="d1c9d-137">Activities gain access to the workflow runtime environment by using the appropriate <xref:System.Activities.ActivityContext> derived class, such as <xref:System.Activities.NativeActivityContext> or <xref:System.Activities.CodeActivityContext>.</span></span> <span data-ttu-id="d1c9d-138">Ils utilisent celle-ci pour la résolution d'arguments et de variables, la planification d'activités enfants et de nombreuses autres fins.</span><span class="sxs-lookup"><span data-stu-id="d1c9d-138">They use this for resolving arguments and variables, for scheduling child activities, and for many other purposes.</span></span>  
  
## <a name="services"></a><span data-ttu-id="d1c9d-139">Services</span><span class="sxs-lookup"><span data-stu-id="d1c9d-139">Services</span></span>  
 <span data-ttu-id="d1c9d-140">Les flux de travail offrent une façon naturelle d'implémenter les services faiblement couplés et d'y accéder, à l'aide d'activités de messagerie.</span><span class="sxs-lookup"><span data-stu-id="d1c9d-140">Workflows provide a natural way to implement and access loosely-coupled services, using messaging activities.</span></span> <span data-ttu-id="d1c9d-141">Les activités de messagerie reposent sur [!INCLUDE[indigo2](../../../includes/indigo2-md.md)] et sont le mécanisme principal utilisé pour obtenir des données dans ou hors d'un flux de travail.</span><span class="sxs-lookup"><span data-stu-id="d1c9d-141">Messaging activities are built on [!INCLUDE[indigo2](../../../includes/indigo2-md.md)] and are the primary mechanism used to get data into and out of a workflow.</span></span> <span data-ttu-id="d1c9d-142">Vous pouvez composer des activités de messagerie ensemble pour modéliser tout type de modèle d’échange de messages que vous souhaitez.</span><span class="sxs-lookup"><span data-stu-id="d1c9d-142">You can compose messaging activities together to model any kind of message exchange pattern you wish.</span></span> <span data-ttu-id="d1c9d-143">Pour plus d’informations, consultez [d’activités de messagerie](../../../docs/framework/wcf/feature-details/messaging-activities.md).</span><span class="sxs-lookup"><span data-stu-id="d1c9d-143">For more information, see see [Messaging Activities](../../../docs/framework/wcf/feature-details/messaging-activities.md).</span></span> <span data-ttu-id="d1c9d-144">Les services de flux de travail sont hébergés à l'aide de la classe <xref:System.ServiceModel.Activities.WorkflowServiceHost>.</span><span class="sxs-lookup"><span data-stu-id="d1c9d-144">Workflow services are hosted using the <xref:System.ServiceModel.Activities.WorkflowServiceHost> class.</span></span> <span data-ttu-id="d1c9d-145">Pour plus d’informations, consultez [d’hébergement de la vue d’ensemble des Services de Workflow](../../../docs/framework/wcf/feature-details/hosting-workflow-services-overview.md).</span><span class="sxs-lookup"><span data-stu-id="d1c9d-145">For more information, see [Hosting Workflow Services Overview](../../../docs/framework/wcf/feature-details/hosting-workflow-services-overview.md).</span></span> [!INCLUDE[crabout](../../../includes/crabout-md.md)]<span data-ttu-id="d1c9d-146"> services de flux de travail voir [des Services de flux de travail](../../../docs/framework/wcf/feature-details/workflow-services.md)</span><span class="sxs-lookup"><span data-stu-id="d1c9d-146"> workflow services see [Workflow Services](../../../docs/framework/wcf/feature-details/workflow-services.md)</span></span>  
  
## <a name="persistence-unloading-and-long-running-workflows"></a><span data-ttu-id="d1c9d-147">Persistance, déchargement et workflows de longue durée</span><span class="sxs-lookup"><span data-stu-id="d1c9d-147">Persistence, Unloading, and Long-Running Workflows</span></span>  
 <span data-ttu-id="d1c9d-148">Windows Workflow simplifie la création de programmes réactifs de longue durée en fournissant les éléments suivants :</span><span class="sxs-lookup"><span data-stu-id="d1c9d-148">Windows Workflow simplifies the authoring of long-running reactive programs by providing:</span></span>  
  
-   <span data-ttu-id="d1c9d-149">activités qui accèdent à l'entrée externe ;</span><span class="sxs-lookup"><span data-stu-id="d1c9d-149">Activities that access external input.</span></span>  
  
-   <span data-ttu-id="d1c9d-150">capacité à créer des objets <xref:System.Activities.Bookmark> qui peuvent être repris par un écouteur hôte ;</span><span class="sxs-lookup"><span data-stu-id="d1c9d-150">The ability to create <xref:System.Activities.Bookmark> objects that can be resumed by a host listener.</span></span>  
  
-   <span data-ttu-id="d1c9d-151">Capacité à rendre persistantes les données d'un workflow et de décharger le flux de travail, puis de le recharger et de le réactiver en réponse à la reprise d'objets <xref:System.Activities.Bookmark> dans un flux de travail particulier.</span><span class="sxs-lookup"><span data-stu-id="d1c9d-151">The ability to persist a workflow’s data and unload the workflow, and then reload and reactivate the workflow in response to the resumption of <xref:System.Activities.Bookmark> objects in a particular workflow.</span></span>  
  
 <span data-ttu-id="d1c9d-152">Un flux de travail exécute en continu des activités jusqu'à ce qu'il n'y en ait plus à exécuter ou jusqu'à ce que toutes les activités en cours d'exécution soient en attente de réponse.</span><span class="sxs-lookup"><span data-stu-id="d1c9d-152">A workflow continuously executes activities until there are no more activities to execute or until all currently executing activities are waiting for input.</span></span> <span data-ttu-id="d1c9d-153">Dans ce dernier cas, le flux de travail est inactif.</span><span class="sxs-lookup"><span data-stu-id="d1c9d-153">In this latter state, the workflow is idle.</span></span> <span data-ttu-id="d1c9d-154">Il est fréquent qu'un hôte décharge les flux de travail qui sont devenus inactifs et les recharger pour reprendre l'exécution lorsqu'un message arrive.</span><span class="sxs-lookup"><span data-stu-id="d1c9d-154">It is common for a host to unload workflows that have gone idle and to reload them to continue execution when a message arrives.</span></span> <span data-ttu-id="d1c9d-155"><xref:System.ServiceModel.Activities.WorkflowServiceHost> fournit les fonctionnalités pour cette fonction, ainsi qu'une stratégie de déchargement extensible.</span><span class="sxs-lookup"><span data-stu-id="d1c9d-155"><xref:System.ServiceModel.Activities.WorkflowServiceHost> provides functionality for this feature and provides an extensible unload policy.</span></span> <span data-ttu-id="d1c9d-156">Pour les blocs d'exécution utilisant des données ayant un état volatile ou d'autres données qui ne peuvent pas être rendues persistantes, une activité peut indiquer à un hôte qu'il ne doit pas être rendu persistant à l'aide de l'objet <xref:System.Activities.NoPersistHandle>.</span><span class="sxs-lookup"><span data-stu-id="d1c9d-156">For blocks of execution that use volatile state data or other data that cannot be persisted, an activity can indicate to a host that it should not be persisted by using the <xref:System.Activities.NoPersistHandle>.</span></span> <span data-ttu-id="d1c9d-157">Un flux de travail peut également rendre explicitement ses données persistantes sur un support de stockage durable à l'aide de l'activité <xref:System.Activities.Statements.Persist>.</span><span class="sxs-lookup"><span data-stu-id="d1c9d-157">A workflow can also explicitly persist its data to a durable storage medium by using the <xref:System.Activities.Statements.Persist> activity.</span></span>
