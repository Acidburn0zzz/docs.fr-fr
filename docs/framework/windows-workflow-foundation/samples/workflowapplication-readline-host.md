---
title: Hôte ReadLine WorkflowApplication
ms.date: 03/30/2017
ms.assetid: f7b362be-cb42-40d7-b9ef-cfc4aed2455b
ms.openlocfilehash: 4388ff0285de58b0dc6f86af93aad84b2894373f
ms.sourcegitcommit: 2eceb05f1a5bb261291a1f6a91c5153727ac1c19
ms.translationtype: MT
ms.contentlocale: fr-FR
ms.lasthandoff: 09/04/2018
ms.locfileid: "43502933"
---
# <a name="workflowapplication-readline-host"></a><span data-ttu-id="a0ca1-102">Hôte ReadLine WorkflowApplication</span><span class="sxs-lookup"><span data-stu-id="a0ca1-102">WorkflowApplication ReadLine Host</span></span>
<span data-ttu-id="a0ca1-103">Cet exemple est un hôte ReadLine générique.</span><span class="sxs-lookup"><span data-stu-id="a0ca1-103">This sample is a generic ReadLine host.</span></span> <span data-ttu-id="a0ca1-104">Vous pouvez charger et exécuter tout workflow à l'aide de l'activité `ReadLine` incluse (ou d'autres activités semblables qui obtiennent des données à partir de signets repris avec les chaînes).</span><span class="sxs-lookup"><span data-stu-id="a0ca1-104">You can load and run any workflow using the included `ReadLine` activity (or other activities like it that get data from bookmarks resumed with strings).</span></span> <span data-ttu-id="a0ca1-105">La sortie de l'activité `WriteLine` ou de tout élément qui écrit dans l'extension <xref:System.Activities.Statements.WriteLine.TextWriter%2A> est dirigée vers la fenêtre hôte.</span><span class="sxs-lookup"><span data-stu-id="a0ca1-105">Output from the `WriteLine` activity or anything writing to the <xref:System.Activities.Statements.WriteLine.TextWriter%2A> extension is directed to the host window.</span></span> <span data-ttu-id="a0ca1-106">Lorsqu'une instance est inactive, les signets disponibles pour cette instance s'affichent dans une zone de liste déroulante.</span><span class="sxs-lookup"><span data-stu-id="a0ca1-106">When an instance is idle, the available bookmarks for that instance appear in a combo box.</span></span> <span data-ttu-id="a0ca1-107">Si vous sélectionnez un signet, entrez un texte et appuyez sur le bouton de reprise de signet, l'exécution du workflow continue.</span><span class="sxs-lookup"><span data-stu-id="a0ca1-107">Selecting a bookmark, inputting some text, and pressing the resume bookmark button continue the execution of the workflow.</span></span> <span data-ttu-id="a0ca1-108">Vous pouvez également annuler, abandonner ou arrêter un workflow sélectionné.</span><span class="sxs-lookup"><span data-stu-id="a0ca1-108">You can also cancel, abort, or terminate a selected workflow.</span></span> <span data-ttu-id="a0ca1-109">La persistance est activée par défaut ; vous pouvez fermer et rouvrir hôte, et la liste des instances est remplie avec les instances stockées dans la base de données.</span><span class="sxs-lookup"><span data-stu-id="a0ca1-109">Persistence is on by default – you can shut down the host and bring it back, and the instance list is populated with the instances stored in the database.</span></span> <span data-ttu-id="a0ca1-110">Le suivi est utilisé pour générer des événements de niveau <xref:System.Activities.WorkflowApplication> pour l'hôte avec la possibilité d'ajouter un suivi détaillé au niveau de l'activité.</span><span class="sxs-lookup"><span data-stu-id="a0ca1-110">Tracking is used to output <xref:System.Activities.WorkflowApplication>-level events to the host with the option to add detailed tracking at the activity level.</span></span>  
  
## <a name="sample-details"></a><span data-ttu-id="a0ca1-111">Détails de l'exemple</span><span class="sxs-lookup"><span data-stu-id="a0ca1-111">Sample Details</span></span>  
 <span data-ttu-id="a0ca1-112">Il existe deux couches au niveau de cet hôte : la vue et le gestionnaire d'instance.</span><span class="sxs-lookup"><span data-stu-id="a0ca1-112">There are two layers to this host: the view and the instance manager.</span></span> <span data-ttu-id="a0ca1-113">La vue se compose des classes `HostView` et `WorkflowApplicationInfo`.</span><span class="sxs-lookup"><span data-stu-id="a0ca1-113">The view consists of the `HostView` and `WorkflowApplicationInfo` classes.</span></span> <span data-ttu-id="a0ca1-114">Le modèle général pour cet hôte est que la classe `HostView` affiche les options disponibles à l'intention de l'utilisateur selon des objets `WorkflowApplicationInfo` qui restent relativement synchronisés avec les instances qu'ils représentent.</span><span class="sxs-lookup"><span data-stu-id="a0ca1-114">The general pattern for this host is for the `HostView` class to display available options to the user based on `WorkflowApplicationInfo` objects that are kept reasonably in synchronization with the instances they represent.</span></span> <span data-ttu-id="a0ca1-115">La couche du gestionnaire d'instance se compose de la classe `WorkflowApplicationManager`, qui est le noyau de toutes les communications hôtes, de la classe `WorkflowDefinitionExtension`, qui rend la relation persistante entre une instance et la définition de programme avec laquelle elle a démarré, et de quelques autres classes.</span><span class="sxs-lookup"><span data-stu-id="a0ca1-115">The instance manager layer consists of the `WorkflowApplicationManager` class, which is the core of all host communications, and the `WorkflowDefinitionExtension` class, which persists the relationship between an instance and the program definition it was started with and a few other classes.</span></span> <span data-ttu-id="a0ca1-116">Le `HostView` appelle des opérations de contrôle sur le `WorkflowApplicationManager`.</span><span class="sxs-lookup"><span data-stu-id="a0ca1-116">The `HostView` calls control operations on the `WorkflowApplicationManager`.</span></span> <span data-ttu-id="a0ca1-117">Ces appels sont en général asynchrones pour maintenir une interface utilisateur réactive.</span><span class="sxs-lookup"><span data-stu-id="a0ca1-117">These calls are typically asynchronous to maintain a responsive user interface.</span></span> <span data-ttu-id="a0ca1-118">Lorsque les appels asynchrones sont terminés, le `WorkflowApplicationManager` retourne des appels dans la couche de la vue via une interface correctement définie (`IHostView`).</span><span class="sxs-lookup"><span data-stu-id="a0ca1-118">When the asynchronous calls complete, the `WorkflowApplicationManager` makes calls back into the view layer through a well-defined interface (`IHostView`).</span></span> <span data-ttu-id="a0ca1-119">La classe `HostView` distribue le plus souvent ces appels de la classe `WorkflowApplicationManager` vers le thread d'interface utilisateur.</span><span class="sxs-lookup"><span data-stu-id="a0ca1-119">The `HostView` class most often dispatches these calls from the `WorkflowApplicationManager` class to the user interface thread.</span></span> <span data-ttu-id="a0ca1-120">L'écriture de texte s'effectue dans des objets <xref:System.Activities.Statements.WriteLine.TextWriter%2A> thread-safe fournis par la classe `HostView`.</span><span class="sxs-lookup"><span data-stu-id="a0ca1-120">Text writing is done to thread-safe <xref:System.Activities.Statements.WriteLine.TextWriter%2A> objects provided by the `HostView` class.</span></span> <span data-ttu-id="a0ca1-121">L'interface utilisateur n'est pas le seul élément qui génère des événements.</span><span class="sxs-lookup"><span data-stu-id="a0ca1-121">The user interface is not the only thing generating events.</span></span> <span data-ttu-id="a0ca1-122">Les objets <xref:System.Activities.WorkflowApplication> signalent également le `WorkflowApplicationManager` lorsqu'ils sont `Idle`, `Complete` ou `Aborted`, par exemple.</span><span class="sxs-lookup"><span data-stu-id="a0ca1-122">The <xref:System.Activities.WorkflowApplication> objects also signal the `WorkflowApplicationManager` when they go `Idle`, `Complete`, or are `Aborted`, for example.</span></span> <span data-ttu-id="a0ca1-123">La classe `WorkflowApplicationManager` envoie le thread d'événement en distribuant un travail de nettoyage ou de mise à jour à l'hôte.</span><span class="sxs-lookup"><span data-stu-id="a0ca1-123">The `WorkflowApplicationManager` class gets off the event thread by dispatching clean up or updating work to the host.</span></span>  
  
 <span data-ttu-id="a0ca1-124">L'enregistrement du fichier utilisé pour lancer un <xref:System.Activities.WorkflowApplication> est facilité par la classe `WorkflowDefinitionExtension`.</span><span class="sxs-lookup"><span data-stu-id="a0ca1-124">The recording of the file used to launch a <xref:System.Activities.WorkflowApplication> is facilitated by the `WorkflowDefinitionExtension` class.</span></span> <span data-ttu-id="a0ca1-125">Elle implémente l'interface <xref:System.Activities.Persistence.PersistenceIOParticipant> pour participer à la persistance et rendre persistant le chemin d'accès à la définition de workflow.</span><span class="sxs-lookup"><span data-stu-id="a0ca1-125">It implements the <xref:System.Activities.Persistence.PersistenceIOParticipant> interface to participate in persistence and persist the path to the workflow definition.</span></span>  
  
 <span data-ttu-id="a0ca1-126">La méthode `WorkflowApplicationManager.Load` utilise le chemin d'accès stocké pour instancier les programmes de workflow obligatoires pour le chargement d'objets <xref:System.Activities.WorkflowApplication> non terminés.</span><span class="sxs-lookup"><span data-stu-id="a0ca1-126">The `WorkflowApplicationManager.Load` method uses the stored path to instantiate the workflow programs required for loading unfinished <xref:System.Activities.WorkflowApplication> objects.</span></span>  
  
#### <a name="to-set-up-build-and-run-the-sample"></a><span data-ttu-id="a0ca1-127">Pour configurer, générer et exécuter l'exemple</span><span class="sxs-lookup"><span data-stu-id="a0ca1-127">To set up, build, and run the sample</span></span>  
  
1.  <span data-ttu-id="a0ca1-128">Cet exemple requiert l'installation de SQL Express.</span><span class="sxs-lookup"><span data-stu-id="a0ca1-128">This sample requires SQL Express to be installed.</span></span> <span data-ttu-id="a0ca1-129">SQL Express est fourni avec [!INCLUDE[vs2010](../../../../includes/vs2010-md.md)].</span><span class="sxs-lookup"><span data-stu-id="a0ca1-129">SQL Express comes with [!INCLUDE[vs2010](../../../../includes/vs2010-md.md)].</span></span>  
  
2.  <span data-ttu-id="a0ca1-130">Ouvrez une invite de commandes de Visual Studio 2010.</span><span class="sxs-lookup"><span data-stu-id="a0ca1-130">Open a Visual Studio 2010 command prompt.</span></span>  
  
3.  <span data-ttu-id="a0ca1-131">Accédez au répertoire de l'exemple (\WF\Basic\Execution\ControllingWorkflowApplications) et exécutez CreateInstanceStore.cmd.</span><span class="sxs-lookup"><span data-stu-id="a0ca1-131">Navigate to the sample directory (\WF\Basic\Execution\ControllingWorkflowApplications) and run CreateInstanceStore.cmd.</span></span>  
  
4.  <span data-ttu-id="a0ca1-132">Le script CreateInstanceStore.cmd tente de créer la base de données sur l'instance par défaut de SQL Server 2008 Express.</span><span class="sxs-lookup"><span data-stu-id="a0ca1-132">The CreateInstanceStore.cmd script attempts to create the database on the default instance of SQL Server 2008 Express.</span></span> <span data-ttu-id="a0ca1-133">Si vous voulez installer la base de données sur une instance différente, modifiez le script en conséquence.</span><span class="sxs-lookup"><span data-stu-id="a0ca1-133">If you want to install the database on a different instance, modify the script to do so.</span></span>  
  
5.  <span data-ttu-id="a0ca1-134">Compilez le projet WorkflowApplicationReadLineHost et exécutez-le à partir de la ligne de commande.</span><span class="sxs-lookup"><span data-stu-id="a0ca1-134">Compile the WorkflowApplicationReadLineHost project and run it from the command line.</span></span>  
  
6.  <span data-ttu-id="a0ca1-135">Une fois en cours d'exécution, vous pouvez activer ou désactiver la persistance.</span><span class="sxs-lookup"><span data-stu-id="a0ca1-135">Once running, you can optionally turn persistence off or on.</span></span> <span data-ttu-id="a0ca1-136">En outre, vous avez également la possibilité d'activer ou de désactiver le suivi d'activité détaillé.</span><span class="sxs-lookup"><span data-stu-id="a0ca1-136">Further, you can optionally turn detailed activity tracking on or off.</span></span>  
  
7.  <span data-ttu-id="a0ca1-137">Appuyez sur le bouton de sélection à côté du **exécuter** bouton pour rechercher un flux de travail défini dans un fichier XAML</span><span class="sxs-lookup"><span data-stu-id="a0ca1-137">Press the ellipsis button next to the **Run** button to browse for a workflow defined in a XAML file</span></span>  
  
     <span data-ttu-id="a0ca1-138">Deux exemples se trouvent sous le dossier SampleWorkflows.</span><span class="sxs-lookup"><span data-stu-id="a0ca1-138">Two samples can be found under the SampleWorkflows folder.</span></span> <span data-ttu-id="a0ca1-139">L'exemple parallel1.xaml devient inactif.</span><span class="sxs-lookup"><span data-stu-id="a0ca1-139">The parallel1.xaml example goes idle.</span></span>  
  
8.  <span data-ttu-id="a0ca1-140">Une fois un exemple est sélectionné, appuyez sur la **exécuter** bouton.</span><span class="sxs-lookup"><span data-stu-id="a0ca1-140">Once an example is selected, press the **Run** button.</span></span>  
  
9. <span data-ttu-id="a0ca1-141">Si ou lorsque le workflow devient inactif, le **signets** zone de liste déroulante est remplie avec les signets disponibles.</span><span class="sxs-lookup"><span data-stu-id="a0ca1-141">If or when the workflow goes idle, the **Bookmarks** combo box is populated with available bookmarks.</span></span>  
  
10. <span data-ttu-id="a0ca1-142">Les options sont à ce stade de reprendre un signet, d'annuler, d'abandonner ou de terminer le workflow.</span><span class="sxs-lookup"><span data-stu-id="a0ca1-142">The options at this point are to resume a bookmark, cancel, abort, or terminate the workflow.</span></span> <span data-ttu-id="a0ca1-143">Vous pouvez également fermer l'hôte et le redémarrer.</span><span class="sxs-lookup"><span data-stu-id="a0ca1-143">You can also shut down the host and restart it.</span></span> <span data-ttu-id="a0ca1-144">Si la persistance reste activée, les instances sont déchargées lors de l'arrêt et rechargées lors du démarrage.</span><span class="sxs-lookup"><span data-stu-id="a0ca1-144">If persistence is left on, the instances are unloaded on shutdown and reloaded on start up.</span></span>  
  
     <span data-ttu-id="a0ca1-145">Pour reprendre un signet, sélectionnez le signet voulu, tapez une valeur dans la zone de texte en regard de la zone de liste déroulante et appuyez sur **reprendre le signet**.</span><span class="sxs-lookup"><span data-stu-id="a0ca1-145">To resume a bookmark, select the desired bookmark, type in a value in the text box next to the combo box and press **Resume Bookmark**.</span></span>  
  
#### <a name="to-remove-the-instance-store-database"></a><span data-ttu-id="a0ca1-146">Pour supprimer la base de données du magasin d'instances</span><span class="sxs-lookup"><span data-stu-id="a0ca1-146">To remove the instance store database</span></span>  
  
1.  <span data-ttu-id="a0ca1-147">Ouvrez une invite de commandes de Visual Studio 2010.</span><span class="sxs-lookup"><span data-stu-id="a0ca1-147">Open a Visual Studio 2010 command prompt.</span></span>  
  
2.  <span data-ttu-id="a0ca1-148">Accédez au répertoire de l'exemple (\WF\Basic\Execution\ControllingWorkflowApplications) et exécutez RemoveInstanceStore.cmd.</span><span class="sxs-lookup"><span data-stu-id="a0ca1-148">Navigate to the sample directory (\WF\Basic\Execution\ControllingWorkflowApplications) and run RemoveInstanceStore.cmd.</span></span>  
  
> [!IMPORTANT]
>  <span data-ttu-id="a0ca1-149">Les exemples peuvent déjà être installés sur votre ordinateur.</span><span class="sxs-lookup"><span data-stu-id="a0ca1-149">The samples may already be installed on your machine.</span></span> <span data-ttu-id="a0ca1-150">Recherchez le répertoire (par défaut) suivant avant de continuer.</span><span class="sxs-lookup"><span data-stu-id="a0ca1-150">Check for the following (default) directory before continuing.</span></span>  
>   
>  `<InstallDrive>:\WF_WCF_Samples`  
>   
>  <span data-ttu-id="a0ca1-151">Si ce répertoire n’existe pas, accédez à [Windows Communication Foundation (WCF) et des exemples de Windows Workflow Foundation (WF) pour .NET Framework 4](https://go.microsoft.com/fwlink/?LinkId=150780) pour télécharger tous les Windows Communication Foundation (WCF) et [!INCLUDE[wf1](../../../../includes/wf1-md.md)] exemples.</span><span class="sxs-lookup"><span data-stu-id="a0ca1-151">If this directory does not exist, go to [Windows Communication Foundation (WCF) and Windows Workflow Foundation (WF) Samples for .NET Framework 4](https://go.microsoft.com/fwlink/?LinkId=150780) to download all Windows Communication Foundation (WCF) and [!INCLUDE[wf1](../../../../includes/wf1-md.md)] samples.</span></span> <span data-ttu-id="a0ca1-152">Cet exemple se trouve dans le répertoire suivant.</span><span class="sxs-lookup"><span data-stu-id="a0ca1-152">This sample is located in the following directory.</span></span>  
>   
>  `<InstallDrive>:\WF_WCF_Samples\WF\Basic\Execution\ControllingWorkflowApplications`