---
title: OperationScope
ms.date: 03/30/2017
ms.assetid: 56206a21-1e63-422d-b92a-e5d8b713e707
ms.openlocfilehash: 562fd9c8ff964cb997012d49600bce73d4441465
ms.sourcegitcommit: 64f4baed249341e5bf64d1385bf48e3f2e1a0211
ms.translationtype: MT
ms.contentlocale: fr-FR
ms.lasthandoff: 09/07/2018
ms.locfileid: "44075629"
---
# <a name="operationscope"></a><span data-ttu-id="565d8-102">OperationScope</span><span class="sxs-lookup"><span data-stu-id="565d8-102">OperationScope</span></span>
<span data-ttu-id="565d8-103">Cet exemple montre comment les activités de messagerie, <xref:System.ServiceModel.Activities.Receive> et <xref:System.ServiceModel.Activities.SendReply>, peuvent être utilisées pour exposer une activité personnalisée existante en tant qu'opération dans un service de workflow.</span><span class="sxs-lookup"><span data-stu-id="565d8-103">This sample demonstrates how the messaging activities, <xref:System.ServiceModel.Activities.Receive> and <xref:System.ServiceModel.Activities.SendReply> can be used to expose an existing custom activity as an operation in a workflow service.</span></span> <span data-ttu-id="565d8-104">Cet exemple inclut une nouvelle activité personnalisée appelée `OperationScope`.</span><span class="sxs-lookup"><span data-stu-id="565d8-104">This sample includes a new custom activity called an `OperationScope`.</span></span> <span data-ttu-id="565d8-105">Elle est destinée à faciliter le développement d'un service de workflow en permettant aux utilisateurs de créer le corps de leurs opérations séparément en tant qu'activités personnalisées et de les exposer facilement en tant qu'opérations de service à l'aide de l'activité `OperationScope`.</span><span class="sxs-lookup"><span data-stu-id="565d8-105">It is intended to ease the development of a workflow service by allowing users to author the body of their operations separately as custom activities and then easily exposing them as service operations using the `OperationScope` activity.</span></span> <span data-ttu-id="565d8-106">Par exemple, une activité `Add` personnalisée que prend deux arguments `in` et qui retourne un argument `out` pourrait être exposée en tant qu'opération `Add` sur le service de workflow en le déposant dans un `OperationScope`.</span><span class="sxs-lookup"><span data-stu-id="565d8-106">For example, a custom `Add` activity that takes two `in` arguments and returns one `out` argument could be exposed as an `Add` operation on the workflow service by dropping it into an `OperationScope`.</span></span>  
  
 <span data-ttu-id="565d8-107">L'étendue fonctionne en inspectant l'activité fournie comme étant son corps.</span><span class="sxs-lookup"><span data-stu-id="565d8-107">The scope works by inspecting the activity provided as its body.</span></span> <span data-ttu-id="565d8-108">Tous les arguments `in` non liés sont supposés être des entrées du message entrant.</span><span class="sxs-lookup"><span data-stu-id="565d8-108">Any unbound `in` arguments are assumed to be inputs from the incoming message.</span></span> <span data-ttu-id="565d8-109">Tous les arguments `out`, qu'ils soient liés ou non, sont supposés être des sorties dans le message de réponse suivant.</span><span class="sxs-lookup"><span data-stu-id="565d8-109">All `out` arguments, regardless of whether they are bound, are assumed to be outputs in the subsequent reply message.</span></span> <span data-ttu-id="565d8-110">Le nom de l'opération exposée provient du nom complet de l'activité `OperationScope`.</span><span class="sxs-lookup"><span data-stu-id="565d8-110">The exposed operation’s name is taken from the display name of the `OperationScope` activity.</span></span> <span data-ttu-id="565d8-111">Le résultat final est que l'activité de corps est incluse dans un wrapper dans un <xref:System.ServiceModel.Activities.Receive> et un <xref:System.ServiceModel.Activities.SendReply> avec les paramètres provenant des messages liés aux arguments de l'activité.</span><span class="sxs-lookup"><span data-stu-id="565d8-111">The end result is that the body activity is wrapped in a <xref:System.ServiceModel.Activities.Receive> and <xref:System.ServiceModel.Activities.SendReply> with the parameters from the messages bound to the arguments of the activity.</span></span>  
  
 <span data-ttu-id="565d8-112">Cet exemple expose un service de workflow à l'aide de points de terminaison HTTP.</span><span class="sxs-lookup"><span data-stu-id="565d8-112">This sample exposes a workflow service using HTTP endpoints.</span></span> <span data-ttu-id="565d8-113">Pour s'exécuter, des listes de contrôle d'accès (ACL) d'URL appropriées doivent être ajoutées.</span><span class="sxs-lookup"><span data-stu-id="565d8-113">To run, proper URL ACLs must be added.</span></span> <span data-ttu-id="565d8-114">Pour plus d’informations, consultez [configuration de HTTP et HTTPS](https://go.microsoft.com/fwlink/?LinkId=70353).</span><span class="sxs-lookup"><span data-stu-id="565d8-114">For more information, see [Configuring HTTP and HTTPS](https://go.microsoft.com/fwlink/?LinkId=70353).</span></span> <span data-ttu-id="565d8-115">L’exécution de la commande suivante à une invite de commandes avec élévation de privilèges ajoute les ACL appropriées (Vérifiez que votre domaine et le nom d’utilisateur sont substitués pour le domaine %\\%username%).</span><span class="sxs-lookup"><span data-stu-id="565d8-115">Executing the following command at an elevated prompt adds the appropriate ACLs (ensure that your Domain and Username are substituted for %DOMAIN%\\%UserName%).</span></span>  
  
 <span data-ttu-id="565d8-116">**netsh http ajouter urlacl url =http://+:8000/ utilisateur = domaine %\\%UserName%**</span><span class="sxs-lookup"><span data-stu-id="565d8-116">**netsh http add urlacl url=http://+:8000/ user=%DOMAIN%\\%UserName%**</span></span>  
  
### <a name="to-run-the-sample"></a><span data-ttu-id="565d8-117">Pour exécuter l'exemple</span><span class="sxs-lookup"><span data-stu-id="565d8-117">To run the sample</span></span>  
  
1.  <span data-ttu-id="565d8-118">Ouvrez la solution OperationScope.sln dans [!INCLUDE[vs2010](../../../../includes/vs2010-md.md)].</span><span class="sxs-lookup"><span data-stu-id="565d8-118">Open the OperationScope.sln solution in [!INCLUDE[vs2010](../../../../includes/vs2010-md.md)].</span></span>  
  
2.  <span data-ttu-id="565d8-119">Définir plusieurs projets de démarrage en double-cliquant sur la solution dans l’Explorateur de solutions et en sélectionnant **définir les projets de démarrage**.</span><span class="sxs-lookup"><span data-stu-id="565d8-119">Set multiple start-up projects by right-clicking the solution in Solution Explorer and selecting **Set Startup Projects**.</span></span> <span data-ttu-id="565d8-120">Ajoutez Scénario et Scenario_Client (dans cet ordre) en tant que plusieurs projets de démarrage.</span><span class="sxs-lookup"><span data-stu-id="565d8-120">Add Scenario and Scenario_Client (in that order) as multiple start-up projects.</span></span>  
  
3.  <span data-ttu-id="565d8-121">Appuyez sur Ctrl+Maj+B pour générer la solution.</span><span class="sxs-lookup"><span data-stu-id="565d8-121">Press CTRL+SHIFT+B to build the solution.</span></span>  
  
    > [!WARNING]
    >  <span data-ttu-id="565d8-122">Cette étape est requise pour consulter le workflow BankService.xaml en raison de l'activité personnalisée `OperationScope`.</span><span class="sxs-lookup"><span data-stu-id="565d8-122">This step is required to view the BankService.xaml workflow due to the custom activity `OperationScope`.</span></span>  
  
4.  <span data-ttu-id="565d8-123">Appuyez sur CTRL+F5 pour exécuter l'application.</span><span class="sxs-lookup"><span data-stu-id="565d8-123">Press CTRL+F5 to run the application.</span></span> <span data-ttu-id="565d8-124">La console Scenario_Client vous demande des entrées, et la sortie correspondante s'affiche sur la console Scenario.</span><span class="sxs-lookup"><span data-stu-id="565d8-124">The Scenario_Client console prompts you for inputs and the corresponding output is seen in the Scenario console.</span></span>  
  
> [!IMPORTANT]
>  <span data-ttu-id="565d8-125">Les exemples peuvent déjà être installés sur votre ordinateur.</span><span class="sxs-lookup"><span data-stu-id="565d8-125">The samples may already be installed on your machine.</span></span> <span data-ttu-id="565d8-126">Recherchez le répertoire (par défaut) suivant avant de continuer.</span><span class="sxs-lookup"><span data-stu-id="565d8-126">Check for the following (default) directory before continuing.</span></span>  
>   
>  `<InstallDrive>:\WF_WCF_Samples`  
>   
>  <span data-ttu-id="565d8-127">Si ce répertoire n’existe pas, accédez à [Windows Communication Foundation (WCF) et des exemples de Windows Workflow Foundation (WF) pour .NET Framework 4](https://go.microsoft.com/fwlink/?LinkId=150780) pour télécharger tous les Windows Communication Foundation (WCF) et [!INCLUDE[wf1](../../../../includes/wf1-md.md)] exemples.</span><span class="sxs-lookup"><span data-stu-id="565d8-127">If this directory does not exist, go to [Windows Communication Foundation (WCF) and Windows Workflow Foundation (WF) Samples for .NET Framework 4](https://go.microsoft.com/fwlink/?LinkId=150780) to download all Windows Communication Foundation (WCF) and [!INCLUDE[wf1](../../../../includes/wf1-md.md)] samples.</span></span> <span data-ttu-id="565d8-128">Cet exemple se trouve dans le répertoire suivant.</span><span class="sxs-lookup"><span data-stu-id="565d8-128">This sample is located in the following directory.</span></span>  
>   
>  `<InstallDrive>:\WF_WCF_Samples\WF\Scenario\Services\OperationScope`