---
title: Marshaling de chaînes
ms.date: 03/30/2017
helpviewer_keywords:
- marshaling, samples
- platform invoke, marshaling data
- data marshaling, strings
- data marshaling, samples
- data marshaling, platform invoke
- marshaling. strings
- marshaling, platform invoke
- sample applications [.NET Framework], marshaling strings
ms.assetid: e21b078b-70fb-4905-be26-c097ab2433ff
author: rpetrusha
ms.author: ronpet
ms.openlocfilehash: 52a78e0c3969e879bf2fd1b1f5c41b2caac2ba11
ms.sourcegitcommit: 3d5d33f384eeba41b2dff79d096f47ccc8d8f03d
ms.translationtype: HT
ms.contentlocale: fr-FR
ms.lasthandoff: 05/04/2018
ms.locfileid: "33391119"
---
# <a name="marshaling-strings"></a><span data-ttu-id="9910a-102">Marshaling de chaînes</span><span class="sxs-lookup"><span data-stu-id="9910a-102">Marshaling Strings</span></span>
<span data-ttu-id="9910a-103">L’appel de code non managé copie les paramètres de chaîne, en les convertissant si nécessaire du format .NET Framework (Unicode) au format non managé (ANSI).</span><span class="sxs-lookup"><span data-stu-id="9910a-103">Platform invoke copies string parameters, converting them from the .NET Framework format (Unicode) to the unmanaged format (ANSI), if needed.</span></span> <span data-ttu-id="9910a-104">Étant donné que les chaînes managées sont immuables, l’appel de code non managé ne les recopie pas de la mémoire non managée vers la mémoire managée au retour de la fonction.</span><span class="sxs-lookup"><span data-stu-id="9910a-104">Because managed strings are immutable, platform invoke does not copy them back from unmanaged memory to managed memory when the function returns.</span></span>  
  
 <span data-ttu-id="9910a-105">Le tableau suivant répertorie les options de marshaling pour les chaînes. Il décrit leur utilisation et fournit un lien vers l’exemple .NET Framework correspondant.</span><span class="sxs-lookup"><span data-stu-id="9910a-105">The following table lists marshaling options for strings, describes their usage, and provides a link to the corresponding .NET Framework sample.</span></span>  
  
|<span data-ttu-id="9910a-106">Chaîne</span><span class="sxs-lookup"><span data-stu-id="9910a-106">String</span></span>|<span data-ttu-id="9910a-107">Description</span><span class="sxs-lookup"><span data-stu-id="9910a-107">Description</span></span>|<span data-ttu-id="9910a-108">Exemple</span><span class="sxs-lookup"><span data-stu-id="9910a-108">Sample</span></span>|  
|------------|-----------------|------------|  
|<span data-ttu-id="9910a-109">Par valeur.</span><span class="sxs-lookup"><span data-stu-id="9910a-109">By value.</span></span>|<span data-ttu-id="9910a-110">Passe les structures en tant que paramètres entrants.</span><span class="sxs-lookup"><span data-stu-id="9910a-110">Passes strings as In parameters.</span></span>|[<span data-ttu-id="9910a-111">MsgBox</span><span class="sxs-lookup"><span data-stu-id="9910a-111">MsgBox</span></span>](msgbox-sample.md)|  
|<span data-ttu-id="9910a-112">Comme résultat.</span><span class="sxs-lookup"><span data-stu-id="9910a-112">As result.</span></span>|<span data-ttu-id="9910a-113">Retourne les chaînes à partir du code non managé.</span><span class="sxs-lookup"><span data-stu-id="9910a-113">Returns strings from unmanaged code.</span></span>|<span data-ttu-id="9910a-114">[Chaînes](https://msdn.microsoft.com/library/be9e82a3-dc95-4aaa-9396-61b66e467e02(v=vs.100))</span><span class="sxs-lookup"><span data-stu-id="9910a-114">[Strings](https://msdn.microsoft.com/library/be9e82a3-dc95-4aaa-9396-61b66e467e02(v=vs.100))</span></span>|  
|<span data-ttu-id="9910a-115">Par référence.</span><span class="sxs-lookup"><span data-stu-id="9910a-115">By reference.</span></span>|<span data-ttu-id="9910a-116">Passe des chaînes en tant que paramètres entrants/sortants avec <xref:System.Text.StringBuilder>.</span><span class="sxs-lookup"><span data-stu-id="9910a-116">Passes strings as In/Out parameters using <xref:System.Text.StringBuilder>.</span></span>|<span data-ttu-id="9910a-117">[Mémoires tampons](https://msdn.microsoft.com/library/e30d36e8-d7c4-4936-916a-8fdbe4d9ffd5(v=vs.100))</span><span class="sxs-lookup"><span data-stu-id="9910a-117">[Buffers](https://msdn.microsoft.com/library/e30d36e8-d7c4-4936-916a-8fdbe4d9ffd5(v=vs.100))</span></span>|  
|<span data-ttu-id="9910a-118">Dans une structure par valeur.</span><span class="sxs-lookup"><span data-stu-id="9910a-118">In a structure by value.</span></span>|<span data-ttu-id="9910a-119">Passe des chaînes dans une structure qui est un paramètre entrant.</span><span class="sxs-lookup"><span data-stu-id="9910a-119">Passes strings in a structure that is an In parameter.</span></span>|<span data-ttu-id="9910a-120">[Structs](https://msdn.microsoft.com/library/96a62265-dcf9-4608-bc0a-1f762ab9f48e(v=vs.100))</span><span class="sxs-lookup"><span data-stu-id="9910a-120">[Structs](https://msdn.microsoft.com/library/96a62265-dcf9-4608-bc0a-1f762ab9f48e(v=vs.100))</span></span>|  
|<span data-ttu-id="9910a-121">Dans une structure par référence **(char\*)**.</span><span class="sxs-lookup"><span data-stu-id="9910a-121">In a structure by reference **(char\*)**.</span></span>|<span data-ttu-id="9910a-122">Passe des chaînes dans une structure qui est un paramètre entrant/sortant.</span><span class="sxs-lookup"><span data-stu-id="9910a-122">Passes strings in a structure that is an In/Out parameter.</span></span> <span data-ttu-id="9910a-123">La fonction non managée attend un pointeur vers une mémoire tampon de caractères ; la taille de la mémoire tampon est un membre de la structure.</span><span class="sxs-lookup"><span data-stu-id="9910a-123">The unmanaged function expects a pointer to a character buffer and the buffer size is a member of the structure.</span></span>|<span data-ttu-id="9910a-124">[Chaînes](https://msdn.microsoft.com/library/be9e82a3-dc95-4aaa-9396-61b66e467e02(v=vs.100))</span><span class="sxs-lookup"><span data-stu-id="9910a-124">[Strings](https://msdn.microsoft.com/library/be9e82a3-dc95-4aaa-9396-61b66e467e02(v=vs.100))</span></span>|  
|<span data-ttu-id="9910a-125">Dans une structure par référence **(char[])**.</span><span class="sxs-lookup"><span data-stu-id="9910a-125">In a structure by reference **(char[])**.</span></span>|<span data-ttu-id="9910a-126">Passe des chaînes dans une structure qui est un paramètre entrant/sortant.</span><span class="sxs-lookup"><span data-stu-id="9910a-126">Passes strings in a structure that is an In/Out parameter.</span></span> <span data-ttu-id="9910a-127">La fonction non managée attend une mémoire tampon de caractères incorporée.</span><span class="sxs-lookup"><span data-stu-id="9910a-127">The unmanaged function expects an embedded character buffer.</span></span>|<span data-ttu-id="9910a-128">[OSInfo](https://msdn.microsoft.com/library/69d89067-507b-41fe-859d-30bf3ff29455(v=vs.100))</span><span class="sxs-lookup"><span data-stu-id="9910a-128">[OSInfo](https://msdn.microsoft.com/library/69d89067-507b-41fe-859d-30bf3ff29455(v=vs.100))</span></span>|  
|<span data-ttu-id="9910a-129">Dans une classe par valeur **(char\*)**.</span><span class="sxs-lookup"><span data-stu-id="9910a-129">In a class by value **(char\*)**.</span></span>|<span data-ttu-id="9910a-130">Passe des chaînes dans une classe (une classe est un paramètre entrant/sortant).</span><span class="sxs-lookup"><span data-stu-id="9910a-130">Passes strings in a class (a class is an In/Out parameter).</span></span> <span data-ttu-id="9910a-131">La fonction non managée attend un pointeur vers une mémoire tampon de caractères.</span><span class="sxs-lookup"><span data-stu-id="9910a-131">The unmanaged function expects a pointer to a character buffer.</span></span>|<span data-ttu-id="9910a-132">[OpenFileDlg](https://msdn.microsoft.com/library/b7dea792-cb92-4baf-ac7b-6a24803e6c75(v=vs.100))</span><span class="sxs-lookup"><span data-stu-id="9910a-132">[OpenFileDlg](https://msdn.microsoft.com/library/b7dea792-cb92-4baf-ac7b-6a24803e6c75(v=vs.100))</span></span>|  
|<span data-ttu-id="9910a-133">Dans une classe par valeur **(char[])**.</span><span class="sxs-lookup"><span data-stu-id="9910a-133">In a class by value **(char[])**.</span></span>|<span data-ttu-id="9910a-134">Passe des chaînes dans une classe (une classe est un paramètre entrant/sortant).</span><span class="sxs-lookup"><span data-stu-id="9910a-134">Passes strings in a class (a class is an In/Out parameter).</span></span> <span data-ttu-id="9910a-135">La fonction non managée attend une mémoire tampon de caractères incorporée.</span><span class="sxs-lookup"><span data-stu-id="9910a-135">The unmanaged function expects an embedded character buffer.</span></span>|<span data-ttu-id="9910a-136">[OSInfo](https://msdn.microsoft.com/library/69d89067-507b-41fe-859d-30bf3ff29455(v=vs.100))</span><span class="sxs-lookup"><span data-stu-id="9910a-136">[OSInfo](https://msdn.microsoft.com/library/69d89067-507b-41fe-859d-30bf3ff29455(v=vs.100))</span></span>|  
|<span data-ttu-id="9910a-137">Comme tableau de chaînes par valeur.</span><span class="sxs-lookup"><span data-stu-id="9910a-137">As an array of strings by value.</span></span>|<span data-ttu-id="9910a-138">Crée un tableau de chaînes qui est passé par valeur.</span><span class="sxs-lookup"><span data-stu-id="9910a-138">Creates an array of strings that is passed by value.</span></span>|[<span data-ttu-id="9910a-139">Tableaux</span><span class="sxs-lookup"><span data-stu-id="9910a-139">Arrays</span></span>](marshaling-different-types-of-arrays.md)|  
|<span data-ttu-id="9910a-140">Comme un tableau de structures qui contiennent des chaînes par valeur.</span><span class="sxs-lookup"><span data-stu-id="9910a-140">As an array of structures that contain strings by value.</span></span>|<span data-ttu-id="9910a-141">Crée un tableau de structures qui contiennent des chaînes ; le tableau est passé par valeur.</span><span class="sxs-lookup"><span data-stu-id="9910a-141">Creates an array of structures that contain strings and the array is passed by value.</span></span>|[<span data-ttu-id="9910a-142">Tableaux</span><span class="sxs-lookup"><span data-stu-id="9910a-142">Arrays</span></span>](marshaling-different-types-of-arrays.md)|  
  
## <a name="see-also"></a><span data-ttu-id="9910a-143">Voir aussi</span><span class="sxs-lookup"><span data-stu-id="9910a-143">See Also</span></span>  
 [<span data-ttu-id="9910a-144">Marshaling de données à l’aide de l’appel de code managé</span><span class="sxs-lookup"><span data-stu-id="9910a-144">Marshaling Data with Platform Invoke</span></span>](marshaling-data-with-platform-invoke.md)  
 <span data-ttu-id="9910a-145">[Types de données d’appel de plateforme](https://msdn.microsoft.com/library/16014d9f-d6bd-481e-83f0-df11377c550f(v=vs.100))</span><span class="sxs-lookup"><span data-stu-id="9910a-145">[Platform Invoke Data Types](https://msdn.microsoft.com/library/16014d9f-d6bd-481e-83f0-df11377c550f(v=vs.100))</span></span>  
 [<span data-ttu-id="9910a-146">Marshaling de classes, de structures, et d’unions</span><span class="sxs-lookup"><span data-stu-id="9910a-146">Marshaling Classes, Structures, and Unions</span></span>](marshaling-classes-structures-and-unions.md)  
 <span data-ttu-id="9910a-147">[Marshaling des tableaux de types](https://msdn.microsoft.com/library/049b1c1b-228f-4445-88ec-91bc7fd4b1e8(v=vs.100))</span><span class="sxs-lookup"><span data-stu-id="9910a-147">[Marshaling Arrays of Types](https://msdn.microsoft.com/library/049b1c1b-228f-4445-88ec-91bc7fd4b1e8(v=vs.100))</span></span>  
 <span data-ttu-id="9910a-148">[Exemples divers de marshaling](https://msdn.microsoft.com/library/a915c948-54e9-4d0f-a525-95a77fd8ed70(v=vs.100))</span><span class="sxs-lookup"><span data-stu-id="9910a-148">[Miscellaneous Marshaling Samples](https://msdn.microsoft.com/library/a915c948-54e9-4d0f-a525-95a77fd8ed70(v=vs.100))</span></span>
