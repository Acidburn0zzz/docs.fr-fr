---
title: Vue d'ensemble des manipulations et de l'inertie
ms.date: 03/30/2017
ms.assetid: dd31b89b-eab6-45a1-8d0b-11e0eb84b234
ms.openlocfilehash: 41c22dc305f8ef653705436544ab2342e55ed02a
ms.sourcegitcommit: efff8f331fd9467f093f8ab8d23a203d6ecb5b60
ms.translationtype: HT
ms.contentlocale: fr-FR
ms.lasthandoff: 09/01/2018
ms.locfileid: "43401223"
---
# <a name="manipulations-and-inertia-overview"></a><span data-ttu-id="4e41d-102">Vue d'ensemble des manipulations et de l'inertie</span><span class="sxs-lookup"><span data-stu-id="4e41d-102">Manipulations and Inertia Overview</span></span>
<span data-ttu-id="4e41d-103">Les *manipulations* permettent aux utilisateurs de déplacer, de faire pivoter et de redimensionner des éléments de l’interface utilisateur à l’aide de *manipulateurs*.</span><span class="sxs-lookup"><span data-stu-id="4e41d-103">*Manipulations* enable users to move, rotate, and resize user interface (UI) elements by using *manipulators*.</span></span> <span data-ttu-id="4e41d-104">Un manipulateur représente une souris ou, dans le cas d'un écran tactile, un stylet ou un doigt.</span><span class="sxs-lookup"><span data-stu-id="4e41d-104">A manipulator represents a mouse or (in a touch-enabled scenario) a stylus or a finger.</span></span>  
  
 <span data-ttu-id="4e41d-105">L’*inertie* émule un comportement réel pour les éléments d’interface utilisateur qui sont en mouvement en simulant des forces de friction sur les éléments.</span><span class="sxs-lookup"><span data-stu-id="4e41d-105">*Inertia* emulates real-world behavior for UI elements that are in motion by simulating friction forces on the elements.</span></span> <span data-ttu-id="4e41d-106">Cela permet aux éléments de ralentir progressivement leurs déplacements (linéaires et angulaires) avant de s'arrêter.</span><span class="sxs-lookup"><span data-stu-id="4e41d-106">This enables elements to gradually slow their movement (both linear and angular) before coming to a stop.</span></span> <span data-ttu-id="4e41d-107">Cet article fournit une introduction aux manipulations et à l'inertie pour le .NET Framework.</span><span class="sxs-lookup"><span data-stu-id="4e41d-107">This article provides an introduction to manipulations and inertia for the .NET Framework.</span></span>  
  
## <a name="manipulations"></a><span data-ttu-id="4e41d-108">Manipulations</span><span class="sxs-lookup"><span data-stu-id="4e41d-108">Manipulations</span></span>  
 <span data-ttu-id="4e41d-109">Une manipulation traite une collection de manipulateurs en tant qu'objet composite.</span><span class="sxs-lookup"><span data-stu-id="4e41d-109">A manipulation treats a collection of manipulators as a composite object.</span></span> <span data-ttu-id="4e41d-110">Une application peut suivre les modifications apportées à l'objet composite au lieu des composants individuels.</span><span class="sxs-lookup"><span data-stu-id="4e41d-110">An application can track the changes to the composite object instead of the individual components.</span></span>  
  
 <span data-ttu-id="4e41d-111">Examinez l'image de l'illustration suivante.</span><span class="sxs-lookup"><span data-stu-id="4e41d-111">Consider the image in the following illustration.</span></span> <span data-ttu-id="4e41d-112">Un utilisateur peut utiliser deux manipulateurs pour déplacer, faire pivoter et mettre à l'échelle l'image.</span><span class="sxs-lookup"><span data-stu-id="4e41d-112">A user can use two manipulators to move, rotate, and scale the image.</span></span> <span data-ttu-id="4e41d-113">Les modifications apportées à chaque manipulateur sont interprétées avec les autres manipulateurs.</span><span class="sxs-lookup"><span data-stu-id="4e41d-113">The changes to each manipulator are interpreted together with the other manipulators.</span></span>  
  
 <span data-ttu-id="4e41d-114">Par exemple, si vous avez deux manipulateurs (1 et 2) sur l'image et que vous déplacez le manipulateur 1 dans une direction +Y (vers le bas), l'image sera modifiée en fonction de ce qui arrive au manipulateur 2.</span><span class="sxs-lookup"><span data-stu-id="4e41d-114">For example, if you have two manipulators (1 and 2) on the image, and you move manipulator 1 in a +Y direction (down), the change to the image depends on what happens to manipulator 2.</span></span> <span data-ttu-id="4e41d-115">Si le manipulateur 2 se déplace également dans la direction +Y (vers le bas), l'image se déplacera simplement dans cette direction.</span><span class="sxs-lookup"><span data-stu-id="4e41d-115">If manipulator 2 also moves in the +Y direction (down), the image simply moves in the +Y direction.</span></span> <span data-ttu-id="4e41d-116">Mais si le manipulateur 2 ne change pas ou qu'il se déplace dans une direction -Y (vers le haut), l'image sera rétrécie ou pivotée.</span><span class="sxs-lookup"><span data-stu-id="4e41d-116">But if manipulator 2 does not change, or it moves in a -Y direction (up), the image is made smaller or rotated.</span></span>  
  
 <span data-ttu-id="4e41d-117">![Photo virtuelle que deux doigts manipulent.](../../../docs/framework/common-client-technologies/media/manipulation-resize.png "Manipulation_Resize")</span><span class="sxs-lookup"><span data-stu-id="4e41d-117">![A virtual photo that two fingers are manipulating.](../../../docs/framework/common-client-technologies/media/manipulation-resize.png "Manipulation_Resize")</span></span>  
  
 <span data-ttu-id="4e41d-118">Image manipulée par deux manipulateurs</span><span class="sxs-lookup"><span data-stu-id="4e41d-118">An image being manipulated by two manipulators</span></span>  
  
 <span data-ttu-id="4e41d-119">La manipulation fournit un framework qui surveille une partie des manipulateurs et les interprète comme s'ils agissaient ensemble, et non indépendamment.</span><span class="sxs-lookup"><span data-stu-id="4e41d-119">Manipulation processing provides a framework that monitors a subset of manipulators and interprets them as if they are acting together, instead of independently.</span></span> <span data-ttu-id="4e41d-120">Vous pouvez créer plusieurs objets de processeur de manipulation simultanément (un pour chaque élément de l'interface utilisateur devant être manipulé dans une application).</span><span class="sxs-lookup"><span data-stu-id="4e41d-120">You can create several manipulation processor objects simultaneously, one for each UI element to be manipulated in an application.</span></span> <span data-ttu-id="4e41d-121">Un processeur de manipulation reçoit des informations lui indiquant les périphériques d’entrée à observer et signale les manipulations via des [événements .NET](https://msdn.microsoft.com/library/17sde2xt.aspx).</span><span class="sxs-lookup"><span data-stu-id="4e41d-121">A manipulation processor is informed of which input devices to observe and it reports manipulations through [.NET events](https://msdn.microsoft.com/library/17sde2xt.aspx).</span></span>  
  
 <span data-ttu-id="4e41d-122">Un processeur de manipulation ne reçoit aucune information sur l'élément particulier qui est manipulé.</span><span class="sxs-lookup"><span data-stu-id="4e41d-122">A manipulation processor does not have information about the particular element that is being manipulated.</span></span> <span data-ttu-id="4e41d-123">Une application applique séparément les modifications apportées à un élément spécifique de l'application.</span><span class="sxs-lookup"><span data-stu-id="4e41d-123">An application separately applies the changes to an application-specific element.</span></span> <span data-ttu-id="4e41d-124">Par exemple, une application applique des transformations effectuées sur une image ou la redessine pour l'afficher à son nouvel emplacement ou dans sa nouvelle taille ou orientation.</span><span class="sxs-lookup"><span data-stu-id="4e41d-124">For example, an application applies transformations to an image or redraws it to display it at its new location or with a new size or orientation.</span></span>  
  
 <span data-ttu-id="4e41d-125">Les manipulations sont conçues pour des [transformations affines](/windows/desktop/gdiplus/-gdiplus-transformations-use) en deux dimensions (2D).</span><span class="sxs-lookup"><span data-stu-id="4e41d-125">Manipulations are designed for two-dimensional (2-D) [affine transformations](/windows/desktop/gdiplus/-gdiplus-transformations-use).</span></span> <span data-ttu-id="4e41d-126">Ces transformations incluent des translations, des rotations et des mises à l'échelle.</span><span class="sxs-lookup"><span data-stu-id="4e41d-126">These transformations include translate, rotate, and scale.</span></span>  
  
### <a name="parts-of-a-manipulation"></a><span data-ttu-id="4e41d-127">Parties d'une manipulation</span><span class="sxs-lookup"><span data-stu-id="4e41d-127">Parts of a Manipulation</span></span>  
 <span data-ttu-id="4e41d-128">Une manipulation est une collection d'objets <xref:System.Windows.Input.Manipulations.Manipulator2D>.</span><span class="sxs-lookup"><span data-stu-id="4e41d-128">A manipulation is a collection of <xref:System.Windows.Input.Manipulations.Manipulator2D> objects.</span></span> <span data-ttu-id="4e41d-129">Cette manipulation d'agrégation est représentée par un point d'origine et une ellipse.</span><span class="sxs-lookup"><span data-stu-id="4e41d-129">This aggregate manipulation is represented by an origin point and an ellipse.</span></span> <span data-ttu-id="4e41d-130">Le point d'origine est la position moyenne de tous les manipulateurs qui manipulent un élément.</span><span class="sxs-lookup"><span data-stu-id="4e41d-130">The origin point is the average position of all manipulators that are manipulating an element.</span></span> <span data-ttu-id="4e41d-131">L'ellipse a un rayon qui est la distance moyenne entre l'origine et chacun des objets <xref:System.Windows.Input.Manipulations.Manipulator2D>.</span><span class="sxs-lookup"><span data-stu-id="4e41d-131">The ellipse has a radius that is the average distance from the origin to each of the <xref:System.Windows.Input.Manipulations.Manipulator2D> objects.</span></span>  
  
 <span data-ttu-id="4e41d-132">![Parties d’une manipulation.](../../../docs/framework/common-client-technologies/media/manipulation-definition.png "Manipulation_Definition")</span><span class="sxs-lookup"><span data-stu-id="4e41d-132">![The parts of a manipulation.](../../../docs/framework/common-client-technologies/media/manipulation-definition.png "Manipulation_Definition")</span></span>  
  
 <span data-ttu-id="4e41d-133">Une manipulation est déterminée par deux manipulateurs (1 et 2), une origine et une ellipse.</span><span class="sxs-lookup"><span data-stu-id="4e41d-133">Two manipulators (1 and 2), an origin, and an ellipse specify a manipulation</span></span>  
  
 <span data-ttu-id="4e41d-134">À mesure que des manipulateurs sont ajoutés, déplacés ou supprimés pour un élément d'interface utilisateur, une application met à jour l'objet <xref:System.Windows.Input.Manipulations.ManipulationProcessor2D> en appelant la méthode <xref:System.Windows.Input.Manipulations.ManipulationProcessor2D.ProcessManipulators%2A>.</span><span class="sxs-lookup"><span data-stu-id="4e41d-134">As manipulators are added, moved, or removed for a UI element, an application updates the <xref:System.Windows.Input.Manipulations.ManipulationProcessor2D> object by calling the <xref:System.Windows.Input.Manipulations.ManipulationProcessor2D.ProcessManipulators%2A> method.</span></span> <span data-ttu-id="4e41d-135">Au début d'une manipulation, l'événement <xref:System.Windows.Input.Manipulations.ManipulationProcessor2D.Started> est déclenché.</span><span class="sxs-lookup"><span data-stu-id="4e41d-135">When the manipulation first begins, the <xref:System.Windows.Input.Manipulations.ManipulationProcessor2D.Started> event is raised.</span></span>  
  
> [!NOTE]
>  <span data-ttu-id="4e41d-136">Le traitement des manipulations est plus efficace quand il est utilisé dans un environnement de mise à jour basé sur des trames.</span><span class="sxs-lookup"><span data-stu-id="4e41d-136">Manipulation processing is more efficient when used in a frame-based update environment.</span></span> <span data-ttu-id="4e41d-137">Cela ne pose aucun problème quand le traitement des manipulations est utilisé dans une application Microsoft XNA, étant donné que le framework XNA fournit des mises à jour basées sur des trames à l’aide de la méthode [Game.Update](https://msdn.microsoft.com/library/microsoft.xna.framework.game.update.aspx).</span><span class="sxs-lookup"><span data-stu-id="4e41d-137">When using manipulation processing in a Microsoft XNA application, this is not a concern because the XNA framework provides frame-based updates using the [Game.Update](https://msdn.microsoft.com/library/microsoft.xna.framework.game.update.aspx) method.</span></span> <span data-ttu-id="4e41d-138">Dans un autre environnement (tel que WinForms), vous devrez éventuellement fournir votre propre logique basée sur des trames pour collecter des manipulations et les envoyer périodiquement à la méthode <xref:System.Windows.Input.Manipulations.ManipulationProcessor2D.ProcessManipulators%2A> sous forme de lot.</span><span class="sxs-lookup"><span data-stu-id="4e41d-138">In another environment (such as WinForms), you might need to provide your own frame-based logic to collect manipulations and periodically send them to the <xref:System.Windows.Input.Manipulations.ManipulationProcessor2D.ProcessManipulators%2A> method as a batch.</span></span>  
  
 <span data-ttu-id="4e41d-139">À mesure que le nombre de manipulateurs ou leur position change, l'événement <xref:System.Windows.Input.Manipulations.ManipulationProcessor2D.Delta> est déclenché.</span><span class="sxs-lookup"><span data-stu-id="4e41d-139">As the number of manipulators or their position change, the <xref:System.Windows.Input.Manipulations.ManipulationProcessor2D.Delta> event is raised.</span></span> <span data-ttu-id="4e41d-140">Les propriétés de l'objet <xref:System.Windows.Input.Manipulations.Manipulation2DDeltaEventArgs> qui est passé au gestionnaire d'événements <xref:System.Windows.Input.Manipulations.ManipulationProcessor2D.Delta> spécifient les modifications de l'origine, de l'échelle, de la rotation et de la translation qui ont eu lieu depuis le dernier événement.</span><span class="sxs-lookup"><span data-stu-id="4e41d-140">Properties of the <xref:System.Windows.Input.Manipulations.Manipulation2DDeltaEventArgs> object that is passed to the <xref:System.Windows.Input.Manipulations.ManipulationProcessor2D.Delta> event handler specify changes in origin, scale, rotation, and translation that have occurred since the last event.</span></span> <span data-ttu-id="4e41d-141">L'origine de la manipulation change quand les manipulateurs se déplacent et qu'ils sont ajoutés ou supprimés.</span><span class="sxs-lookup"><span data-stu-id="4e41d-141">The origin of the manipulation changes when manipulators move, and when manipulators are added or removed.</span></span> <span data-ttu-id="4e41d-142">Les valeurs de translation spécifient la magnitude du déplacement X ou Y inclus dans la manipulation.</span><span class="sxs-lookup"><span data-stu-id="4e41d-142">Translation values specify how much X or Y movement the manipulation includes.</span></span>  
  
 <span data-ttu-id="4e41d-143">Une application utilise les nouvelles valeurs pour redessiner l'élément d'interface utilisateur.</span><span class="sxs-lookup"><span data-stu-id="4e41d-143">Using the new values, an application redraws the UI element.</span></span>  
  
 <span data-ttu-id="4e41d-144">![Manipulation après le déplacement du contact A vers la droite.](../../../docs/framework/common-client-technologies/media/manipulation-changed.png "Manipulation_Changed")</span><span class="sxs-lookup"><span data-stu-id="4e41d-144">![A manipulation after contact A moved to the right.](../../../docs/framework/common-client-technologies/media/manipulation-changed.png "Manipulation_Changed")</span></span>  
  
 <span data-ttu-id="4e41d-145">Le manipulateur 1 se déplace et entraîne une modification de l'origine.</span><span class="sxs-lookup"><span data-stu-id="4e41d-145">Manipulator 1 moves and causes the origin to change</span></span>  
  
 <span data-ttu-id="4e41d-146">Quand le dernier manipulateur associé à la manipulation est supprimé de l'objet <xref:System.Windows.Input.Manipulations.ManipulationProcessor2D>, l'événement <xref:System.Windows.Input.Manipulations.ManipulationProcessor2D.Completed> est déclenché.</span><span class="sxs-lookup"><span data-stu-id="4e41d-146">When the last manipulator that is associated with the manipulation is removed from the <xref:System.Windows.Input.Manipulations.ManipulationProcessor2D> object, the <xref:System.Windows.Input.Manipulations.ManipulationProcessor2D.Completed> event is raised.</span></span>  
  
### <a name="the-manipulation-processing-model"></a><span data-ttu-id="4e41d-147">Modèle de traitement des manipulations</span><span class="sxs-lookup"><span data-stu-id="4e41d-147">The Manipulation Processing Model</span></span>  
 <span data-ttu-id="4e41d-148">Un processeur de manipulation utilise un modèle d'utilisation directe.</span><span class="sxs-lookup"><span data-stu-id="4e41d-148">A manipulation processor uses a direct-usage model.</span></span> <span data-ttu-id="4e41d-149">Dans ce modèle simple, une application doit passer tous les détails de l'événement d'entrée au processeur de manipulation.</span><span class="sxs-lookup"><span data-stu-id="4e41d-149">With this simple model, an application must pass any input event details to the manipulation processor.</span></span> <span data-ttu-id="4e41d-150">Un événement d'entrée peut être déclenché par n'importe quelle primitive d'entrée (telle qu'une souris, un stylet ou un doigt).</span><span class="sxs-lookup"><span data-stu-id="4e41d-150">An input event might be raised by any input primitive, such as a mouse device, a stylus, or a finger.</span></span> <span data-ttu-id="4e41d-151">Comme ce processus fournit un mécanisme de filtrage direct et un modèle d'utilisation simple, l'application peut traiter les événements d'entrée par lots, si nécessaire.</span><span class="sxs-lookup"><span data-stu-id="4e41d-151">This process provides a direct filtering mechanism and a simple usage model, so the application can batch input events when it is necessary.</span></span>  
  
 <span data-ttu-id="4e41d-152">Pour inclure une primitive d'entrée dans le processus de manipulation, une application crée une structure <xref:System.Windows.Input.Manipulations.Manipulator2D> à partir des détails de la primitive d'entrée et la passe au processeur de manipulation à l'aide de la méthode <xref:System.Windows.Input.Manipulations.ManipulationProcessor2D.ProcessManipulators%2A>.</span><span class="sxs-lookup"><span data-stu-id="4e41d-152">For an application to include an input primitive in the manipulation process, it creates a <xref:System.Windows.Input.Manipulations.Manipulator2D> structure from the details of the input primitive, and passes the structure to the manipulation processor using the <xref:System.Windows.Input.Manipulations.ManipulationProcessor2D.ProcessManipulators%2A> method.</span></span> <span data-ttu-id="4e41d-153">Le processeur de manipulation déclenche ensuite des événements que l'application doit gérer pour mettre correctement à jour le composant visuel.</span><span class="sxs-lookup"><span data-stu-id="4e41d-153">The manipulation processor then raises events, which the application must handle to update the visual component in an appropriate way.</span></span>  
  
 <span data-ttu-id="4e41d-154">![Flux du modèle d’utilisation directe des manipulations.](../../../docs/framework/common-client-technologies/media/manipulation-flow.png "Manipulation_Flow")</span><span class="sxs-lookup"><span data-stu-id="4e41d-154">![The flow of the manipulations direct&#45;usage model.](../../../docs/framework/common-client-technologies/media/manipulation-flow.png "Manipulation_Flow")</span></span>  
  
 <span data-ttu-id="4e41d-155">Modèle de traitement des manipulations</span><span class="sxs-lookup"><span data-stu-id="4e41d-155">The manipulation processing model</span></span>  
  
## <a name="inertia"></a><span data-ttu-id="4e41d-156">Inertie</span><span class="sxs-lookup"><span data-stu-id="4e41d-156">Inertia</span></span>  
 <span data-ttu-id="4e41d-157">Le processeur d'inertie permet aux applications d'extrapoler l'emplacement, l'orientation et d'autres propriétés d'un élément d'interface utilisateur en simulant un comportement réel.</span><span class="sxs-lookup"><span data-stu-id="4e41d-157">The inertia processor enables applications to extrapolate location, orientation, and other properties of a UI element by simulating real-world behavior.</span></span>  
  
 <span data-ttu-id="4e41d-158">Par exemple, quand un utilisateur agit sur un élément, ce dernier peut continuer à se déplacer, à ralentir, puis à s'arrêter lentement.</span><span class="sxs-lookup"><span data-stu-id="4e41d-158">For instance, when a user flicks an element, it can continue moving, decelerate, and then slowly stop.</span></span> <span data-ttu-id="4e41d-159">Le processeur d'inertie implémente ce comportement en entraînant une modification des valeurs 2D affines (origine, échelle, translation et rotation) à un moment et une vitesse de décélération spécifiques.</span><span class="sxs-lookup"><span data-stu-id="4e41d-159">The inertia processor implements this behavior by causing the affine 2-D values (origin, scale, translation, and rotation) to change over a specified time at a specified deceleration rate.</span></span>  
  
 <span data-ttu-id="4e41d-160">Comme dans la manipulation, un processeur d'inertie ne dispose d'aucune information sur les éléments d'interface utilisateur.</span><span class="sxs-lookup"><span data-stu-id="4e41d-160">As with manipulation processing, an inertia processor does not have information about any particular UI element.</span></span> <span data-ttu-id="4e41d-161">En réponse aux événements déclenchés sur un objet <xref:System.Windows.Input.Manipulations.InertiaProcessor2D>, une application applique séparément les modifications apportées à un élément spécifique à l'application.</span><span class="sxs-lookup"><span data-stu-id="4e41d-161">In response to events that are raised on an <xref:System.Windows.Input.Manipulations.InertiaProcessor2D> object, an application separately applies the changes to an application-specific element.</span></span>  
  
 <span data-ttu-id="4e41d-162">L'inertie et la manipulation sont souvent traitées conjointement.</span><span class="sxs-lookup"><span data-stu-id="4e41d-162">Inertia processing and manipulation processing are often used together.</span></span> <span data-ttu-id="4e41d-163">Leurs interfaces sont semblables, de même que les événements qu'elles déclenchent (dans certains cas).</span><span class="sxs-lookup"><span data-stu-id="4e41d-163">Their interfaces are similar, and the events that they raise are (in some cases) identical.</span></span> <span data-ttu-id="4e41d-164">En général, le traitement de l'inertie commence lorsque la manipulation de l'élément d'interface utilisateur est terminée.</span><span class="sxs-lookup"><span data-stu-id="4e41d-164">Generally, inertia processing begins when the manipulation of the UI element is completed.</span></span> <span data-ttu-id="4e41d-165">Pour ce faire, l'événement <xref:System.Windows.Input.Manipulations.ManipulationProcessor2D.Completed> est écouté et le traitement de l'inertie démarre à partir de ce gestionnaire d'événements.</span><span class="sxs-lookup"><span data-stu-id="4e41d-165">This is accomplished by listening to the <xref:System.Windows.Input.Manipulations.ManipulationProcessor2D.Completed> event and starting the inertia processing from that event handler.</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="4e41d-166">Voir aussi</span><span class="sxs-lookup"><span data-stu-id="4e41d-166">See Also</span></span>  
 <xref:System.Windows.Input.Manipulations>
