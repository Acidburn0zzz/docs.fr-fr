---
title: Vue d'ensemble de la corrélation
ms.date: 03/30/2017
ms.assetid: edcc0315-5d26-44d6-a36d-ea554c418e9f
ms.openlocfilehash: 8ac5d39866b23bc134f009fdb0df6ebf56c6d234
ms.sourcegitcommit: 64f4baed249341e5bf64d1385bf48e3f2e1a0211
ms.translationtype: MT
ms.contentlocale: fr-FR
ms.lasthandoff: 09/07/2018
ms.locfileid: "44128103"
---
# <a name="correlation-overview"></a>Vue d'ensemble de la corrélation
La corrélation est le mécanisme qui permet de lier les messages de service de workflow entre eux ou à l'état de l'instance d'application, par exemple une réponse à une demande initiale ou un ID de commande particulier à l'état persistant d'un workflow de traitement de commandes. Cette rubrique offre une vue d'ensemble de la corrélation. Les autres rubriques de cette section fournissent des informations supplémentaires sur chaque type de corrélation.  
  
## <a name="types-of-correlation"></a>Types de corrélation  
 La corrélation peut être basée sur le protocole ou basée sur le contenu. Les corrélations basées sur le protocole utilisent des données fournies par l'infrastructure de remise des messages pour assurer le mappage entre les messages. Les messages corrélés à l'aide de la corrélation basée sur le protocole sont liés entre eux à l'aide d'un objet en mémoire, tel qu'un <xref:System.ServiceModel.Channels.RequestContext>, ou par un jeton fourni par le protocole de transport. Les corrélations basées sur le contenu lient des messages entre eux à l'aide de données spécifiées par l'application. Les messages corrélés à l'aide de la corrélation basée sur le contenu sont liés entre eux par des données du message définies par l'application, telles qu'un numéro de client.  
  
 Les activités qui participent à la corrélation utilisent un objet <xref:System.ServiceModel.Activities.CorrelationHandle> pour regrouper les activités de messagerie. Par exemple, une activité <xref:System.ServiceModel.Activities.Send> utilisée pour appeler un service et une activité <xref:System.ServiceModel.Activities.Receive> successive, utilisée pour recevoir un rappel du service, partagent le même <xref:System.ServiceModel.Activities.CorrelationHandle>. Ce modèle de base est utilisé que la corrélation soit basée sur le contenu ou sur le protocole. Le handle de corrélation peut être défini explicitement sur chaque activité ou les activités peuvent être contenues dans une activité <xref:System.ServiceModel.Activities.CorrelationScope>. Les activités contenues dans une activité <xref:System.ServiceModel.Activities.CorrelationScope> possèdent leurs handles de corrélation managés par <xref:System.ServiceModel.Activities.CorrelationScope> et ne requièrent pas le <xref:System.ServiceModel.Activities.CorrelationHandle> pour être définies de manière explicite. Une étendue <xref:System.ServiceModel.Activities.CorrelationScope> fournit une gestion <xref:System.ServiceModel.Activities.CorrelationHandle> pour une corrélation demande-réponse et un type de corrélation supplémentaire. Les services de workflow hébergés à l'aide de <xref:System.ServiceModel.Activities.WorkflowServiceHost> ont la même gestion de corrélation par défaut que l'activité <xref:System.ServiceModel.Activities.CorrelationScope>. Cette gestion de corrélation par défaut signifie en général que dans de nombreux scénarios, les activités de messagerie dans une étendue <xref:System.ServiceModel.Activities.CorrelationScope> ou dans un service de workflow n'ont pas besoin que leur <xref:System.ServiceModel.Activities.CorrelationHandle> soit défini, à moins que plusieurs activités de messagerie soient en parallèle ou se chevauchent, par exemple deux activités <xref:System.ServiceModel.Activities.Receive> en parallèle ou deux activités <xref:System.ServiceModel.Activities.Send> suivies de deux activités <xref:System.ServiceModel.Activities.Receive>. Vous trouverez davantage d'informations sur la corrélation par défaut dans les rubriques de cette section qui présentent chaque type spécifique de corrélation. Pour plus d’informations sur les activités de messagerie, consultez [activités de messagerie](../../../../docs/framework/wcf/feature-details/messaging-activities.md) et [Comment : créer un Service de flux de travail avec les activités de messagerie](../../../../docs/framework/wcf/feature-details/how-to-create-a-workflow-service-with-messaging-activities.md).  
  
## <a name="protocol-based-correlation"></a>Corrélation basée sur le protocole  
 La corrélation basée sur le protocole utilise le mécanisme de transport pour lier des messages entre eux et à l'instance appropriée. Certaines corrélations de protocole fournies par le système incluent une corrélation demande-réponse et une corrélation basée sur le contexte. Une corrélation demande-réponse permet de corréler une seule paire d'activités de messagerie pour former une opération bidirectionnelle, par exemple <xref:System.ServiceModel.Activities.Send> appariée à <xref:System.ServiceModel.Activities.ReceiveReply>, ou <xref:System.ServiceModel.Activities.Receive> appariée à <xref:System.ServiceModel.Activities.SendReply>. Le Workflow Designer [!INCLUDE[vs_current_long](../../../../includes/vs-current-long-md.md)] fournit également un jeu de modèles d'activité pour implémenter ce modèle rapidement. Une corrélation basée sur le contexte est basée sur le mécanisme d’échange de contexte décrit dans le [.NET Context Exchange Protocol Specification](https://go.microsoft.com/fwlink/?LinkID=166059). Pour utiliser la corrélation basée sur le contexte, une liaison basée sur le contexte telle que <xref:System.ServiceModel.BasicHttpContextBinding>, <xref:System.ServiceModel.WSHttpContextBinding> ou <xref:System.ServiceModel.NetTcpContextBinding> doit être utilisée sur le point de terminaison.  
  
 Pour plus d’informations sur la corrélation de protocole, consultez [échange de contexte](../../../../docs/framework/wcf/feature-details/context-exchange-correlation.md), [Durable Duplex](../../../../docs/framework/wcf/feature-details/durable-duplex-correlation.md), et [demande-réponse](../../../../docs/framework/wcf/feature-details/request-reply-correlation.md). Pour plus d’informations sur l’utilisation de la [!INCLUDE[vs_current_long](../../../../includes/vs-current-long-md.md)] modèles d’activité de Workflow Designer, consultez [activités de messagerie](../../../../docs/framework/wcf/feature-details/messaging-activities.md). Pour l’exemple de code, consultez le [Durable Duplex &#91;exemples WF&#93; ](../../../../docs/framework/windows-workflow-foundation/samples/durable-duplex.md) et [NetContextExchangeCorrelation](https://msdn.microsoft.com/library/93c74a1a-b9e2-46c6-95c0-c9b0e9472caf) exemples.  
  
## <a name="content-based-correlation"></a>Corrélation basée sur le contenu  
 La corrélation basée sur le contenu utilise quelques renseignements dans le message pour l'associer à une instance particulière. Contrairement à la corrélation basée sur le protocole, la corrélation basée sur le contenu exige que l'auteur de l'application déclare explicitement où se trouvent ces données dans chaque message connexe. Les activités qui utilisent la corrélation basée sur le contenu spécifient ces données de message à l'aide d'un objet <xref:System.ServiceModel.MessageQuerySet>. La corrélation basée sur le contenu est utile lors de la communication avec des services qui n'utilisent aucune liaison de contexte, comme <xref:System.ServiceModel.BasicHttpContextBinding>. Pour plus d’informations sur la corrélation en fonction du contenu, consultez [basé sur le contenu](../../../../docs/framework/wcf/feature-details/content-based-correlation.md). Pour l’exemple de code, consultez le [corrélation en fonction du contenu](../../../../docs/framework/windows-workflow-foundation/samples/content-based-correlation.md) et [calculatrice corrélée](../../../../docs/framework/windows-workflow-foundation/samples/correlated-calculator.md) exemples.  
  
## <a name="see-also"></a>Voir aussi  
 [Corrélation basée sur le contenu](../../../../docs/framework/windows-workflow-foundation/samples/content-based-correlation.md)  
 [Calculatrice corrélée](../../../../docs/framework/windows-workflow-foundation/samples/correlated-calculator.md)  
 [Corrélation Duplex durable &#91;exemples WF&#93;](../../../../docs/framework/windows-workflow-foundation/samples/durable-duplex.md)  
 [NetContextExchangeCorrelation](https://msdn.microsoft.com/library/93c74a1a-b9e2-46c6-95c0-c9b0e9472caf)
