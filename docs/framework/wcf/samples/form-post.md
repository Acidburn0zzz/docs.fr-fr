---
title: Publication du formulaire
ms.date: 03/30/2017
ms.assetid: fa6f84f9-2e07-4e3c-92d0-a245308b7dff
ms.openlocfilehash: 9115b9abfa7039bf409bb9bbce54e5012d05a074
ms.sourcegitcommit: a885cc8c3e444ca6471348893d5373c6e9e49a47
ms.translationtype: MT
ms.contentlocale: fr-FR
ms.lasthandoff: 09/06/2018
ms.locfileid: "43890826"
---
# <a name="form-post"></a><span data-ttu-id="d88a1-102">Publication du formulaire</span><span class="sxs-lookup"><span data-stu-id="d88a1-102">Form Post</span></span>
<span data-ttu-id="d88a1-103">Cet exemple montre comment étendre le modèle de programmation REST WCF pour prendre en charge de nouveaux formats de requêtes entrantes.</span><span class="sxs-lookup"><span data-stu-id="d88a1-103">This sample demonstrates how to extend the WCF REST programming model to support new incoming request formats.</span></span> <span data-ttu-id="d88a1-104">L'exemple inclut également une implémentation de formateur capable de désérialiser une requête provenant d'une publication de formulaire HTML en type [!INCLUDE[dnprdnshort](../../../../includes/dnprdnshort-md.md)].</span><span class="sxs-lookup"><span data-stu-id="d88a1-104">The sample also includes an implementation of a formatter that can deserialize a request from an HTML form post into a [!INCLUDE[dnprdnshort](../../../../includes/dnprdnshort-md.md)] type.</span></span> <span data-ttu-id="d88a1-105">L'exemple utilise en outre un modèle T4 pour retourner une page HTML, qui fournit le formulaire HTML que les utilisateurs peuvent publier sur le service REST WCF.</span><span class="sxs-lookup"><span data-stu-id="d88a1-105">In addition, the sample uses a T4 Template to return an HTML page, which provides the HTML form that users can post back to the WCF REST service.</span></span>  
  
## <a name="demonstrates"></a><span data-ttu-id="d88a1-106">Démonstrations</span><span class="sxs-lookup"><span data-stu-id="d88a1-106">Demonstrates</span></span>  
  
-   <span data-ttu-id="d88a1-107">Extension de la prise en charge des nouveaux formats de requêtes entrantes.</span><span class="sxs-lookup"><span data-stu-id="d88a1-107">Extending support for incoming request formats.</span></span>  
  
-   <span data-ttu-id="d88a1-108">Intégration de modèles T4.</span><span class="sxs-lookup"><span data-stu-id="d88a1-108">Integrating T4 templates.</span></span>  
  
## <a name="discussion"></a><span data-ttu-id="d88a1-109">Discussion</span><span class="sxs-lookup"><span data-stu-id="d88a1-109">Discussion</span></span>  
 <span data-ttu-id="d88a1-110">Cet exemple est composé de deux projets.</span><span class="sxs-lookup"><span data-stu-id="d88a1-110">This sample consists of two projects.</span></span> <span data-ttu-id="d88a1-111">Le premier est la bibliothèque HtmlFormProcessing qui inclut un formateur de requête personnalisé qui peut désérialiser des publications de formulaire HTML en types [!INCLUDE[dnprdnshort](../../../../includes/dnprdnshort-md.md)].</span><span class="sxs-lookup"><span data-stu-id="d88a1-111">One project is the HtmlFormProcessing library that includes a custom request formatter that can deserialize HTML form posts into [!INCLUDE[dnprdnshort](../../../../includes/dnprdnshort-md.md)] types.</span></span> <span data-ttu-id="d88a1-112">Le deuxième est une application console qui étend l'exemple Basic Resource Service de base pour utiliser le formateur de requête personnalisé de la bibliothèque HtmlFormProcessing.</span><span class="sxs-lookup"><span data-stu-id="d88a1-112">The second project is a console application that extends the Basic Resource Service sample to use the custom request formatter of the HtmlFormProcessing library.</span></span>  
  
 <span data-ttu-id="d88a1-113">Le formateur personnalisé capable de désérialiser des publications de formulaires HTML (HtmlFormRequestDispatchFormatter) accepte à la fois les types [!INCLUDE[dnprdnshort](../../../../includes/dnprdnshort-md.md)] qui peuvent être convertis à partir d'une chaîne à l'aide de <xref:System.ServiceModel.Dispatcher.QueryStringConverter> et les types marqués avec <xref:System.Runtime.Serialization.DataContractAttribute> dont les membres ne peuvent être convertis à partir d'une chaîne qu'à l'aide du QueryStringConverter.</span><span class="sxs-lookup"><span data-stu-id="d88a1-113">The custom formatter that can deserialize HTML form posts (HtmlFormRequestDispatchFormatter) accepts both [!INCLUDE[dnprdnshort](../../../../includes/dnprdnshort-md.md)] types that can be converted from a string using the <xref:System.ServiceModel.Dispatcher.QueryStringConverter> and types marked with <xref:System.Runtime.Serialization.DataContractAttribute> that only have members that can be converted from a string using the QueryStringConverter.</span></span>  
  
 <span data-ttu-id="d88a1-114">Le projet de bibliothèque HtmlFormProcessing inclut également une classe de base abstraite, `RequestBodyDispatchFormatter`, qui peut être utilisée pour créer d'autres formateurs de requête personnalisés.</span><span class="sxs-lookup"><span data-stu-id="d88a1-114">The HtmlFormProcessing library project also includes an abstract base class, `RequestBodyDispatchFormatter`, which can be used to create other custom request formatters.</span></span> <span data-ttu-id="d88a1-115">Effectuer une dérivation de `RequestBodyDispatchFormatter` permet à un développeur de se concentrer sur la logique de désérialisation du corps de la requête, qui permet à la classe de base de mapper les paramètres du modèle URI aux paramètres de méthode de l'opération.</span><span class="sxs-lookup"><span data-stu-id="d88a1-115">Deriving from the `RequestBodyDispatchFormatter` allows a developer to focus on the request body deserialization logic, which allows the base class to map the URI template parameters to the operation’s method parameters.</span></span> <span data-ttu-id="d88a1-116">Le projet de bibliothèque HtmlFormProcessing comprend aussi la classe `HtmlFormProcessingBehavior`, qui illustre la dérivation de <xref:System.ServiceModel.Description.WebHttpBehavior> pour remplacer le formateur de requête par défaut par un formateur de requête personnalisé.</span><span class="sxs-lookup"><span data-stu-id="d88a1-116">Also in the HtmlFormProcessing library project is the `HtmlFormProcessingBehavior` class, which demonstrates how to derive from the <xref:System.ServiceModel.Description.WebHttpBehavior> to replace the default request formatter with a custom request formatter.</span></span>  
  
 <span data-ttu-id="d88a1-117">Ce projet d’application console étend la [Basic Resource Service](../../../../docs/framework/wcf/samples/basic-resource-service.md) exemple.</span><span class="sxs-lookup"><span data-stu-id="d88a1-117">This console application project extends the [Basic Resource Service](../../../../docs/framework/wcf/samples/basic-resource-service.md) sample.</span></span> <span data-ttu-id="d88a1-118">L'exemple Basic Resource Service montre comment exposer une ressource en utilisant le modèle de programmation REST WCF.</span><span class="sxs-lookup"><span data-stu-id="d88a1-118">The Basic Resource Service sample demonstrates how to expose a resource in a manner that uses the WCF REST programming model.</span></span> <span data-ttu-id="d88a1-119">Dans l'exemple Basic Resource Service, une ressource de collection de clients nommée « customer » est exposée de façon à ce que les clients qu'elle contient puissent être créés, récupérés, mis à jour et supprimés.</span><span class="sxs-lookup"><span data-stu-id="d88a1-119">In the Basic Resource Service sample, a customer collection resource is exposed such that customers in the collection can be created, retrieved, updated and deleted.</span></span> <span data-ttu-id="d88a1-120">L'exemple Basic Resource Service utilise uniquement les deux formats de requêtes entrantes pris en charge en natif : XML et JSON.</span><span class="sxs-lookup"><span data-stu-id="d88a1-120">The Basic Resource Service sample only uses the two natively supported incoming request formats, XML and JSON.</span></span>  
  
 <span data-ttu-id="d88a1-121">L'application console de cet exemple Form Post utilise le formateur personnalisé de la bibliothèque HtmlFormProcessing, qui permet aux utilisateurs de créer des clients en envoyant une requête provenant d'une publication de formulaire HTML à l'aide d'un navigateur.</span><span class="sxs-lookup"><span data-stu-id="d88a1-121">The console application in this Form Post sample utilizes the custom formatter in the HtmlFormProcessing library, which allows users to create customers by sending a request from an HTML form post using a browser.</span></span> <span data-ttu-id="d88a1-122">Il ajoute également une opération qui retourne une page HTML, laquelle inclut le formulaire à publier sur le service.</span><span class="sxs-lookup"><span data-stu-id="d88a1-122">It also adds an operation that returns an HTML page, which includes the form to be posted back to the service.</span></span> <span data-ttu-id="d88a1-123">Cette page HTML est générée à l'aide d'un modèle T4 prétraité, qui se compose d'un fichier .tt et d'un fichier .cs généré automatiquement.</span><span class="sxs-lookup"><span data-stu-id="d88a1-123">This HTML page is generated using a preprocessed T4 template, which consists of a .tt file and an auto-generated .cs file.</span></span> <span data-ttu-id="d88a1-124">Le fichier .tt permet à un développeur d'écrire une réponse sous forme de modèle contenant des variables et des structures de contrôle.</span><span class="sxs-lookup"><span data-stu-id="d88a1-124">The .tt file allows a developer to write a response in a template form that contains variables and control structures.</span></span> <span data-ttu-id="d88a1-125">Pour plus d’informations concernant T4, consultez [génération d’artefacts par à l’aide de modèles de texte](https://go.microsoft.com/fwlink/?LinkId=178139).</span><span class="sxs-lookup"><span data-stu-id="d88a1-125">For more information about T4, see [Generating Artifacts By Using Text Templates](https://go.microsoft.com/fwlink/?LinkId=178139).</span></span>  
  
#### <a name="to-run-the-sample"></a><span data-ttu-id="d88a1-126">Pour exécuter l'exemple</span><span class="sxs-lookup"><span data-stu-id="d88a1-126">To run the sample</span></span>  
  
1.  <span data-ttu-id="d88a1-127">Ouvrez la solution de l'exemple Form Post.</span><span class="sxs-lookup"><span data-stu-id="d88a1-127">Open the solution for the Form Post Sample.</span></span> <span data-ttu-id="d88a1-128">Pour que l'exemple fonctionne correctement, vous devez exécuter [!INCLUDE[vs_current_long](../../../../includes/vs-current-long-md.md)] en tant qu'administrateur.</span><span class="sxs-lookup"><span data-stu-id="d88a1-128">When launching [!INCLUDE[vs_current_long](../../../../includes/vs-current-long-md.md)], you must run as an administrator to execute the sample successfully.</span></span> <span data-ttu-id="d88a1-129">Cela en double-cliquant sur le [!INCLUDE[vs_current_long](../../../../includes/vs-current-long-md.md)] icône et en choisissant « Exécuter en tant qu’administrateur » dans le menu contextuel.</span><span class="sxs-lookup"><span data-stu-id="d88a1-129">Do this by right-clicking the [!INCLUDE[vs_current_long](../../../../includes/vs-current-long-md.md)] icon and choosing "Run as Administrator" from the context menu.</span></span>  
  
2.  <span data-ttu-id="d88a1-130">Appuyez sur CTRL+MAJ+B pour générer la solution, puis appuyez sur CTRL+F5 pour exécuter le projet FormPost.</span><span class="sxs-lookup"><span data-stu-id="d88a1-130">Press CTRL+SHIFT+B to build the solution and then press CTRL+F5 to run the console application FormPost project.</span></span>  
  
3.  <span data-ttu-id="d88a1-131">La fenêtre de console apparaît et fournit l'URI du service en cours d'exécution, ainsi que l'URI de sa page d'aide HTML.</span><span class="sxs-lookup"><span data-stu-id="d88a1-131">The console window appears and provides the URI of the running service and the URI of the HTML help page for the running service.</span></span>  
  
4.  <span data-ttu-id="d88a1-132">Lorsque l'exemple s'exécute, le client écrit l'état de l'activité actuelle (ajout, mise à jour, suppression d'un client, ou obtention de la liste des clients actuels) du service dans la fenêtre de console.</span><span class="sxs-lookup"><span data-stu-id="d88a1-132">As the sample runs, the client writes the status of the current activity, whether it be adding a customer, updating a customer, deleting a customer or getting a list of current customers from the service to the console window.</span></span>  
  
5.  <span data-ttu-id="d88a1-133">Vous êtes ensuite invité à naviguer jusqu'à l'URI du formulaire customer.</span><span class="sxs-lookup"><span data-stu-id="d88a1-133">You are then prompted to browse to the URI of the customer form.</span></span> <span data-ttu-id="d88a1-134">Ouvrez un navigateur et naviguez jusqu'à l'URI fourni.</span><span class="sxs-lookup"><span data-stu-id="d88a1-134">Open a browser and browse to the given URI.</span></span> <span data-ttu-id="d88a1-135">Tapez un nom et une adresse pour le client et cliquez sur le **envoyer** bouton.</span><span class="sxs-lookup"><span data-stu-id="d88a1-135">Type in a name and address for the customer and click the **Submit** button.</span></span>  
  
6.  <span data-ttu-id="d88a1-136">Appuyez sur une touche quelconque dans la fenêtre de console pour continuer à exécuter l'exemple.</span><span class="sxs-lookup"><span data-stu-id="d88a1-136">Press any key for the console window to continue running the sample.</span></span>  
  
7.  <span data-ttu-id="d88a1-137">Lorsque l'exemple se termine, remarquez que le client que vous avez créé à l'aide du navigateur est inclus dans la liste finale des clients.</span><span class="sxs-lookup"><span data-stu-id="d88a1-137">As the sample completes, notice that the customer you created using the browser is included in the final list of customers.</span></span>  
  
8.  <span data-ttu-id="d88a1-138">Appuyez sur une touche quelconque pour arrêter l'exemple.</span><span class="sxs-lookup"><span data-stu-id="d88a1-138">Press any key to terminate the sample.</span></span>  
  
> [!IMPORTANT]
>  <span data-ttu-id="d88a1-139">Les exemples peuvent déjà être installés sur votre ordinateur.</span><span class="sxs-lookup"><span data-stu-id="d88a1-139">The samples may already be installed on your machine.</span></span> <span data-ttu-id="d88a1-140">Recherchez le répertoire (par défaut) suivant avant de continuer.</span><span class="sxs-lookup"><span data-stu-id="d88a1-140">Check for the following (default) directory before continuing.</span></span>  
>   
>  `<InstallDrive>:\WF_WCF_Samples`  
>   
>  <span data-ttu-id="d88a1-141">Si ce répertoire n’existe pas, accédez à [Windows Communication Foundation (WCF) et des exemples de Windows Workflow Foundation (WF) pour .NET Framework 4](https://go.microsoft.com/fwlink/?LinkId=150780) pour télécharger tous les Windows Communication Foundation (WCF) et [!INCLUDE[wf1](../../../../includes/wf1-md.md)] exemples.</span><span class="sxs-lookup"><span data-stu-id="d88a1-141">If this directory does not exist, go to [Windows Communication Foundation (WCF) and Windows Workflow Foundation (WF) Samples for .NET Framework 4](https://go.microsoft.com/fwlink/?LinkId=150780) to download all Windows Communication Foundation (WCF) and [!INCLUDE[wf1](../../../../includes/wf1-md.md)] samples.</span></span> <span data-ttu-id="d88a1-142">Cet exemple se trouve dans le répertoire suivant.</span><span class="sxs-lookup"><span data-stu-id="d88a1-142">This sample is located in the following directory.</span></span>  
>   
>  `<InstallDrive>:\WF_WCF_Samples\WCF\Extensibility\Web\FormPost`
