---
title: "Atténuation : Défilement horizontal et virtualisation"
ms.custom: 
ms.date: 03/30/2017
ms.prod: .net-framework
ms.reviewer: 
ms.suite: 
ms.technology:
- dotnet-bcl
- dotnet-clr
ms.tgt_pltfrm: 
ms.topic: article
ms.assetid: d5bafd9b-a3b3-4f92-8241-2aad254fb1a9
caps.latest.revision: 6
author: rpetrusha
ms.author: ronpet
manager: wpickett
ms.translationtype: HT
ms.sourcegitcommit: 306c608dc7f97594ef6f72ae0f5aaba596c936e1
ms.openlocfilehash: 40eaf185e9c0c60493e9a2e5428c58b7463789fe
ms.contentlocale: fr-fr
ms.lasthandoff: 07/28/2017

---
# <a name="mitigation-horizontal-scrolling-and-virtualization"></a><span data-ttu-id="32542-102">Atténuation : Défilement horizontal et virtualisation</span><span class="sxs-lookup"><span data-stu-id="32542-102">Mitigation: Horizontal Scrolling and Virtualization</span></span>
<span data-ttu-id="32542-103">Cette modification s’applique à un <xref:System.Windows.Controls.ItemsControl> qui effectue sa propre virtualisation dans le sens orthogonal vers la direction de défilement principale.</span><span class="sxs-lookup"><span data-stu-id="32542-103">This change applies to an <xref:System.Windows.Controls.ItemsControl> that does its own virtualization in the direction orthogonal to the main scrolling direction.</span></span> <span data-ttu-id="32542-104">(L’exemple principal est un contrôle <xref:System.Windows.Controls.DataGrid> dont l’attribut <xref:System.Windows.Controls.DataGrid.EnableColumnVirtualization%2A> a la valeur `true`.)  Le résultat de certaines opérations de défilement horizontales a été modifié afin de produire des résultats qui sont plus intuitifs et plus analogues par rapport aux résultats des opérations verticales comparables.</span><span class="sxs-lookup"><span data-stu-id="32542-104">(The chief  example is a <xref:System.Windows.Controls.DataGrid> control with <xref:System.Windows.Controls.DataGrid.EnableColumnVirtualization%2A> set to `true`.)  The outcome of certain  horizontal scrolling operations has been changed to produce results that are more intuitive and more analogous to the results of comparable vertical operations.</span></span>  <span data-ttu-id="32542-105">Les opérations spécifiques comprennent **Défilement ici** et **Bord droit** pour utiliser les noms à partir du menu obtenu en double-cliquant sur une barre de défilement horizontale.</span><span class="sxs-lookup"><span data-stu-id="32542-105">The specific operations include **Scroll Here** and **Right Edge**, to use the names from the menu obtained by right-clicking a horizontal scrollbar.</span></span>  <span data-ttu-id="32542-106">Toutes deux calculent un décalage candidat et appellent <xref:System.Windows.Controls.Primitives.IScrollInfo.SetHorizontalOffset%2A?displayProperty=fullName>.</span><span class="sxs-lookup"><span data-stu-id="32542-106">Both of these compute a  candidate offset and call <xref:System.Windows.Controls.Primitives.IScrollInfo.SetHorizontalOffset%2A?displayProperty=fullName>.</span></span>  <span data-ttu-id="32542-107">Après défilement vers le nouveau décalage, les définitions de « ici » ou « bord droit » peuvent avoir changé, car le nouveau contenu dévirtualisé a modifié la valeur de <xref:System.Windows.Controls.Primitives.IScrollInfo.ExtentWidth%2A?displayProperty=fullName>.</span><span class="sxs-lookup"><span data-stu-id="32542-107">After scrolling to the new offset, the definition of "here" or "right edge" may have changed because newly de-virtualized content has changed the value of <xref:System.Windows.Controls.Primitives.IScrollInfo.ExtentWidth%2A?displayProperty=fullName>.</span></span>  
  
## <a name="description-of-the-change"></a><span data-ttu-id="32542-108">Description de la modification</span><span class="sxs-lookup"><span data-stu-id="32542-108">Description of the change</span></span>  
 <span data-ttu-id="32542-109">Avant [!INCLUDE[net_v462](../../../includes/net-v462-md.md)], l’opération de défilement utilisait simplement le décalage final, même si ce n’est plus « ici » ou le « bord droit ».</span><span class="sxs-lookup"><span data-stu-id="32542-109">Prior to the [!INCLUDE[net_v462](../../../includes/net-v462-md.md)], the scroll operation simply uses the candidate offset, even though it may not be "here" or at the "right edge" any more.</span></span>  <span data-ttu-id="32542-110">Cela entraîne des effets tels que le « rebondissement » du curseur de défilement, comme illustré dans l’exemple.</span><span class="sxs-lookup"><span data-stu-id="32542-110">This results in effects like "bouncing" the scroll thumb, best illustrated by example.</span></span>  <span data-ttu-id="32542-111">Supposons qu’un contrôle <xref:System.Windows.Controls.DataGrid> a un attribut <xref:System.Windows.Controls.Primitives.IScrollInfo.ExtentWidth%2A> avec la valeur 1000 et un attribut <xref:System.Windows.FrameworkElement.Width%2A> avec la valeur 200.</span><span class="sxs-lookup"><span data-stu-id="32542-111">Suppose a <xref:System.Windows.Controls.DataGrid> control has <xref:System.Windows.Controls.Primitives.IScrollInfo.ExtentWidth%2A> set to 1000 and <xref:System.Windows.FrameworkElement.Width%2A> set to 200.</span></span>  <span data-ttu-id="32542-112">Un défilement vers le « Bord droit » utilise un décalage potentiel de 1000-200 = 800.</span><span class="sxs-lookup"><span data-stu-id="32542-112">A scroll to "Right Edge" uses candidate offset  1000 - 200 = 800.</span></span>  <span data-ttu-id="32542-113">Pendant le défilement vers ce décalage, les nouvelles colonnes sont dévirtualisées. Supposons qu’elles sont très larges, de sorte que <xref:System.Windows.Controls.Primitives.IScrollInfo.ExtentWidth%2A> passe à 2000.</span><span class="sxs-lookup"><span data-stu-id="32542-113">While scrolling to that offset, new columns are de-virtualized; let's suppose they are very wide, so that the <xref:System.Windows.Controls.Primitives.IScrollInfo.ExtentWidth%2A> changes to 2000.</span></span>  <span data-ttu-id="32542-114">Le défilement se termine avec <xref:System.Windows.Controls.Primitives.IScrollInfo.HorizontalOffset%2A>=800, et le curseur « rebondit » à proximité du centre de la barre de défilement (précisément à 800/2000 = 40 %).</span><span class="sxs-lookup"><span data-stu-id="32542-114">The scroll ends with <xref:System.Windows.Controls.Primitives.IScrollInfo.HorizontalOffset%2A>=800, and the thumb "bounces" back to near the middle of the scrollbar -- precisely at 800/2000 = 40%.</span></span>  
  
 <span data-ttu-id="32542-115">À compter de [!INCLUDE[net_v462](../../../includes/net-v462-md.md)], un nouveau décalage potentiel est recalculé lorsque cette situation se produit.</span><span class="sxs-lookup"><span data-stu-id="32542-115">Starting with the [!INCLUDE[net_v462](../../../includes/net-v462-md.md)], a new candidate offset is recomputed when this situation occurs.</span></span> <span data-ttu-id="32542-116">(C’est déjà comme cela que le défilement vertical fonctionne.)</span><span class="sxs-lookup"><span data-stu-id="32542-116">(This is how vertical scrolling works already.)</span></span>  
  
## <a name="impact"></a><span data-ttu-id="32542-117">Impact</span><span class="sxs-lookup"><span data-stu-id="32542-117">Impact</span></span>  
 <span data-ttu-id="32542-118">Le changement génère une expérience plus prévisible et intuitive pour l’utilisateur final, mais il peut aussi affecter toute application qui dépend de la valeur exacte de <xref:System.Windows.Controls.Primitives.IScrollInfo.HorizontalOffset%2A?displayProperty=fullName> après un défilement horizontal, qu’il s’agisse d’un appel explicite à <xref:System.Windows.Controls.Primitives.IScrollInfo.SetHorizontalOffset%2A?displayProperty=fullName> ou d’un appel effectué par l’utilisateur final.</span><span class="sxs-lookup"><span data-stu-id="32542-118">The change produces a more predictable and intuitive experience for the end user, but it could also affect any app that depends on the exact value of <xref:System.Windows.Controls.Primitives.IScrollInfo.HorizontalOffset%2A?displayProperty=fullName> after a horizontal scroll, whether invoked by the end user or by an explicit call to <xref:System.Windows.Controls.Primitives.IScrollInfo.SetHorizontalOffset%2A?displayProperty=fullName>.</span></span>  
  
## <a name="mitigation"></a><span data-ttu-id="32542-119">Atténuation</span><span class="sxs-lookup"><span data-stu-id="32542-119">Mitigation</span></span>  
 <span data-ttu-id="32542-120">Une application qui utilise une valeur prédite pour <xref:System.Windows.Controls.Primitives.IScrollInfo.HorizontalOffset%2A?displayProperty=fullName> doit être changée afin de récupérer la valeur réelle (et la valeur de <xref:System.Windows.Controls.Primitives.IScrollInfo.ExtentWidth%2A>) après tout défilement horizontal susceptible de modifier <xref:System.Windows.Controls.Primitives.IScrollInfo.ExtentWidth%2A> en raison de la dévirtualisation.</span><span class="sxs-lookup"><span data-stu-id="32542-120">An app that uses a predicted value for <xref:System.Windows.Controls.Primitives.IScrollInfo.HorizontalOffset%2A?displayProperty=fullName> should be changed to retrieve the actual value (and the value of <xref:System.Windows.Controls.Primitives.IScrollInfo.ExtentWidth%2A>) after any horizontal scroll that could change <xref:System.Windows.Controls.Primitives.IScrollInfo.ExtentWidth%2A> due to de-virtualization.</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="32542-121">Voir aussi</span><span class="sxs-lookup"><span data-stu-id="32542-121">See Also</span></span>  
 [<span data-ttu-id="32542-122">Modifications du runtime</span><span class="sxs-lookup"><span data-stu-id="32542-122">Runtime Changes</span></span>](../../../docs/framework/migration-guide/runtime-changes-in-the-net-framework-4-6-2.md)

