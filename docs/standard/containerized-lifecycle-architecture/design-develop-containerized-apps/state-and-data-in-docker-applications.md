---
title: État et données dans les applications Docker
description: Cycle de vie des applications Docker en conteneur avec la plateforme et les outils Microsoft
ms.prod: .net
author: CESARDELATORRE
ms.author: wiwagn
ms.date: 09/22/2017
ms.topic: article
ms.workload:
- dotnet
- dotnetcore
ms.openlocfilehash: a9f0750dbcffd051e9dae7d9f4f74b921e30af29
ms.sourcegitcommit: 2e8acae16ae802f2d6d04e3ce0a6dbf04e476513
ms.translationtype: MT
ms.contentlocale: fr-FR
ms.lasthandoff: 04/18/2018
---
# <a name="state-and-data-in-docker-applications"></a><span data-ttu-id="9d703-103">État et données dans les applications Docker</span><span class="sxs-lookup"><span data-stu-id="9d703-103">State and data in Docker applications</span></span>

<span data-ttu-id="9d703-104">Une primitive de conteneurs est que l’immuabilité.</span><span class="sxs-lookup"><span data-stu-id="9d703-104">A primitive of containers is immutability.</span></span> <span data-ttu-id="9d703-105">Quand elle est comparée à une machine virtuelle, les conteneurs ne disparaissent comme une occurrence courante.</span><span class="sxs-lookup"><span data-stu-id="9d703-105">When compared to a VM, containers don't disappear as a common occurrence.</span></span> <span data-ttu-id="9d703-106">Une machine virtuelle peut échouer dans différentes formes à partir des processus, surcharge de l’UC ou un disque complet ou ayant échoué.</span><span class="sxs-lookup"><span data-stu-id="9d703-106">A VM might fail in various forms from dead processes, overloaded CPU, or a full or failed disk.</span></span> <span data-ttu-id="9d703-107">Encore, nous pensons que la machine virtuelle soit disponible et de disques RAID sont courants pour vous assurer de défaillances de disque conserver les données.</span><span class="sxs-lookup"><span data-stu-id="9d703-107">Yet, we expect the VM to be available and RAID drives are commonplace to assure drive failures maintain data.</span></span>

<span data-ttu-id="9d703-108">Toutefois, les conteneurs sont supposées être des instances de processus.</span><span class="sxs-lookup"><span data-stu-id="9d703-108">However, containers are thought to be instances of processes.</span></span> <span data-ttu-id="9d703-109">Un processus ne conservent l’état durable.</span><span class="sxs-lookup"><span data-stu-id="9d703-109">A process doesn't maintain durable state.</span></span> <span data-ttu-id="9d703-110">Même si un conteneur peut écrire dans un stockage local, en supposant que cette instance sera autour indéfiniment serait équivalente à en supposant qu'une copie unique de la mémoire sera durable.</span><span class="sxs-lookup"><span data-stu-id="9d703-110">Even though a container can write to its local storage, assuming that that instance will be around indefinitely would be equivalent to assuming a single-copy memory will be durable.</span></span> <span data-ttu-id="9d703-111">Vous devez supposer que les conteneurs, tels que des processus, sont dupliqués, arrêté, ou lorsque gérés par un orchestrateur de conteneur, ils peuvent être déplacés.</span><span class="sxs-lookup"><span data-stu-id="9d703-111">You should assume that containers, like processes, are duplicated, killed, or, when managed with a container orchestrator, they might be moved.</span></span>

<span data-ttu-id="9d703-112">Docker utilise une fonctionnalité appelée un *superposition de système de fichiers* pour implémenter un processus de copie sur écriture qui les stocke des informations mises à jour au système de fichiers racine d’un conteneur, par rapport à l’image d’origine sur lequel il est basé.</span><span class="sxs-lookup"><span data-stu-id="9d703-112">Docker uses a feature known as an *overlay file system* to implement a copy-on-write process that stores any updated information to the root file system of a container, compared to the original image on which it is based.</span></span> <span data-ttu-id="9d703-113">Ces modifications sont perdues si le conteneur est supprimé par la suite à partir du système.</span><span class="sxs-lookup"><span data-stu-id="9d703-113">These changes are lost if the container is subsequently deleted from the system.</span></span> <span data-ttu-id="9d703-114">Un conteneur, par conséquent, n’a pas le stockage persistant par défaut.</span><span class="sxs-lookup"><span data-stu-id="9d703-114">A container, therefore, does not have persistent storage by default.</span></span> <span data-ttu-id="9d703-115">Bien qu’il soit possible d’enregistrer l’état d’un conteneur, vous concevez un système de contourner ce problème serait en conflit avec le principe de l’architecture de conteneur.</span><span class="sxs-lookup"><span data-stu-id="9d703-115">Although it's possible to save the state of a container, designing a system around this would be in conflict with the principle of container architecture.</span></span>

<span data-ttu-id="9d703-116">Pour gérer les données persistantes dans les applications de Docker, il existe des solutions courantes :</span><span class="sxs-lookup"><span data-stu-id="9d703-116">To manage persistent data in Docker applications, there are common solutions:</span></span>

-   <span data-ttu-id="9d703-117">[**Volumes de données**](https://docs.docker.com/engine/tutorials/dockervolumes/) ces monter à l’hôte, comme indiqué uniquement.</span><span class="sxs-lookup"><span data-stu-id="9d703-117">[**Data volumes**](https://docs.docker.com/engine/tutorials/dockervolumes/) These mount to the host, as just noted.</span></span>

-   <span data-ttu-id="9d703-118">[**Conteneurs de volumes de données**](https://docs.docker.com/engine/tutorials/dockervolumes/#/creating-and-mounting-a-data-volume-container) ils fournissent un stockage partagé entre les conteneurs, à l’aide d’un conteneur externe que vous pouvez parcourir.</span><span class="sxs-lookup"><span data-stu-id="9d703-118">[**Data volume containers**](https://docs.docker.com/engine/tutorials/dockervolumes/#/creating-and-mounting-a-data-volume-container) These provide shared storage across containers, using an external container that can cycle.</span></span>

-   <span data-ttu-id="9d703-119">[**Plug-ins de volume**](https://docs.docker.com/engine/tutorials/dockervolumes/#/mount-a-shared-storage-volume-as-a-data-volume) ces monter des volumes à distance, en fournissant la persistance à long terme.</span><span class="sxs-lookup"><span data-stu-id="9d703-119">[**Volume Plugins**](https://docs.docker.com/engine/tutorials/dockervolumes/#/mount-a-shared-storage-volume-as-a-data-volume) These mount volumes to remote locations, providing long-term persistence.</span></span>

-   <span data-ttu-id="9d703-120">**Sources de données distantes** exemples incluent des bases de données SQL et non-SQL ou de mettre en cache des services tels que Redis.</span><span class="sxs-lookup"><span data-stu-id="9d703-120">**Remote data sources** Examples include SQL and NO-SQL databases or cache services like Redis.</span></span>

-   <span data-ttu-id="9d703-121">[**Le stockage Azure**](https://docs.microsoft.com/azure/storage/) ainsi un stockage de service (PaaS), qui offre le meilleur de conteneurs de persistance à long terme comme plateforme distribuable de géo-réplication.</span><span class="sxs-lookup"><span data-stu-id="9d703-121">[**Azure Storage**](https://docs.microsoft.com/azure/storage/) This provides geo distributable platform as a service (PaaS) storage, providing the best of containers as long-term persistence.</span></span>

<span data-ttu-id="9d703-122">Volumes de données sont désignés spécialement de répertoires dans un ou plusieurs conteneurs qui ignorent la [système de fichiers Union](https://docs.docker.com/v1.8/reference/glossary#union-file-system).</span><span class="sxs-lookup"><span data-stu-id="9d703-122">Data volumes are specially designated directories within one or more containers that bypass the [Union File System](https://docs.docker.com/v1.8/reference/glossary#union-file-system).</span></span> <span data-ttu-id="9d703-123">Volumes de données sont conçus pour mettre à jour les données, indépendamment du cycle de vie du conteneur.</span><span class="sxs-lookup"><span data-stu-id="9d703-123">Data volumes are designed to maintain data, independent of the container's life cycle.</span></span> <span data-ttu-id="9d703-124">Docker donc jamais supprime automatiquement les volumes lorsque vous supprimez un conteneur, ni s’il les volumes « collecter garbage » qui ne sont plus référencés par un conteneur.</span><span class="sxs-lookup"><span data-stu-id="9d703-124">Docker therefore never automatically deletes volumes when you remove a container, nor will it "garbage collect" volumes that are no longer referenced by a container.</span></span> <span data-ttu-id="9d703-125">Le système d’exploitation hôte peuvent parcourir et modifier les données dans n’importe quel volume de librement, qui est simplement une autre raison d’utiliser des volumes de données avec parcimonie.</span><span class="sxs-lookup"><span data-stu-id="9d703-125">The host operating system can browse and edit the data in any volume freely, which is just another reason to use data volumes sparingly.</span></span>

<span data-ttu-id="9d703-126">A [conteneur de volumes de données](https://docs.docker.com/v1.8/userguide/dockervolumes/) est une amélioration des volumes de données standard.</span><span class="sxs-lookup"><span data-stu-id="9d703-126">A [data volume container](https://docs.docker.com/v1.8/userguide/dockervolumes/) is an improvement over regular data volumes.</span></span> <span data-ttu-id="9d703-127">Il est en fait un conteneur dormant qui possède un ou plusieurs volumes de données créées dans cette (comme décrit précédemment).</span><span class="sxs-lookup"><span data-stu-id="9d703-127">It is essentially a dormant container that has one or more data volumes created within it (as described earlier).</span></span> <span data-ttu-id="9d703-128">Le conteneur de volumes de données fournit un accès aux conteneurs à partir d’un point de montage central.</span><span class="sxs-lookup"><span data-stu-id="9d703-128">The data volume container provides access to containers from a central mount point.</span></span> <span data-ttu-id="9d703-129">L’avantage de cette méthode d’accès est qu’il résume l’emplacement des données d’origine, qui effectue le conteneur de données à un point de montage logique.</span><span class="sxs-lookup"><span data-stu-id="9d703-129">The benefit of this method of access is that it abstracts the location of the original data, making the data container a logical mount point.</span></span> <span data-ttu-id="9d703-130">Il permet également à des conteneurs de « application » accèdent aux volumes de conteneur de données pour la création et la destruction tout en conservant les données persistantes dans un conteneur dédié.</span><span class="sxs-lookup"><span data-stu-id="9d703-130">It also allows "application" containers accessing the data container volumes to be created and destroyed while keeping the data persistent in a dedicated container.</span></span>

<span data-ttu-id="9d703-131">Figure 4-5 indique que les volumes Docker standard peuvent être placés sur un stockage hors les conteneurs eux-mêmes, mais dans les limites physiques du serveur/machine virtuelle hôte.</span><span class="sxs-lookup"><span data-stu-id="9d703-131">Figure 4-5 shows that regular Docker volumes can be placed on storage out of the containers themselves but within the host server/VM physical boundaries.</span></span> <span data-ttu-id="9d703-132">*Volumes docker n’ont pas la possibilité d’utiliser un volume à partir d’un ordinateur hôte serveur/machine virtuelle à un autre*.</span><span class="sxs-lookup"><span data-stu-id="9d703-132">*Docker volumes don't have the ability to use a volume from one host server/VM to another*.</span></span>

![](./media/image5.png)

<span data-ttu-id="9d703-133">Figure 4-5 : volumes de données et sources de données externes pour les applications de conteneurs/conteneurs</span><span class="sxs-lookup"><span data-stu-id="9d703-133">Figure 4-5: Data volumes and external data sources for containers apps/containers</span></span>

<span data-ttu-id="9d703-134">En raison de l’incapacité à gérer les données partagées entre les conteneurs qui s’exécutent sur des hôtes physiques distincts, il est recommandé de pas utiliser des volumes de données d’entreprise, sauf si l’hôte Docker est un ordinateur hôte/virtuel fixe, car lorsque vous utilisez des conteneurs Docker dans un orchestrator, conteneurs doivent être déplacées vers un autre hôte, selon les optimisations à effectuer par le cluster.</span><span class="sxs-lookup"><span data-stu-id="9d703-134">Due to the inability to manage data shared between containers that run on separate physical hosts, it is recommended that you not use volumes for business data unless the Docker host is a fixed host/VM, because when using Docker containers in an orchestrator, containers are expected to be moved from one to another host, depending on the optimizations to be performed by the cluster.</span></span>

<span data-ttu-id="9d703-135">Par conséquent, les volumes de données régulières sont un bon mécanisme pour travailler avec les fichiers de trace, fichiers temporelle ou de concept similaire qui n’affecte pas la cohérence des données métier si ou lorsque vos conteneurs sont déplacés sur plusieurs ordinateurs hôtes.</span><span class="sxs-lookup"><span data-stu-id="9d703-135">Therefore, regular data volumes are a good mechanism to work with trace files, temporal files, or any similar concept that won't affect the business data consistency if or when your containers are moved across multiple hosts.</span></span>

<span data-ttu-id="9d703-136">Comme les plug-ins de volume [Flocker](https://clusterhq.com/flocker/) fournissent des données sur tous les hôtes dans un cluster.</span><span class="sxs-lookup"><span data-stu-id="9d703-136">Volume plug-ins like [Flocker](https://clusterhq.com/flocker/) provide data across all hosts in a cluster.</span></span> <span data-ttu-id="9d703-137">Bien que pas tous les plug-ins de volume sont créés de manière égale, plug-ins de volume généralement fournir externalisés le stockage persistant fiable à partir des conteneurs immuables.</span><span class="sxs-lookup"><span data-stu-id="9d703-137">Although not all volume plug-ins are created equally, volume plug-ins typically provide externalized persistent reliable storage from the immutable containers.</span></span>

<span data-ttu-id="9d703-138">Sources de données distantes et les caches comme base de données SQL, DocumentDB ou un cache à distance comme Redis serait identique développement sans conteneurs.</span><span class="sxs-lookup"><span data-stu-id="9d703-138">Remote data sources and caches like SQL Database, DocumentDB, or a remote cache like Redis would be the same as developing without containers.</span></span> <span data-ttu-id="9d703-139">Il s’agit d’une des manières préférés et éprouvée, pour stocker les données d’application métier.</span><span class="sxs-lookup"><span data-stu-id="9d703-139">This is one of the preferred, and proven, ways to store business application data.</span></span>


>[!div class="step-by-step"]
<span data-ttu-id="9d703-140">[Précédente] (monolithique applications.md) [suivant] (soa-applications.md)</span><span class="sxs-lookup"><span data-stu-id="9d703-140">[Previous] (monolithic-applications.md) [Next] (soa-applications.md)</span></span>
