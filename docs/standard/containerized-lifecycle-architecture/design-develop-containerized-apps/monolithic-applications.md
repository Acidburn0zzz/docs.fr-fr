---
title: Applications monolithiques
description: Cycle de vie des applications Docker en conteneur avec la plateforme et les outils Microsoft
author: CESARDELATORRE
ms.author: wiwagn
ms.date: 09/22/2017
ms.openlocfilehash: fe25fa8772c60625c5564d5e7194957366a6010a
ms.sourcegitcommit: 3d5d33f384eeba41b2dff79d096f47ccc8d8f03d
ms.translationtype: MT
ms.contentlocale: fr-FR
ms.lasthandoff: 05/04/2018
ms.locfileid: "33572747"
---
# <a name="monolithic-applications"></a><span data-ttu-id="64a8f-103">Applications monolithiques</span><span class="sxs-lookup"><span data-stu-id="64a8f-103">Monolithic applications</span></span>

<span data-ttu-id="64a8f-104">Dans ce scénario, vous générez une application web unique et monolithique ou le service et déployer en tant que conteneur.</span><span class="sxs-lookup"><span data-stu-id="64a8f-104">In this scenario, you are building a single and monolithic web application or service and deploying it as a container.</span></span> <span data-ttu-id="64a8f-105">Dans l’application, la structure ne peut pas être monolithique ; Il peut comprendre plusieurs bibliothèques, composants ou même des couches (couche application, couche de domaine, couche d’accès aux données, etc.).</span><span class="sxs-lookup"><span data-stu-id="64a8f-105">Within the application, the structure might not be monolithic; it might comprise several libraries, components, or even layers (application layer, domain layer, data access layer, etc.).</span></span> <span data-ttu-id="64a8f-106">En externe, il s’agit d’un seul conteneur, comme un processus unique, seule application web ou service unique.</span><span class="sxs-lookup"><span data-stu-id="64a8f-106">Externally, it is a single container, like a single process, single web application, or single service.</span></span>

<span data-ttu-id="64a8f-107">Pour gérer ce modèle, vous déployez un seul conteneur pour représenter l’application.</span><span class="sxs-lookup"><span data-stu-id="64a8f-107">To manage this model, you deploy a single container to represent the application.</span></span> <span data-ttu-id="64a8f-108">À l’échelle, ajoutez simplement quelques copies plus avec un équilibrage de charge à l’avant.</span><span class="sxs-lookup"><span data-stu-id="64a8f-108">To scale it, just add a few more copies with a load balancer in front.</span></span> <span data-ttu-id="64a8f-109">La simplicité provient de la gestion d’un déploiement unique dans un conteneur unique ou d’un ordinateur virtuel (VM).</span><span class="sxs-lookup"><span data-stu-id="64a8f-109">The simplicity comes from managing a single deployment in a single container or virtual machine (VM).</span></span>

<span data-ttu-id="64a8f-110">Suite de l’entité de sécurité qu’un conteneur fait une chose uniquement et qu’il le fait dans un processus, le modèle monolithique est en conflit.</span><span class="sxs-lookup"><span data-stu-id="64a8f-110">Following the principal that a container does one thing only, and does it in one process, the monolithic pattern is in conflict.</span></span> <span data-ttu-id="64a8f-111">Vous pouvez inclure plusieurs composants/bibliothèques ou couches internes dans chaque conteneur, comme illustré dans la Figure 4-1.</span><span class="sxs-lookup"><span data-stu-id="64a8f-111">You can include multiple components/libraries or internal layers within each container, as illustrated in Figure 4-1.</span></span>

![](./media/image1.png)

<span data-ttu-id="64a8f-112">Figure 4-1 : exemple d’architecture d’application monolithique</span><span class="sxs-lookup"><span data-stu-id="64a8f-112">Figure 4-1: An example of monolithic application architecture</span></span>

<span data-ttu-id="64a8f-113">L’inconvénient de cette approche est fournie si ou lorsque l’application se développe, nécessitant une mise à l’échelle.</span><span class="sxs-lookup"><span data-stu-id="64a8f-113">The downside to this approach comes if or when the application grows, requiring it to scale.</span></span> <span data-ttu-id="64a8f-114">Si l’application entière est mise à l’échelle, ce n’est pas vraiment un problème.</span><span class="sxs-lookup"><span data-stu-id="64a8f-114">If the entire application scaled, it's not really a problem.</span></span> <span data-ttu-id="64a8f-115">Toutefois, dans la plupart des cas, certaines parties de l’application sont les points d’étranglement qui nécessitent la mise à l’échelle, tandis que les autres composants sont utilisés moins.</span><span class="sxs-lookup"><span data-stu-id="64a8f-115">However, in most cases, a few parts of the application are the choke points that require scaling, whereas other components are used less.</span></span>

<span data-ttu-id="64a8f-116">À l’aide de l’exemple classique de commerce électronique, cela signifie probablement qu’avez besoin est à l’échelle le composant d’informations de produit.</span><span class="sxs-lookup"><span data-stu-id="64a8f-116">Using the typical e-commerce example, what you likely need is to scale the product information component.</span></span> <span data-ttu-id="64a8f-117">Les clients qui recherchent des produits sont beaucoup plus nombreux que ceux qui en achètent.</span><span class="sxs-lookup"><span data-stu-id="64a8f-117">Many more customers browse products than purchase them.</span></span> <span data-ttu-id="64a8f-118">Plus de clients utilisent leur panier d’achat que ceux qui utilisent le pipeline de paiement.</span><span class="sxs-lookup"><span data-stu-id="64a8f-118">More customers use their basket than use the payment pipeline.</span></span> <span data-ttu-id="64a8f-119">Moins de clients ajoutent des commentaires ou consultent leur historique d’achat.</span><span class="sxs-lookup"><span data-stu-id="64a8f-119">Fewer customers add comments or view their purchase history.</span></span> <span data-ttu-id="64a8f-120">Et vous avez probablement que quelques employés, dans une région unique, qui ont besoin de gérer le contenu et les campagnes marketing.</span><span class="sxs-lookup"><span data-stu-id="64a8f-120">And you likely have only a handful of employees, in a single region, that need to manage the content and marketing campaigns.</span></span> <span data-ttu-id="64a8f-121">Par la mise à l’échelle de la conception monolithique, tout le code est déployé plusieurs fois.</span><span class="sxs-lookup"><span data-stu-id="64a8f-121">By scaling the monolithic design, all of the code is deployed multiple times.</span></span>

<span data-ttu-id="64a8f-122">En plus de la « montée en puissance-tous les éléments « nécessitent des modifications à un seul composant problème, le nouveau test complet de l’ensemble de l’application ainsi que d’un redéploiement complet de toutes les instances.</span><span class="sxs-lookup"><span data-stu-id="64a8f-122">In addition to the "scale-everything" problem, changes to a single component require complete retesting of the entire application as well as a complete redeployment of all the instances.</span></span>

<span data-ttu-id="64a8f-123">L’approche monolithique est courant, et développent avec cette méthode architecturale de nombreuses organisations.</span><span class="sxs-lookup"><span data-stu-id="64a8f-123">The monolithic approach is common, and many organizations are developing with this architectural method.</span></span> <span data-ttu-id="64a8f-124">Nombreux Profitez bon nombre insuffisant de résultats, alors que d’autres limites de rencontrer.</span><span class="sxs-lookup"><span data-stu-id="64a8f-124">Many enjoy good enough results, whereas others encounter limits.</span></span> <span data-ttu-id="64a8f-125">Nombreux conçues leurs applications dans ce modèle, car l’infrastructure et les outils ont été trop difficiles à générer SOA, et il n’a pas été voit la nécessité, jusqu'à ce que l’application a fait l’objet.</span><span class="sxs-lookup"><span data-stu-id="64a8f-125">Many designed their applications in this model because the tools and infrastructure were too difficult to build SOAs, and they didn't see the need—until the app grew.</span></span>

<span data-ttu-id="64a8f-126">Du point de vue de l’infrastructure, chaque serveur peut exécuter des applications dans le même hôte et ont un taux acceptable d’efficacité dans votre utilisation des ressources, comme indiqué dans la Figure 4-2.</span><span class="sxs-lookup"><span data-stu-id="64a8f-126">From an infrastructure perspective, each server can run many applications within the same host and have an acceptable ratio of efficiency in your resources usage, as shown in Figure 4-2.</span></span>

![](./media/image2.png)

<span data-ttu-id="64a8f-127">Figure 4-2 : un ordinateur hôte exécutant plusieurs applications/conteneurs</span><span class="sxs-lookup"><span data-stu-id="64a8f-127">Figure 4-2: A host running multiple apps/containers</span></span>

<span data-ttu-id="64a8f-128">Vous pouvez déployer des applications monolithiques dans Azure à l’aide de machines virtuelles dédiées pour chaque instance.</span><span class="sxs-lookup"><span data-stu-id="64a8f-128">You can deploy monolithic applications in Azure by using dedicated VMs for each instance.</span></span> <span data-ttu-id="64a8f-129">À l’aide de [jeux de mise à l’échelle de machine virtuelle Azure](https://docs.microsoft.com/azure/virtual-machine-scale-sets/), vous pouvez adapter facilement les machines virtuelles.</span><span class="sxs-lookup"><span data-stu-id="64a8f-129">Using [Azure VM Scale Sets](https://docs.microsoft.com/azure/virtual-machine-scale-sets/), you can scale the VMs easily.</span></span> <span data-ttu-id="64a8f-130">[Azure App Service](https://azure.microsoft.com/en-us/services/app-service/) peut également exécuter des applications monolithiques et facilement mettre à l’échelle des instances sans nécessiter une gestion des machines virtuelles.</span><span class="sxs-lookup"><span data-stu-id="64a8f-130">[Azure App Services](https://azure.microsoft.com/en-us/services/app-service/) can run monolithic applications and easily scale instances without having to manage the VMs.</span></span> <span data-ttu-id="64a8f-131">Depuis 2016, les Services d’application Azure peut exécute des instances uniques de Docker, en matière de conteneurs, ce qui simplifie le déploiement.</span><span class="sxs-lookup"><span data-stu-id="64a8f-131">Since 2016, Azure App Services can run single instances of Docker containers, as well, simplifying the deployment.</span></span> <span data-ttu-id="64a8f-132">Et, à l’aide de Docker, vous pouvez déployer une seule machine virtuelle comme un hôte Docker et exécuter plusieurs instances.</span><span class="sxs-lookup"><span data-stu-id="64a8f-132">And, using Docker, you can deploy a single VM as a Docker host and run multiple instances.</span></span> <span data-ttu-id="64a8f-133">À l’aide de l’équilibrage de Azure, comme illustré dans la Figure 4-3, vous pouvez gérer la mise à l’échelle.</span><span class="sxs-lookup"><span data-stu-id="64a8f-133">Using the Azure balancer, as illustrated in the Figure 4-3, you can manage scaling.</span></span>

![](./media/image3.png)

<span data-ttu-id="64a8f-134">Figure 4-3 : plusieurs hôtes montée en une seule application applications/conteneurs Docker</span><span class="sxs-lookup"><span data-stu-id="64a8f-134">Figure 4-3: Multiple hosts scaling-out a single Docker application apps/containers</span></span>

<span data-ttu-id="64a8f-135">Vous pouvez gérer le déploiement sur les différents hôtes via les techniques de déploiement traditionnelles.</span><span class="sxs-lookup"><span data-stu-id="64a8f-135">You can manage the deployment to the various hosts via traditional deployment techniques.</span></span> <span data-ttu-id="64a8f-136">Vous pouvez gérer les hôtes Docker à l’aide des commandes telles que `docker run` manuellement, à l’aide d’automation, tels que les pipelines de livraison continue (CD), ce qui nous expliquons plus loin dans ce livre électronique.</span><span class="sxs-lookup"><span data-stu-id="64a8f-136">You can manage Docker hosts by using commands like `docker run` manually, through automation such as Continuous Delivery (CD) pipelines, which we explain later in this e-book.</span></span>

## <a name="monolithic-application-deployed-as-a-container"></a><span data-ttu-id="64a8f-137">Application monolithique déployée comme conteneur</span><span class="sxs-lookup"><span data-stu-id="64a8f-137">Monolithic application deployed as a container</span></span>

<span data-ttu-id="64a8f-138">Il existe des avantages à utiliser des conteneurs pour gérer les déploiements monolithiques.</span><span class="sxs-lookup"><span data-stu-id="64a8f-138">There are benefits to using containers to manage monolithic deployments.</span></span> <span data-ttu-id="64a8f-139">La mise à l’échelle des instances des conteneurs est beaucoup plus rapide et facile que le déploiement de machines virtuelles supplémentaires.</span><span class="sxs-lookup"><span data-stu-id="64a8f-139">Scaling the instances of containers is far faster and easier than deploying additional VMs.</span></span> <span data-ttu-id="64a8f-140">Bien que les groupes de VM identiques sont une fonctionnalité intéressante à l’échelle de machines virtuelles, qui sont requis pour héberger vos conteneurs Docker, ils de temps configuré.</span><span class="sxs-lookup"><span data-stu-id="64a8f-140">Although VM Scale Sets are a great feature to scale VMs, which are required to host your Docker containers, they take time to set up.</span></span> <span data-ttu-id="64a8f-141">Quand une machine virtuelle est déployée en tant qu’instance de l’application, la configuration de l’application est gérée en interne par la machine virtuelle.</span><span class="sxs-lookup"><span data-stu-id="64a8f-141">When deployed as app instances, the configuration of the app is managed as part of the VM.</span></span>

<span data-ttu-id="64a8f-142">Le déploiement de mises à jour comme images Docker est beaucoup plus rapide et efficace du point de vue du réseau.</span><span class="sxs-lookup"><span data-stu-id="64a8f-142">Deploying updates as Docker images is far faster and network efficient.</span></span> <span data-ttu-id="64a8f-143">Les instances Vn peuvent être configurés sur les mêmes hôtes que vos instances Vn-1, en éliminant les coûts supplémentaires résultant des machines virtuelles supplémentaires.</span><span class="sxs-lookup"><span data-stu-id="64a8f-143">The Vn instances can be set up on the same hosts as your Vn-1 instances, eliminating added costs resulting from additional VMs.</span></span> <span data-ttu-id="64a8f-144">Les images docker démarrent généralement en secondes, ce qui accélère les déploiements.</span><span class="sxs-lookup"><span data-stu-id="64a8f-144">Docker images typically start in seconds, speeding rollouts.</span></span> <span data-ttu-id="64a8f-145">Destruction d’une instance de Docker est aussi simple que l’appel du `docker stop` commande, généralement à la fin dans moins d’une seconde.</span><span class="sxs-lookup"><span data-stu-id="64a8f-145">Tearing down a Docker instance is as easy as invoking the `docker stop` command, typically completing in less than a second.</span></span>

<span data-ttu-id="64a8f-146">Étant donné que les conteneurs sont par nature immuables, par conception, vous devez jamais à vous soucier des machines virtuelles endommagés, car vous avez oublié par un script de mise à jour pour prendre en compte une configuration spécifique ou d’un fichier restant sur le disque.</span><span class="sxs-lookup"><span data-stu-id="64a8f-146">Because containers are inherently immutable, by design, you never need to worry about corrupted VMs because an update script forgot to account for some specific configuration or file left on disk.</span></span>

<span data-ttu-id="64a8f-147">Bien que les applications monolithiques peuvent tirer parti de Docker, nous allons abordant uniquement les conseils des avantages.</span><span class="sxs-lookup"><span data-stu-id="64a8f-147">Although monolithic apps can benefit from Docker, we're touching on only the tips of the benefits.</span></span> <span data-ttu-id="64a8f-148">Les avantages de plus grandes de la gestion des conteneurs proviennent de déploiement avec orchestrators de conteneur qui gèrent les différentes instances et cycle de vie de chaque instance de conteneur.</span><span class="sxs-lookup"><span data-stu-id="64a8f-148">The larger benefits of managing containers comes from deploying with container orchestrators that manage the various instances and life cycle of each container instance.</span></span> <span data-ttu-id="64a8f-149">La décomposition de l’application monolithique en sous-systèmes qui peuvent être mis à l’échelle, développés et déployés individuellement est votre point d’entrée dans le domaine des microservices.</span><span class="sxs-lookup"><span data-stu-id="64a8f-149">Breaking up the monolithic application into subsystems that can be scaled, developed, and deployed individually is your entry point into the realm of microservices.</span></span>

## <a name="publishing-a-single-docker-container-app-to-azure-app-service"></a><span data-ttu-id="64a8f-150">Publication d’une seule application de conteneur Docker dans Azure App Service</span><span class="sxs-lookup"><span data-stu-id="64a8f-150">Publishing a single Docker container app to Azure App Service</span></span>

<span data-ttu-id="64a8f-151">Soit parce que vous voulez obtenir une validation rapide d’un conteneur déployé sur Azure ou parce que l’application est simplement une application conteneur unique, les Services d’application Azure fournit un excellent moyen de fournir des services de conteneur unique évolutives.</span><span class="sxs-lookup"><span data-stu-id="64a8f-151">Either because you want to get a quick validation of a container deployed to Azure or because the app is simply a single-container app, Azure App Services provides a great way to provide scalable single-container services.</span></span>

<span data-ttu-id="64a8f-152">À l’aide du Service d’applications Azure est intuitif et vous pouvez obtenir et exécute rapidement, car elle fournit une excellente Git intégration prendre votre code, générez-le dans Microsoft Visual Studio et déployer directement vers Azure.</span><span class="sxs-lookup"><span data-stu-id="64a8f-152">Using Azure App Service is intuitive and you can get up and running quickly because it provides great Git integration to take your code, build it in Microsoft Visual Studio, and directly deploy it to Azure.</span></span> <span data-ttu-id="64a8f-153">Mais, traditionnellement (avec aucune Docker), si vous avez besoin d’autres fonctionnalités, les infrastructures ou les dépendances qui ne sont pas pris en charge dans les Services d’application, vous nécessaire d’attendre jusqu'à ce que l’équipe Azure met à jour ces dépendances dans le Service d’applications ou basculé vers d’autres services tels que Service Fabric, Services de cloud computing ou même brut machines virtuelles, pour lequel vous avez davantage de contrôle et pourrez installer un framework ou un composant requis pour votre application.</span><span class="sxs-lookup"><span data-stu-id="64a8f-153">But, traditionally (with no Docker), if you needed other capabilities, frameworks, or dependencies that aren't supported in App Services, you needed to wait for it until the Azure team updates those dependencies in App Service or switched to other services like Service Fabric, Cloud Services, or even plain VMs, for which you have further control and can install a required component or framework for your application.</span></span>

<span data-ttu-id="64a8f-154">Désormais, cependant, (annoncé à Microsoft Connect 2016 en novembre 2016) et comme indiqué dans la Figure 4‑4, lors de l’utilisation de Visual Studio 2017, prise en charge du conteneur dans Azure App Service vous donne la possibilité d’inclure tout ce que vous voulez dans votre environnement d’application.</span><span class="sxs-lookup"><span data-stu-id="64a8f-154">Now, however, (announced at Microsoft Connect 2016 in November 2016) and as shown in Figure 4‑4, when using Visual Studio 2017, container support in Azure App Service gives you the ability to include whatever you want in your app environment.</span></span> <span data-ttu-id="64a8f-155">Si vous avez ajouté une dépendance à votre application, car vous l’exécutez dans un conteneur, vous obtenez la fonctionnalité d’intégration de ces dépendances dans votre image Dockerfile ou Docker.</span><span class="sxs-lookup"><span data-stu-id="64a8f-155">If you added a dependency to your app, because you are running it in a container, you get the capability of including those dependencies in your Dockerfile or Docker image.</span></span>

![](./media/image4.png)

<span data-ttu-id="64a8f-156">Figure 4-4 : publication d’un conteneur vers Azure App Service à partir des conteneurs/applications Visual Studio</span><span class="sxs-lookup"><span data-stu-id="64a8f-156">Figure 4-4: Publishing a container to Azure App Service from Visual Studio apps/containers</span></span>

<span data-ttu-id="64a8f-157">Figure 4-4 montre également que le flux de publication exécute un push d’une image à un Registre de conteneur, qui peut être le Registre de conteneur Azure (un Registre près à vos déploiements dans Azure et sécurisé par des comptes et groupes Azure Active Directory) ou tout autre registre Docker comme les registres de Hub d’ancrage ou localement.</span><span class="sxs-lookup"><span data-stu-id="64a8f-157">Figure 4-4 also shows that the publish flow pushes an image through a Container Registry, which can be the Azure Container Registry (a registry near to your deployments in Azure and secured by Azure Active Directory groups and accounts) or any other Docker Registry like Docker Hub or on-premises registries.</span></span>


>[!div class="step-by-step"]
<span data-ttu-id="64a8f-158">[Précédente] (commun-conteneur-design-principles.md) [suivant] (state-and-data-in-docker-applications.md)</span><span class="sxs-lookup"><span data-stu-id="64a8f-158">[Previous] (common-container-design-principles.md) [Next] (state-and-data-in-docker-applications.md)</span></span>
