---
title: Surveiller les services d’application en conteneur
description: Cycle de vie des applications Docker en conteneur avec la plateforme et les outils Microsoft
author: CESARDELATORRE
ms.author: wiwagn
ms.date: 09/22/2017
ms.openlocfilehash: 3877767117d8292644782fc07df6667931688be2
ms.sourcegitcommit: 3d5d33f384eeba41b2dff79d096f47ccc8d8f03d
ms.translationtype: MT
ms.contentlocale: fr-FR
ms.lasthandoff: 05/04/2018
ms.locfileid: "33575542"
---
# <a name="monitor-containerized-application-services"></a><span data-ttu-id="7abdf-103">Surveiller les services d’application en conteneur</span><span class="sxs-lookup"><span data-stu-id="7abdf-103">Monitor containerized application services</span></span>

<span data-ttu-id="7abdf-104">Il est essentiel pour les applications de fractionner en plusieurs conteneurs et microservices un moyen de surveiller et d’analyser le comportement de l’application.</span><span class="sxs-lookup"><span data-stu-id="7abdf-104">It is critical for applications split into multiple containers and microservices to have a way to monitor and analyze the behavior of the application.</span></span>

## <a name="microsoft-application-insights"></a><span data-ttu-id="7abdf-105">Microsoft Application Insights</span><span class="sxs-lookup"><span data-stu-id="7abdf-105">Microsoft Application Insights</span></span>

<span data-ttu-id="7abdf-106">[Application Insights](https://docs.microsoft.com/azure/application-insights/app-insights-overview) est un service d’analytique extensible qui surveille votre application en temps réel.</span><span class="sxs-lookup"><span data-stu-id="7abdf-106">[Application Insights](https://docs.microsoft.com/azure/application-insights/app-insights-overview) is an extensible analytics service that monitors your live application.</span></span> <span data-ttu-id="7abdf-107">Il vous aide à détecter et diagnostiquer les problèmes de performances et de comprendre ce que les utilisateurs effectuent avec votre application.</span><span class="sxs-lookup"><span data-stu-id="7abdf-107">It helps you to detect and diagnose performance issues and to understand what users actually do with your app.</span></span> <span data-ttu-id="7abdf-108">Il est conçu pour les développeurs, avec l’intention de vous aider à améliorer en permanence les performances et la facilité d’utilisation de vos services ou applications.</span><span class="sxs-lookup"><span data-stu-id="7abdf-108">It's designed for developers, with the intent of helping you to continuously improve the performance and usability of your services or applications.</span></span> <span data-ttu-id="7abdf-109">Application Insights fonctionne avec les services web/et autonome des applications sur un large éventail de plateformes, comme .NET, Java, Node.js et nombreuses autres plateformes, hébergé localement ou dans le cloud.</span><span class="sxs-lookup"><span data-stu-id="7abdf-109">Application Insights works with both web/services and standalone apps on a wide variety of platforms like .NET, Java, Node.js and many other platforms, hosted on-premises or in the cloud.</span></span>

### <a name="analyzing-docker-apps-in-qa-environments-using-application-insights"></a><span data-ttu-id="7abdf-110">Analyse des applications de Docker dans les environnements de questions et réponses à l’aide d’Application Insights</span><span class="sxs-lookup"><span data-stu-id="7abdf-110">Analyzing Docker apps in QA environments using Application Insights</span></span>

<span data-ttu-id="7abdf-111">En ce qui concerne les Docker, vous pouvez représenter des événements de cycle de vie et les compteurs de performances à partir des conteneurs Docker sur Application Insights.</span><span class="sxs-lookup"><span data-stu-id="7abdf-111">As it pertains to Docker, you can chart life-cycle events and performance counters from Docker containers on Application Insights.</span></span> <span data-ttu-id="7abdf-112">Vous devez simplement exécuter la [image Application Insights Docker](https://hub.docker.com/r/microsoft/applicationinsights/) comme un conteneur dans votre hôte et il affiche les compteurs de performance pour l’hôte, ainsi que pour les autres images Docker.</span><span class="sxs-lookup"><span data-stu-id="7abdf-112">You just need to run the [Application Insights Docker image](https://hub.docker.com/r/microsoft/applicationinsights/) as a container in your host, and it will display performance counters for the host as well as for the other Docker images.</span></span> <span data-ttu-id="7abdf-113">Cette image de l’Application Insights Docker (Figure 6 - 1) vous aide à surveiller vos applications en conteneur en collectant les données de télémétrie sur les performances et l’activité de l’hôte Docker (autrement dit, vos ordinateurs virtuels Linux), les conteneurs Docker et les applications en cours d’exécution au sein de celles-ci.</span><span class="sxs-lookup"><span data-stu-id="7abdf-113">This Application Insights Docker image (Figure 6-1) helps you to monitor your containerized applications by collecting telemetry about the performance and activity of your Docker host (that is, your Linux VMs), Docker containers and the applications running within them.</span></span>

![exemple](./media/image1.png)

<span data-ttu-id="7abdf-115">Figure 6-1 : Application Insights analyse les conteneurs et les hôtes de Docker</span><span class="sxs-lookup"><span data-stu-id="7abdf-115">Figure 6-1: Application Insights monitoring Docker hosts and containers</span></span>

<span data-ttu-id="7abdf-116">Lorsque vous exécutez le [image Application Insights Docker](https://hub.docker.com/r/microsoft/applicationinsights/) sur l’hôte Docker, vous pouvez :</span><span class="sxs-lookup"><span data-stu-id="7abdf-116">When you run the [Application Insights Docker image](https://hub.docker.com/r/microsoft/applicationinsights/) on your Docker host, you benefit from the following:</span></span>

-   <span data-ttu-id="7abdf-117">Cycle de vie des données de télémétrie sur tous les conteneurs en cours d’exécution sur l’ordinateur hôte, Démarrer, arrêter et ainsi de suite.</span><span class="sxs-lookup"><span data-stu-id="7abdf-117">Life-cycle telemetry about all the containers running on the host—start, stop, and so on.</span></span>

-   <span data-ttu-id="7abdf-118">Compteurs de performances pour tous les conteneurs : processeur, mémoire, l’utilisation du réseau et bien plus encore.</span><span class="sxs-lookup"><span data-stu-id="7abdf-118">Performance counters for all the containers: CPU, memory, network usage, and more.</span></span>

-   <span data-ttu-id="7abdf-119">Si vous avez installé également [Application Insights SDK](https://docs.microsoft.com/azure/application-insights/app-insights-asp-net) dans les applications en cours d’exécution dans les conteneurs, toutes les données de télémétrie de ces applications ont des propriétés supplémentaires identifier l’ordinateur hôte et de conteneur.</span><span class="sxs-lookup"><span data-stu-id="7abdf-119">If you also installed [Application Insights SDK](https://docs.microsoft.com/azure/application-insights/app-insights-asp-net) in the apps running in the containers, all the telemetry of those apps will have additional properties identifying the container and host machine.</span></span> <span data-ttu-id="7abdf-120">Ainsi, par exemple, si vous avez des instances d’une application en cours d’exécution dans plusieurs hôtes, vous facilement pourrez filtrer la télémétrie de votre application par hôte.</span><span class="sxs-lookup"><span data-stu-id="7abdf-120">So, for example, if you have instances of an app running in more than one host, you'll easily be able to filter your app telemetry by host.</span></span>

### <a name="setting-up-application-insights-to-monitor-docker-applications-and-docker-hosts"></a><span data-ttu-id="7abdf-121">Configuration d’Application Insights pour analyser les applications Docker et les hôtes de Docker</span><span class="sxs-lookup"><span data-stu-id="7abdf-121">Setting up Application Insights to monitor Docker applications and Docker hosts</span></span>

<span data-ttu-id="7abdf-122">Pour créer une ressource Application Insights, suivez les instructions fournies dans les articles présentés dans la liste qui suit.</span><span class="sxs-lookup"><span data-stu-id="7abdf-122">To create an Application Insights resource, follow the instructions in the articles presented in the list that follows.</span></span> <span data-ttu-id="7abdf-123">Portail Azure créera le script nécessaire pour vous.</span><span class="sxs-lookup"><span data-stu-id="7abdf-123">Azure Portal will create the necessary script for you.</span></span>

-   <span data-ttu-id="7abdf-124">**Analyser les applications Docker dans Application Insights :**  [https://docs.microsoft.com/azure/application-insights/app-insights-docker](https://docs.microsoft.com/azure/application-insights/app-insights-docker)</span><span class="sxs-lookup"><span data-stu-id="7abdf-124">**Monitor Docker applications in Application Insights:**  [https://docs.microsoft.com/azure/application-insights/app-insights-docker](https://docs.microsoft.com/azure/application-insights/app-insights-docker)</span></span>

-   <span data-ttu-id="7abdf-125">**Image d’application Insights Docker Hub Docker et Github :**</span><span class="sxs-lookup"><span data-stu-id="7abdf-125">**Application Insights Docker image at Docker Hub and Github:**</span></span>  
<span data-ttu-id="7abdf-126">[https://hub.docker.com/r/microsoft/applicationinsights/](https://hub.docker.com/r/microsoft/applicationinsights/) et <https://github.com/Microsoft/ApplicationInsights-Docker></span><span class="sxs-lookup"><span data-stu-id="7abdf-126">[https://hub.docker.com/r/microsoft/applicationinsights/](https://hub.docker.com/r/microsoft/applicationinsights/) and <https://github.com/Microsoft/ApplicationInsights-Docker></span></span>

-   <span data-ttu-id="7abdf-127">**Vous pouvez configurer Application Insights pour ASP.NET :**</span><span class="sxs-lookup"><span data-stu-id="7abdf-127">**Set up Application Insights for ASP.NET:**</span></span>  
[https://docs.microsoft.com/azure/application-insights/app-insights-asp-net](https://docs.microsoft.com/azure/application-insights/app-insights-asp-net)

-   <span data-ttu-id="7abdf-128">**Application Insights pour les pages web :**</span><span class="sxs-lookup"><span data-stu-id="7abdf-128">**Application Insights for web pages:**</span></span>  
<https://docs.microsoft.com/azure/application-insights/app-insights-javascript>

## <a name="microsoft-operations-management-suite"></a><span data-ttu-id="7abdf-129">Microsoft Operations Management Suite</span><span class="sxs-lookup"><span data-stu-id="7abdf-129">Microsoft Operations Management Suite</span></span>

<span data-ttu-id="7abdf-130">[Operations Management Suite](http://microsoft.com/oms) est une solution de gestion informatique simplifiée qui fournit l’analytique de journal, d’automatisation, sauvegarde et récupération de site.</span><span class="sxs-lookup"><span data-stu-id="7abdf-130">[Operations Management Suite](http://microsoft.com/oms) is a simplified IT management solution that provides log analytics, automation, backup, and site recovery.</span></span> <span data-ttu-id="7abdf-131">En fonction de [requêtes](https://blogs.technet.microsoft.com/msoms/2016/01/21/easy-microsoft-operations-management-suite-search-queries/) dans Operations Management Suite, vous pouvez augmenter [alertes](https://docs.microsoft.com/azure/operations-management-suite/operations-management-suite-monitoring-alerts) et définir la mise à jour via [Azure Automation](https://docs.microsoft.com/azure/automation/).</span><span class="sxs-lookup"><span data-stu-id="7abdf-131">Based on [queries](https://blogs.technet.microsoft.com/msoms/2016/01/21/easy-microsoft-operations-management-suite-search-queries/) in Operations Management Suite, you can raise [alerts](https://docs.microsoft.com/azure/operations-management-suite/operations-management-suite-monitoring-alerts) and set remediation via [Azure Automation](https://docs.microsoft.com/azure/automation/).</span></span> <span data-ttu-id="7abdf-132">Il intègre également en toute transparence vos solutions de gestion existant pour fournir une vue du volet verre-unique.</span><span class="sxs-lookup"><span data-stu-id="7abdf-132">It also seamlessly integrates with your existing management solutions to provide a single pane-of-glass view.</span></span> <span data-ttu-id="7abdf-133">Operations Management Suite vous aide à gérer et protéger vos locaux et d’infrastructure de cloud computing.</span><span class="sxs-lookup"><span data-stu-id="7abdf-133">Operations Management Suite helps you to manage and protect your on-premises and cloud infrastructure.</span></span>

### <a name="operations-management-suitehttpmicrosoftcomoms-container-solution-for-docker"></a><span data-ttu-id="7abdf-134">[Operations Management Suite](http://microsoft.com/oms) Solution conteneur Docker</span><span class="sxs-lookup"><span data-stu-id="7abdf-134">[Operations Management Suite](http://microsoft.com/oms) Container Solution for Docker</span></span>

<span data-ttu-id="7abdf-135">En plus de fournir des services précieux sur son propre, la Solution de conteneur Operations Management Suite pouvez gérer et surveiller des hôtes Docker et les conteneurs en affichant des informations sur l’emplacement vos conteneurs et les hôtes de conteneur, les conteneurs en cours d’exécution ou ayant échoué et les journaux de conteneur et le démon Docker envoyés à *stdout* et *stderr*.</span><span class="sxs-lookup"><span data-stu-id="7abdf-135">In addition to providing valuable services on its own, the Operations Management Suite Container Solution can manage and monitor Docker hosts and containers by showing information about where your containers and container hosts are, which containers are running or failed, and Docker daemon and container logs sent to *stdout* and *stderr*.</span></span> <span data-ttu-id="7abdf-136">Elle montre également les métriques de performances, notamment celles liées au processeur, à la mémoire, au réseau et au stockage pour le conteneur et les hôtes pour vous aider à résoudre et à trouver les conteneurs voisins bruyants.</span><span class="sxs-lookup"><span data-stu-id="7abdf-136">It also shows performance metrics such as CPU, memory, network, and storage for the container and hosts to help you troubleshoot and find noisy neighbor containers.</span></span>

![](./media/image2.png)

<span data-ttu-id="7abdf-137">Figure 6-2 : les informations sur les conteneurs Docker indiqué par Operations Management Suite</span><span class="sxs-lookup"><span data-stu-id="7abdf-137">Figure 6-2: Information about Docker containers shown by Operations Management Suite</span></span>

<span data-ttu-id="7abdf-138">Application Insights et Operations Management Suite se concentrent sur la surveillance des activités ; Toutefois, Application Insights se concentre plus sur les applications elles-mêmes grâce à son kit de développement logiciel en cours d’exécution dans l’application d’analyse.</span><span class="sxs-lookup"><span data-stu-id="7abdf-138">Application Insights and Operations Management Suite both focus on monitoring activities; however, Application Insights focuses more on monitoring the apps themselves thanks to its SDK running within the app.</span></span> <span data-ttu-id="7abdf-139">Toutefois, Operations Management Suite se concentre davantage sur l’infrastructure sur les ordinateurs hôtes, il offre en outre une analyse approfondie sur les journaux à l’échelle tout en fournissant un système très flexible piloté par les données/requête de recherche.</span><span class="sxs-lookup"><span data-stu-id="7abdf-139">However, Operations Management Suite focuses much more on the infrastructure around the hosts, plus it offers deep analysis on logs at scale while providing a very flexible data-driven search/query system.</span></span>

<span data-ttu-id="7abdf-140">Comme Operations Management Suite est implémenté comme un service basé sur le cloud, il peut être en cours d’exécution rapidement avec un investissement minimal dans les services d’infrastructure.</span><span class="sxs-lookup"><span data-stu-id="7abdf-140">Because Operations Management Suite is implemented as a cloud-based service, you can have it up and running quickly with minimal investment in infrastructure services.</span></span> <span data-ttu-id="7abdf-141">Nouvelles fonctionnalités sont fournies automatiquement, qui vous évite de maintenance continue et les coûts de mise à niveau.</span><span class="sxs-lookup"><span data-stu-id="7abdf-141">New features are delivered automatically, saving you from ongoing maintenance and upgrade costs.</span></span>

<span data-ttu-id="7abdf-142">Solution de conteneur Operations Management Suite, vous pouvez effectuer les opérations suivantes :</span><span class="sxs-lookup"><span data-stu-id="7abdf-142">Using Operations Management Suite Container Solution, you can do the following:</span></span>

-   <span data-ttu-id="7abdf-143">Centraliser et mettre en corrélation des millions de journaux à partir des conteneurs Docker à l’échelle</span><span class="sxs-lookup"><span data-stu-id="7abdf-143">Centralize and correlate millions of logs from Docker containers at scale</span></span>

-   <span data-ttu-id="7abdf-144">Afficher des informations sur tous les hôtes de conteneur dans un emplacement unique</span><span class="sxs-lookup"><span data-stu-id="7abdf-144">See information about all container hosts in a single location</span></span>

-   <span data-ttu-id="7abdf-145">Connaître les conteneurs sont en cours d’exécution, image qu’ils s’exécutent, et où ils s’exécutent</span><span class="sxs-lookup"><span data-stu-id="7abdf-145">Know which containers are running, what image they're running, and where they're running</span></span>

-   <span data-ttu-id="7abdf-146">Diagnostiquer rapidement les conteneurs de « voisin bruyant » qui peuvent entraîner des problèmes sur les ordinateurs hôtes de conteneur</span><span class="sxs-lookup"><span data-stu-id="7abdf-146">Quickly diagnose "noisy neighbor" containers that can cause problems on container hosts</span></span>

-   <span data-ttu-id="7abdf-147">Consultez une piste d’audit pour les actions sur les conteneurs</span><span class="sxs-lookup"><span data-stu-id="7abdf-147">See an audit trail for actions on containers</span></span>

-   <span data-ttu-id="7abdf-148">Résoudre les problèmes en affichant et en recherche de journaux centralisées sans la communication à distance aux ordinateurs hôtes Docker</span><span class="sxs-lookup"><span data-stu-id="7abdf-148">Troubleshoot by viewing and searching centralized logs without remoting to the Docker hosts</span></span>

-   <span data-ttu-id="7abdf-149">Rechercher des conteneurs qui peuvent être « voisin bruyant » et consomme des ressources excessives sur un ordinateur hôte</span><span class="sxs-lookup"><span data-stu-id="7abdf-149">Find containers that might be "noisy neighbors" and consuming excess resources on a host</span></span>

-   <span data-ttu-id="7abdf-150">Afficher centralisée de l’UC, mémoire, stockage et les informations de performances et d’utilisation réseau pour les conteneurs</span><span class="sxs-lookup"><span data-stu-id="7abdf-150">View centralized CPU, memory, storage, and network usage and performance information for containers</span></span>

-   <span data-ttu-id="7abdf-151">Générer des tests des conteneurs Docker avec Azure Automation</span><span class="sxs-lookup"><span data-stu-id="7abdf-151">Generate test Docker containers with Azure Automation</span></span>

<span data-ttu-id="7abdf-152">Vous pouvez voir des informations sur les performances en exécutant des requêtes comme Type = Perf, comme indiqué dans la Figure 6-3.</span><span class="sxs-lookup"><span data-stu-id="7abdf-152">You can see performance information by running queries like Type=Perf, as shown in Figure 6-3.</span></span>

![DockerPerfMetricsView](./media/image3.png)<span data-ttu-id="7abdf-154">{width="5.78625in" height="3.25in"}</span><span class="sxs-lookup"><span data-stu-id="7abdf-154">{width="5.78625in" height="3.25in"}</span></span>

<span data-ttu-id="7abdf-155">Figure 6-3 : les métriques de performances des hôtes Docker indiquées par Operations Management Suite</span><span class="sxs-lookup"><span data-stu-id="7abdf-155">Figure 6-3: Performance metrics of Docker hosts shown by Operations Management Suite</span></span>

<span data-ttu-id="7abdf-156">L’enregistrement des requêtes est également une fonctionnalité standard dans Operations Management Suite et peuvent vous aider à conserver des requêtes que vous avez trouvé utile et découvrez des tendances dans votre système.</span><span class="sxs-lookup"><span data-stu-id="7abdf-156">Saving queries is also a standard feature in Operations Management Suite and can help you keep queries you've found useful and discover trends in your system.</span></span>

<span data-ttu-id="7abdf-157">**Plus d’informations** pour trouver des solutions de conteneur dans plus d’informations sur l’installation et la configuration du Docker [Operations Management Suite](http://microsoft.com/oms), accédez à <https://docs.microsoft.com/azure/log-analytics/log-analytics-containers>.</span><span class="sxs-lookup"><span data-stu-id="7abdf-157">**More info** To find information on installing and configuring the Docker container solution in [Operations Management Suite](http://microsoft.com/oms), go to <https://docs.microsoft.com/azure/log-analytics/log-analytics-containers>.</span></span>

>[!div class="step-by-step"]
<span data-ttu-id="7abdf-158">[Précédente] (gérer-production-docker-environments.md) [suivant] (.. /Key-takeaways/index.MD)</span><span class="sxs-lookup"><span data-stu-id="7abdf-158">[Previous] (manage-production-docker-environments.md) [Next] (../key-takeaways/index.md)</span></span>
