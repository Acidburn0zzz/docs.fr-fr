---
title: "Comment : afficher des informations de date et d'heure localisées pour les utilisateurs du Web"
ms.custom: 
ms.date: 03/30/2017
ms.prod: .net
ms.reviewer: 
ms.suite: 
ms.technology: dotnet-standard
ms.tgt_pltfrm: 
ms.topic: article
helpviewer_keywords:
- formatting [.NET Framework], dates
- parsing strings [.NET Framework], date and time strings
- localization [.NET Framework], date and time displays
- formatting [.NET Framework], localized data
- displaying date and time data
- localized date displays [.NET Framework]
ms.assetid: 377fe93c-32be-421a-a30a-be639a46ede8
caps.latest.revision: "8"
author: rpetrusha
ms.author: ronpet
manager: wpickett
ms.openlocfilehash: 21493e0e0c9e42cf5efc42d86c8f126fbae9b392
ms.sourcegitcommit: 4f3fef493080a43e70e951223894768d36ce430a
ms.translationtype: HT
ms.contentlocale: fr-FR
ms.lasthandoff: 11/21/2017
---
# <a name="how-to-display-localized-date-and-time-information-to-web-users"></a><span data-ttu-id="d5c3b-102">Comment : afficher des informations de date et d'heure localisées pour les utilisateurs du Web</span><span class="sxs-lookup"><span data-stu-id="d5c3b-102">How to: Display Localized Date and Time Information to Web Users</span></span>
<span data-ttu-id="d5c3b-103">Comme une page Web peut être affichée n’importe où dans le monde, les opérations qui analysent et mettre en forme les valeurs de date et d’heure ne doivent pas compter sur un format par défaut (en général est le format de la culture locale du serveur de Web) lors de l’interaction avec l’utilisateur.</span><span class="sxs-lookup"><span data-stu-id="d5c3b-103">Because a Web page can be displayed anywhere in the world, operations that parse and format date and time values should not rely on a default format (which most often is the format of the Web server's local culture) when interacting with the user.</span></span> <span data-ttu-id="d5c3b-104">Au lieu de cela, les formulaires Web qui gèrent les date et heure d’entrée de chaînes par l’utilisateur doivent analyser les chaînes à l’aide de la culture par défaut.</span><span class="sxs-lookup"><span data-stu-id="d5c3b-104">Instead, Web forms that handle date and time strings input by the user should parse the strings using the user's preferred culture.</span></span> <span data-ttu-id="d5c3b-105">De même, les données de date et d’heure doivent être affichées à l’utilisateur dans un format conforme à la culture de l’utilisateur.</span><span class="sxs-lookup"><span data-stu-id="d5c3b-105">Similarly, date and time data should be displayed to the user in a format that conforms to the user's culture.</span></span> <span data-ttu-id="d5c3b-106">Cette rubrique montre comment procéder.</span><span class="sxs-lookup"><span data-stu-id="d5c3b-106">This topic shows how to do this.</span></span>  
  
### <a name="to-parse-date-and-time-strings-input-by-the-user"></a><span data-ttu-id="d5c3b-107">Analyse de date et heure des chaînes d’entrée par l’utilisateur</span><span class="sxs-lookup"><span data-stu-id="d5c3b-107">To parse date and time strings input by the user</span></span>  
  
1.  <span data-ttu-id="d5c3b-108">Déterminez si le tableau de chaînes retourné par la <xref:System.Web.HttpRequest.UserLanguages%2A?displayProperty=nameWithType> propriété est remplie.</span><span class="sxs-lookup"><span data-stu-id="d5c3b-108">Determine whether the string array returned by the <xref:System.Web.HttpRequest.UserLanguages%2A?displayProperty=nameWithType> property is populated.</span></span> <span data-ttu-id="d5c3b-109">Si elle n’est pas le cas, passez à l’étape 6.</span><span class="sxs-lookup"><span data-stu-id="d5c3b-109">If it is not, continue to step 6.</span></span>  
  
2.  <span data-ttu-id="d5c3b-110">Si le tableau de chaînes retourné par la <xref:System.Web.HttpRequest.UserLanguages%2A> propriété est remplie, récupérez son premier élément.</span><span class="sxs-lookup"><span data-stu-id="d5c3b-110">If the string array returned by the <xref:System.Web.HttpRequest.UserLanguages%2A> property is populated, retrieve its first element.</span></span> <span data-ttu-id="d5c3b-111">Le premier élément indique l’utilisateur par défaut ou langue et région.</span><span class="sxs-lookup"><span data-stu-id="d5c3b-111">The first element indicates the user's default or preferred language and region.</span></span>  
  
3.  <span data-ttu-id="d5c3b-112">Instancier une <xref:System.Globalization.CultureInfo> objet qui représente l’utilisateur de culture par défaut en appelant le <xref:System.Globalization.CultureInfo.%23ctor%28System.String%2CSystem.Boolean%29?displayProperty=nameWithType> constructeur.</span><span class="sxs-lookup"><span data-stu-id="d5c3b-112">Instantiate a <xref:System.Globalization.CultureInfo> object that represents the user's preferred culture by calling the <xref:System.Globalization.CultureInfo.%23ctor%28System.String%2CSystem.Boolean%29?displayProperty=nameWithType> constructor.</span></span>  
  
4.  <span data-ttu-id="d5c3b-113">Appelez le `TryParse` ou `Parse` méthode de la <xref:System.DateTime> ou <xref:System.DateTimeOffset> type pour essayer la conversion.</span><span class="sxs-lookup"><span data-stu-id="d5c3b-113">Call either the `TryParse` or the `Parse` method of the <xref:System.DateTime> or <xref:System.DateTimeOffset> type to try the conversion.</span></span> <span data-ttu-id="d5c3b-114">Utilisez une surcharge de la `TryParse` ou `Parse` méthode avec un `provider` paramètre et lui passer une des opérations suivantes :</span><span class="sxs-lookup"><span data-stu-id="d5c3b-114">Use an overload of the `TryParse` or the `Parse` method with a `provider` parameter, and pass it either of the following:</span></span>  
  
    -   <span data-ttu-id="d5c3b-115">Le <xref:System.Globalization.CultureInfo> objet créé à l’étape 3.</span><span class="sxs-lookup"><span data-stu-id="d5c3b-115">The <xref:System.Globalization.CultureInfo> object created in step 3.</span></span>  
  
    -   <span data-ttu-id="d5c3b-116">Le <xref:System.Globalization.DateTimeFormatInfo> objet qui est retourné par la <xref:System.Globalization.CultureInfo.DateTimeFormat%2A> propriété de la <xref:System.Globalization.CultureInfo> objet créé à l’étape 3.</span><span class="sxs-lookup"><span data-stu-id="d5c3b-116">The <xref:System.Globalization.DateTimeFormatInfo> object that is returned by the <xref:System.Globalization.CultureInfo.DateTimeFormat%2A> property of the <xref:System.Globalization.CultureInfo> object created in step 3.</span></span>  
  
5.  <span data-ttu-id="d5c3b-117">Si la conversion échoue, répétez les étapes 2 à 4 pour chaque élément restant dans le tableau de chaînes retournés par la <xref:System.Web.HttpRequest.UserLanguages%2A> propriété.</span><span class="sxs-lookup"><span data-stu-id="d5c3b-117">If the conversion fails, repeat steps 2 through 4 for each remaining element in the string array returned by the <xref:System.Web.HttpRequest.UserLanguages%2A> property.</span></span>  
  
6.  <span data-ttu-id="d5c3b-118">Si la conversion échoue encore ou si le tableau de chaînes retourné par la <xref:System.Web.HttpRequest.UserLanguages%2A> propriété est vide, d’analyser la chaîne à l’aide de la culture dite indifférente, qui est retourné par la <xref:System.Globalization.CultureInfo.InvariantCulture%2A?displayProperty=nameWithType> propriété.</span><span class="sxs-lookup"><span data-stu-id="d5c3b-118">If the conversion still fails or if the string array returned by the <xref:System.Web.HttpRequest.UserLanguages%2A> property is empty, parse the string by using the invariant culture, which is returned by the <xref:System.Globalization.CultureInfo.InvariantCulture%2A?displayProperty=nameWithType> property.</span></span>  
  
### <a name="to-parse-the-local-date-and-time-of-the-users-request"></a><span data-ttu-id="d5c3b-119">Analyse de la date et heure locales de la demande de l’utilisateur</span><span class="sxs-lookup"><span data-stu-id="d5c3b-119">To parse the local date and time of the user's request</span></span>  
  
1.  <span data-ttu-id="d5c3b-120">Ajouter un <xref:System.Web.UI.WebControls.HiddenField> à un formulaire Web.</span><span class="sxs-lookup"><span data-stu-id="d5c3b-120">Add a <xref:System.Web.UI.WebControls.HiddenField> control to a Web form.</span></span>  
  
2.  <span data-ttu-id="d5c3b-121">Créez une fonction JavaScript qui gère la `onClick` événement d’un `Submit` bouton en écrivant la date et l’heure et décalage du fuseau horaire local à partir du temps universel coordonné (UTC) pour le <xref:System.Web.UI.WebControls.HiddenField.Value%2A> propriété.</span><span class="sxs-lookup"><span data-stu-id="d5c3b-121">Create a JavaScript function that handles the `onClick` event of a `Submit` button by writing the current date and time and the local time zone's offset from Coordinated Universal Time (UTC) to the <xref:System.Web.UI.WebControls.HiddenField.Value%2A> property.</span></span> <span data-ttu-id="d5c3b-122">Utilisez un séparateur (par exemple, un point-virgule) pour séparer les deux composants de la chaîne.</span><span class="sxs-lookup"><span data-stu-id="d5c3b-122">Use a delimiter (such as a semicolon) to separate the two components of the string.</span></span>  
  
3.  <span data-ttu-id="d5c3b-123">Utilisez l’écran de Web <xref:System.Web.UI.Control.PreRender> flux de sortie d’événements pour injecter la fonction dans le code HTML en passant le texte du script à la <xref:System.Web.UI.ClientScriptManager.RegisterClientScriptBlock%28System.Type%2CSystem.String%2CSystem.String%2CSystem.Boolean%29?displayProperty=nameWithType> (méthode).</span><span class="sxs-lookup"><span data-stu-id="d5c3b-123">Use the Web form's <xref:System.Web.UI.Control.PreRender> event to inject the function into the HTML output stream by passing the text of the script to the <xref:System.Web.UI.ClientScriptManager.RegisterClientScriptBlock%28System.Type%2CSystem.String%2CSystem.String%2CSystem.Boolean%29?displayProperty=nameWithType> method.</span></span>  
  
4.  <span data-ttu-id="d5c3b-124">Connecter le Gestionnaire d’événements pour le `Submit` du bouton `onClick` événement en fournissant le nom de la fonction JavaScript à la `OnClientClick` attribut de la `Submit` bouton.</span><span class="sxs-lookup"><span data-stu-id="d5c3b-124">Connect the event handler to the `Submit` button's `onClick` event by providing the name of the JavaScript function to the `OnClientClick` attribute of the `Submit` button.</span></span>  
  
5.  <span data-ttu-id="d5c3b-125">Créer un gestionnaire pour le `Submit` du bouton <xref:System.Web.UI.WebControls.Button.Click> événement.</span><span class="sxs-lookup"><span data-stu-id="d5c3b-125">Create a handler for the `Submit` button's <xref:System.Web.UI.WebControls.Button.Click> event.</span></span>  
  
6.  <span data-ttu-id="d5c3b-126">Dans le Gestionnaire d’événements, déterminez si le tableau de chaînes retourné par la <xref:System.Web.HttpRequest.UserLanguages%2A?displayProperty=nameWithType> propriété est remplie.</span><span class="sxs-lookup"><span data-stu-id="d5c3b-126">In the event handler, determine whether the string array returned by the <xref:System.Web.HttpRequest.UserLanguages%2A?displayProperty=nameWithType> property is populated.</span></span> <span data-ttu-id="d5c3b-127">Si elle n’est pas le cas, passez à l’étape 14.</span><span class="sxs-lookup"><span data-stu-id="d5c3b-127">If it is not, continue to step 14.</span></span>  
  
7.  <span data-ttu-id="d5c3b-128">Si le tableau de chaînes retourné par la <xref:System.Web.HttpRequest.UserLanguages%2A> propriété est remplie, récupérez son premier élément.</span><span class="sxs-lookup"><span data-stu-id="d5c3b-128">If the string array returned by the <xref:System.Web.HttpRequest.UserLanguages%2A> property is populated, retrieve its first element.</span></span> <span data-ttu-id="d5c3b-129">Le premier élément indique l’utilisateur par défaut ou langue et région.</span><span class="sxs-lookup"><span data-stu-id="d5c3b-129">The first element indicates the user's default or preferred language and region.</span></span>  
  
8.  <span data-ttu-id="d5c3b-130">Instancier une <xref:System.Globalization.CultureInfo> objet qui représente l’utilisateur de culture par défaut en appelant le <xref:System.Globalization.CultureInfo.%23ctor%28System.String%2CSystem.Boolean%29?displayProperty=nameWithType> constructeur.</span><span class="sxs-lookup"><span data-stu-id="d5c3b-130">Instantiate a <xref:System.Globalization.CultureInfo> object that represents the user's preferred culture by calling the <xref:System.Globalization.CultureInfo.%23ctor%28System.String%2CSystem.Boolean%29?displayProperty=nameWithType> constructor.</span></span>  
  
9. <span data-ttu-id="d5c3b-131">Passez la chaîne assignée à la <xref:System.Web.UI.WebControls.HiddenField.Value%2A> propriété le <xref:System.String.Split%2A> méthode pour stocker la représentation sous forme de chaîne d’heure et date locales de l’utilisateur et la représentation sous forme de chaîne du décalage de fuseau horaire local de l’utilisateur dans les éléments de tableau séparés.</span><span class="sxs-lookup"><span data-stu-id="d5c3b-131">Pass the string assigned to the <xref:System.Web.UI.WebControls.HiddenField.Value%2A> property to the <xref:System.String.Split%2A> method to store the string representation of the user's local date and time and the string representation of the user's local time zone offset in separate array elements.</span></span>  
  
10. <span data-ttu-id="d5c3b-132">Appelez le <xref:System.DateTime.Parse%2A?displayProperty=nameWithType> ou <xref:System.DateTime.TryParse%28System.String%2CSystem.IFormatProvider%2CSystem.Globalization.DateTimeStyles%2CSystem.DateTime%40%29?displayProperty=nameWithType> méthode pour convertir la date et l’heure de demande de l’utilisateur à un <xref:System.DateTime> valeur.</span><span class="sxs-lookup"><span data-stu-id="d5c3b-132">Call either the <xref:System.DateTime.Parse%2A?displayProperty=nameWithType> or <xref:System.DateTime.TryParse%28System.String%2CSystem.IFormatProvider%2CSystem.Globalization.DateTimeStyles%2CSystem.DateTime%40%29?displayProperty=nameWithType> method to convert the date and time of the user's request to a <xref:System.DateTime> value.</span></span> <span data-ttu-id="d5c3b-133">Utilisez une surcharge de la méthode avec un `provider` paramètre et lui passer une des opérations suivantes :</span><span class="sxs-lookup"><span data-stu-id="d5c3b-133">Use an overload of the method with a `provider` parameter, and pass it either of the following:</span></span>  
  
    -   <span data-ttu-id="d5c3b-134">Le <xref:System.Globalization.CultureInfo> objet créé à l’étape 8.</span><span class="sxs-lookup"><span data-stu-id="d5c3b-134">The <xref:System.Globalization.CultureInfo> object created in step 8.</span></span>  
  
    -   <span data-ttu-id="d5c3b-135">Le <xref:System.Globalization.DateTimeFormatInfo> objet qui est retourné par la <xref:System.Globalization.CultureInfo.DateTimeFormat%2A> propriété de la <xref:System.Globalization.CultureInfo> objet créé à l’étape 8.</span><span class="sxs-lookup"><span data-stu-id="d5c3b-135">The <xref:System.Globalization.DateTimeFormatInfo> object that is returned by the <xref:System.Globalization.CultureInfo.DateTimeFormat%2A> property of the <xref:System.Globalization.CultureInfo> object created in step 8.</span></span>  
  
11. <span data-ttu-id="d5c3b-136">Si l’opération d’analyse à l’étape 10 échoue, passez à l’étape 13.</span><span class="sxs-lookup"><span data-stu-id="d5c3b-136">If the parse operation in step 10 fails, go to step 13.</span></span> <span data-ttu-id="d5c3b-137">Sinon, appelez le <xref:System.UInt32.Parse%28System.String%29?displayProperty=nameWithType> méthode pour convertir la représentation sous forme de chaîne du décalage de fuseau horaire de l’utilisateur en un entier.</span><span class="sxs-lookup"><span data-stu-id="d5c3b-137">Otherwise, call the <xref:System.UInt32.Parse%28System.String%29?displayProperty=nameWithType> method to convert the string representation of the user's time zone offset to an integer.</span></span>  
  
12. <span data-ttu-id="d5c3b-138">Instancier une <xref:System.DateTimeOffset> qui représente l’heure locale de l’utilisateur en appelant le <xref:System.DateTimeOffset.%23ctor%28System.DateTime%2CSystem.TimeSpan%29?displayProperty=nameWithType> constructeur.</span><span class="sxs-lookup"><span data-stu-id="d5c3b-138">Instantiate a <xref:System.DateTimeOffset> that represents the user's local time by calling the <xref:System.DateTimeOffset.%23ctor%28System.DateTime%2CSystem.TimeSpan%29?displayProperty=nameWithType> constructor.</span></span>  
  
13. <span data-ttu-id="d5c3b-139">Si la conversion à l’étape 10 échoue, répétez les étapes 7 à 12 pour chaque élément restant dans le tableau de chaînes retournés par la <xref:System.Web.HttpRequest.UserLanguages%2A> propriété.</span><span class="sxs-lookup"><span data-stu-id="d5c3b-139">If the conversion in step 10 fails, repeat steps 7 through 12 for each remaining element in the string array returned by the <xref:System.Web.HttpRequest.UserLanguages%2A> property.</span></span>  
  
14. <span data-ttu-id="d5c3b-140">Si la conversion échoue encore ou si le tableau de chaînes retourné par la <xref:System.Web.HttpRequest.UserLanguages%2A> propriété est vide, d’analyser la chaîne à l’aide de la culture dite indifférente, qui est retourné par la <xref:System.Globalization.CultureInfo.InvariantCulture%2A?displayProperty=nameWithType> propriété.</span><span class="sxs-lookup"><span data-stu-id="d5c3b-140">If the conversion still fails or if the string array returned by the <xref:System.Web.HttpRequest.UserLanguages%2A> property is empty, parse the string by using the invariant culture, which is returned by the <xref:System.Globalization.CultureInfo.InvariantCulture%2A?displayProperty=nameWithType> property.</span></span> <span data-ttu-id="d5c3b-141">Répétez les étapes 7 à 12.</span><span class="sxs-lookup"><span data-stu-id="d5c3b-141">Then repeat steps 7 through 12.</span></span>  
  
 <span data-ttu-id="d5c3b-142">Le résultat est un <xref:System.DateTimeOffset> objet qui représente l’heure locale de l’utilisateur de votre page Web.</span><span class="sxs-lookup"><span data-stu-id="d5c3b-142">The result is a <xref:System.DateTimeOffset> object that represents the local time of the user of your Web page.</span></span> <span data-ttu-id="d5c3b-143">Vous pouvez ensuite déterminer l’heure UTC équivalente en appelant le <xref:System.DateTimeOffset.ToUniversalTime%2A> (méthode).</span><span class="sxs-lookup"><span data-stu-id="d5c3b-143">You can then determine the equivalent UTC by calling the <xref:System.DateTimeOffset.ToUniversalTime%2A> method.</span></span> <span data-ttu-id="d5c3b-144">Vous pouvez également déterminer la date et heure équivalentes sur votre serveur Web en appelant le <xref:System.TimeZoneInfo.ConvertTime%28System.DateTimeOffset%2CSystem.TimeZoneInfo%29?displayProperty=nameWithType> (méthode) et le passage d’une valeur <xref:System.TimeZoneInfo.Local%2A?displayProperty=nameWithType> en tant que le fuseau horaire pour convertir l’heure à.</span><span class="sxs-lookup"><span data-stu-id="d5c3b-144">You can also determine the equivalent date and time on your Web server by calling the <xref:System.TimeZoneInfo.ConvertTime%28System.DateTimeOffset%2CSystem.TimeZoneInfo%29?displayProperty=nameWithType> method and passing a value of <xref:System.TimeZoneInfo.Local%2A?displayProperty=nameWithType> as the time zone to convert the time to.</span></span>  
  
## <a name="example"></a><span data-ttu-id="d5c3b-145">Exemple</span><span class="sxs-lookup"><span data-stu-id="d5c3b-145">Example</span></span>  
 <span data-ttu-id="d5c3b-146">L’exemple suivant contient la source HTML et le code d’un formulaire Web ASP.NET qui invite l’utilisateur à entrer une valeur de date et d’heure.</span><span class="sxs-lookup"><span data-stu-id="d5c3b-146">The following example contains both the HTML source and the code for an ASP.NET Web form that asks the user to input a date and time value.</span></span> <span data-ttu-id="d5c3b-147">Un script côté client écrit également des informations sur la date locales et l’heure de demande de l’utilisateur et le décalage de fuseau horaire de l’utilisateur à l’heure UTC dans un champ masqué.</span><span class="sxs-lookup"><span data-stu-id="d5c3b-147">A client-side script also writes information on the local date and time of the user's request and the offset of the user's time zone from UTC to a hidden field.</span></span> <span data-ttu-id="d5c3b-148">Cette information est ensuite analysée par le serveur, qui retourne une page Web qui affiche l’entrée d’utilisateur.</span><span class="sxs-lookup"><span data-stu-id="d5c3b-148">This information is then parsed by the server, which returns a Web page that displays the user's input.</span></span> <span data-ttu-id="d5c3b-149">Il affiche également la date et l’heure de demande de l’utilisateur à l’aide d’heure locale de l’utilisateur, l’heure sur le serveur et l’heure UTC.</span><span class="sxs-lookup"><span data-stu-id="d5c3b-149">It also displays the date and time of the user's request using the user's local time, the time on the server, and UTC.</span></span>  
  
 [!code-aspx-csharp[Formatting.HowTo.ParseDateInput#1](../../../samples/snippets/csharp/VS_Snippets_CLR/Formatting.HowTo.ParseDateInput/cs/GetDateInfo.aspx#1)]
 [!code-aspx-vb[Formatting.HowTo.ParseDateInput#1](../../../samples/snippets/visualbasic/VS_Snippets_CLR/Formatting.HowTo.ParseDateInput/vb/GetDateInfo.aspx#1)]
  
 <span data-ttu-id="d5c3b-150">Le script côté client appelle le code JavaScript `toLocaleString` (méthode).</span><span class="sxs-lookup"><span data-stu-id="d5c3b-150">The client-side script calls the JavaScript `toLocaleString` method.</span></span> <span data-ttu-id="d5c3b-151">Cela génère une chaîne qui suit les conventions de mise en forme de paramètres régionaux de l’utilisateur, ce qui est plus susceptible d’être analysée avec succès sur le serveur.</span><span class="sxs-lookup"><span data-stu-id="d5c3b-151">This produces a string that follows the formatting conventions of the user's locale, which is more likely to be successfully parsed on the server.</span></span>  
  
 <span data-ttu-id="d5c3b-152">Le <xref:System.Web.HttpRequest.UserLanguages%2A?displayProperty=nameWithType> propriété est remplie par les noms de culture qui figurent dans `Accept-Language` en-têtes inclus dans une requête HTTP.</span><span class="sxs-lookup"><span data-stu-id="d5c3b-152">The <xref:System.Web.HttpRequest.UserLanguages%2A?displayProperty=nameWithType> property is populated from the culture names that are contained in `Accept-Language` headers included in an HTTP request.</span></span> <span data-ttu-id="d5c3b-153">Toutefois, certains navigateurs n’incluent `Accept-Language` en-têtes dans leurs demandes et les utilisateurs peuvent également supprimer complètement les en-têtes.</span><span class="sxs-lookup"><span data-stu-id="d5c3b-153">However, not all browsers include `Accept-Language` headers in their requests, and users can also suppress the headers completely.</span></span> <span data-ttu-id="d5c3b-154">Il est donc important d’avoir une culture de secours lors de l’analyse de l’entrée d’utilisateur.</span><span class="sxs-lookup"><span data-stu-id="d5c3b-154">This makes it important to have a fallback culture when parsing user input.</span></span> <span data-ttu-id="d5c3b-155">En général, la culture de secours est la culture dite indifférente retournée par <xref:System.Globalization.CultureInfo.InvariantCulture%2A?displayProperty=nameWithType>.</span><span class="sxs-lookup"><span data-stu-id="d5c3b-155">Typically the fallback culture is the invariant culture returned by <xref:System.Globalization.CultureInfo.InvariantCulture%2A?displayProperty=nameWithType>.</span></span> <span data-ttu-id="d5c3b-156">Les utilisateurs peuvent également fournir Internet Explorer avec des noms de cultures qu’ils entrent dans une zone de texte, il peut arriver que les noms de cultures n’est peut-être pas valides.</span><span class="sxs-lookup"><span data-stu-id="d5c3b-156">Users can also provide Internet Explorer with culture names that they input in a text box, which creates the possibility that the culture names may not be valid.</span></span> <span data-ttu-id="d5c3b-157">Il est donc important d’utiliser la gestion des exceptions lorsque vous instanciez un <xref:System.Globalization.CultureInfo> objet.</span><span class="sxs-lookup"><span data-stu-id="d5c3b-157">This makes it important to use exception handling when instantiating a <xref:System.Globalization.CultureInfo> object.</span></span>  
  
 <span data-ttu-id="d5c3b-158">Lorsque récupérées à partir d’une requête HTTP soumise par Internet Explorer, le <xref:System.Web.HttpRequest.UserLanguages%2A?displayProperty=nameWithType> tableau est rempli par ordre de préférence de l’utilisateur.</span><span class="sxs-lookup"><span data-stu-id="d5c3b-158">When retrieved from an HTTP request submitted by Internet Explorer, the <xref:System.Web.HttpRequest.UserLanguages%2A?displayProperty=nameWithType> array is populated in order of user preference.</span></span> <span data-ttu-id="d5c3b-159">Le premier élément du tableau contient le nom de culture/région principale de l’utilisateur.</span><span class="sxs-lookup"><span data-stu-id="d5c3b-159">The first element in the array contains the name of the user's primary culture/region.</span></span> <span data-ttu-id="d5c3b-160">Si le tableau contient des éléments supplémentaires, Internet Explorer leur assigne arbitrairement un spécificateur de qualité, qui est délimité par un point-virgule à partir du nom de culture.</span><span class="sxs-lookup"><span data-stu-id="d5c3b-160">If the array contains any additional items, Internet Explorer arbitrarily assigns them a quality specifier, which is delimited from the culture name by a semicolon.</span></span> <span data-ttu-id="d5c3b-161">Par exemple, une entrée pour la culture fr-FR peut prendre la forme `fr-FR;q=0.7`.</span><span class="sxs-lookup"><span data-stu-id="d5c3b-161">For example, an entry for the fr-FR culture might take the form `fr-FR;q=0.7`.</span></span>  
  
 <span data-ttu-id="d5c3b-162">L’exemple appelle la <xref:System.Globalization.CultureInfo.%23ctor%2A> constructeur avec son `useUserOverride` paramètre la valeur `false` pour créer un nouveau <xref:System.Globalization.CultureInfo> objet.</span><span class="sxs-lookup"><span data-stu-id="d5c3b-162">The example calls the <xref:System.Globalization.CultureInfo.%23ctor%2A> constructor with its `useUserOverride` parameter set to `false` to create a new <xref:System.Globalization.CultureInfo> object.</span></span> <span data-ttu-id="d5c3b-163">Cela garantit que, si le nom de culture est le nom de culture par défaut sur le serveur, la nouvelle <xref:System.Globalization.CultureInfo> objet créé par le constructeur de classe contient les paramètres par défaut d’une culture et ne reflète pas les paramètres de substitution à l’aide du serveur  **Régional et Options de langue** application.</span><span class="sxs-lookup"><span data-stu-id="d5c3b-163">This ensures that, if the culture name is the default culture name on the server, the new <xref:System.Globalization.CultureInfo> object created by the class constructor contains a culture's default settings and does not reflect any settings overridden by using the server's **Regional and Language Options** application.</span></span> <span data-ttu-id="d5c3b-164">Les valeurs des paramètres substitués sur le serveur sont peu susceptibles d’exister sur le système de l’utilisateur ou qu’elles apparaissent dans l’entrée d’utilisateur.</span><span class="sxs-lookup"><span data-stu-id="d5c3b-164">The values from any overridden settings on the server are unlikely to exist on the user's system or to be reflected in the user's input.</span></span>  
  
 <span data-ttu-id="d5c3b-165">Étant donné que cet exemple analyse deux représentations sous forme de chaîne d’une date et d’heure (une seule entrée par l’utilisateur, l’autre est stockée dans le champ masqué), il définit les <xref:System.Globalization.CultureInfo> les objets qui peuvent être nécessaires à l’avance.</span><span class="sxs-lookup"><span data-stu-id="d5c3b-165">Because this example parses two string representations of a date and time (one input by the user, the other stored to the hidden field), it defines the possible <xref:System.Globalization.CultureInfo> objects that may be required in advance.</span></span> <span data-ttu-id="d5c3b-166">Il crée un tableau de <xref:System.Globalization.CultureInfo> objets est supérieur au nombre d’éléments retournés par la <xref:System.Web.HttpRequest.UserLanguages%2A?displayProperty=nameWithType> propriété.</span><span class="sxs-lookup"><span data-stu-id="d5c3b-166">It creates an array of <xref:System.Globalization.CultureInfo> objects that is one greater than the number of elements returned by the <xref:System.Web.HttpRequest.UserLanguages%2A?displayProperty=nameWithType> property.</span></span> <span data-ttu-id="d5c3b-167">Il instancie ensuite un <xref:System.Globalization.CultureInfo> de l’objet pour chaque chaîne de langue/région, ainsi qu’un <xref:System.Globalization.CultureInfo> objet qui représente <xref:System.Globalization.CultureInfo.InvariantCulture%2A?displayProperty=nameWithType>.</span><span class="sxs-lookup"><span data-stu-id="d5c3b-167">It then instantiates a <xref:System.Globalization.CultureInfo> object for each language/region string, and also instantiates a <xref:System.Globalization.CultureInfo> object that represents <xref:System.Globalization.CultureInfo.InvariantCulture%2A?displayProperty=nameWithType>.</span></span>  
  
 <span data-ttu-id="d5c3b-168">Votre code peut appeler le <xref:System.DateTime.Parse%2A> ou <xref:System.DateTime.TryParse%2A> méthode pour convertir la représentation sous forme de chaîne de l’utilisateur d’une date et l’heure à un <xref:System.DateTime> valeur.</span><span class="sxs-lookup"><span data-stu-id="d5c3b-168">Your code can call either the <xref:System.DateTime.Parse%2A> or the <xref:System.DateTime.TryParse%2A> method to convert the user's string representation of a date and time to a <xref:System.DateTime> value.</span></span> <span data-ttu-id="d5c3b-169">Les appels répétés à une méthode d’analyse peuvent être nécessaire pour une opération d’analyse unique.</span><span class="sxs-lookup"><span data-stu-id="d5c3b-169">Repeated calls to a parse method may be required for a single parsing operation.</span></span> <span data-ttu-id="d5c3b-170">Par conséquent, le <xref:System.DateTime.TryParse%2A> méthode est préférable car elle retourne `false` si une opération d’analyse échoue.</span><span class="sxs-lookup"><span data-stu-id="d5c3b-170">As a result, the <xref:System.DateTime.TryParse%2A> method is better because it returns `false` if a parse operation fails.</span></span> <span data-ttu-id="d5c3b-171">En revanche, la gestion des exceptions répétées pouvant être levées par le <xref:System.DateTime.Parse%2A> méthode peut être très coûteux dans une application Web.</span><span class="sxs-lookup"><span data-stu-id="d5c3b-171">In contrast, handling the repeated exceptions that may be thrown by the <xref:System.DateTime.Parse%2A> method can be a very expensive proposition in a Web application.</span></span>  
  
## <a name="compiling-the-code"></a><span data-ttu-id="d5c3b-172">Compilation du code</span><span class="sxs-lookup"><span data-stu-id="d5c3b-172">Compiling the Code</span></span>  
 <span data-ttu-id="d5c3b-173">Pour compiler le code, créez un [!INCLUDE[vstecasp](../../../includes/vstecasp-md.md)] page Web sans code-behind.</span><span class="sxs-lookup"><span data-stu-id="d5c3b-173">To compile the code, create an [!INCLUDE[vstecasp](../../../includes/vstecasp-md.md)] Web page without a code-behind.</span></span> <span data-ttu-id="d5c3b-174">Copiez ensuite l’exemple dans la page Web pour qu’il remplace tout le code existant.</span><span class="sxs-lookup"><span data-stu-id="d5c3b-174">Then copy the example into the Web page so that it replaces all the existing code.</span></span> <span data-ttu-id="d5c3b-175">Le [!INCLUDE[vstecasp](../../../includes/vstecasp-md.md)] page Web doit contenir les contrôles suivants :</span><span class="sxs-lookup"><span data-stu-id="d5c3b-175">The [!INCLUDE[vstecasp](../../../includes/vstecasp-md.md)] Web page should contain the following controls:</span></span>  
  
-   <span data-ttu-id="d5c3b-176">A <xref:System.Web.UI.WebControls.Label> contrôle, qui n’est pas référencé dans le code.</span><span class="sxs-lookup"><span data-stu-id="d5c3b-176">A <xref:System.Web.UI.WebControls.Label> control, which is not referenced in code.</span></span> <span data-ttu-id="d5c3b-177">Définir son <xref:System.Web.UI.WebControls.TextBox.Text%2A> propriété « Entrez un nombre : ».</span><span class="sxs-lookup"><span data-stu-id="d5c3b-177">Set its <xref:System.Web.UI.WebControls.TextBox.Text%2A> property to "Enter a Number:".</span></span>  
  
-   <span data-ttu-id="d5c3b-178">un contrôle <xref:System.Web.UI.WebControls.TextBox> nommé `DateString` ;</span><span class="sxs-lookup"><span data-stu-id="d5c3b-178">A <xref:System.Web.UI.WebControls.TextBox> control named `DateString`.</span></span>  
  
-   <span data-ttu-id="d5c3b-179">un contrôle <xref:System.Web.UI.WebControls.Button> nommé `OKButton` ;</span><span class="sxs-lookup"><span data-stu-id="d5c3b-179">A <xref:System.Web.UI.WebControls.Button> control named `OKButton`.</span></span> <span data-ttu-id="d5c3b-180">Définir son <xref:System.Web.UI.WebControls.Button.Text%2A> propriété sur « OK ».</span><span class="sxs-lookup"><span data-stu-id="d5c3b-180">Set its <xref:System.Web.UI.WebControls.Button.Text%2A> property to "OK".</span></span>  
  
-   <span data-ttu-id="d5c3b-181">un contrôle <xref:System.Web.UI.WebControls.HiddenField> nommé `DateInfo` ;</span><span class="sxs-lookup"><span data-stu-id="d5c3b-181">A <xref:System.Web.UI.WebControls.HiddenField> control named `DateInfo`.</span></span>  
  
## <a name="net-framework-security"></a><span data-ttu-id="d5c3b-182">Sécurité .NET Framework</span><span class="sxs-lookup"><span data-stu-id="d5c3b-182">.NET Framework Security</span></span>  
 <span data-ttu-id="d5c3b-183">Pour empêcher un utilisateur d’injection de script dans le flux de données HTML, l’entrée d’utilisateur doit jamais être répétée directement dans la réponse du serveur.</span><span class="sxs-lookup"><span data-stu-id="d5c3b-183">To prevent a user from injecting script into the HTML stream, user input should never be directly echoed back in the server response.</span></span> <span data-ttu-id="d5c3b-184">Au lieu de cela, il doit être encodé à l’aide de la <xref:System.Web.HttpServerUtility.HtmlEncode%2A?displayProperty=nameWithType> (méthode).</span><span class="sxs-lookup"><span data-stu-id="d5c3b-184">Instead, it should be encoded by using the <xref:System.Web.HttpServerUtility.HtmlEncode%2A?displayProperty=nameWithType> method.</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="d5c3b-185">Voir aussi</span><span class="sxs-lookup"><span data-stu-id="d5c3b-185">See Also</span></span>  
 [<span data-ttu-id="d5c3b-186">Exécution d’opérations de mise en forme</span><span class="sxs-lookup"><span data-stu-id="d5c3b-186">Performing Formatting Operations</span></span>](../../../docs/standard/base-types/performing-formatting-operations.md)  
 [<span data-ttu-id="d5c3b-187">Standard Date and Time Format Strings</span><span class="sxs-lookup"><span data-stu-id="d5c3b-187">Standard Date and Time Format Strings</span></span>](../../../docs/standard/base-types/standard-date-and-time-format-strings.md)  
 [<span data-ttu-id="d5c3b-188">Custom Date and Time Format Strings</span><span class="sxs-lookup"><span data-stu-id="d5c3b-188">Custom Date and Time Format Strings</span></span>](../../../docs/standard/base-types/custom-date-and-time-format-strings.md)  
 [<span data-ttu-id="d5c3b-189">Analyse de chaînes de date et d’heure</span><span class="sxs-lookup"><span data-stu-id="d5c3b-189">Parsing Date and Time Strings</span></span>](../../../docs/standard/base-types/parsing-datetime.md)
