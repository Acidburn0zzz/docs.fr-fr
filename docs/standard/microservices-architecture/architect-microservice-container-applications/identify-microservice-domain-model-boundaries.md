---
title: "Identification des limites de modèle de domaine pour chaque microservice"
description: "Architecture de Microservices .NET pour les Applications .NET en conteneur | Identification des limites de modèle de domaine pour chaque microservice"
keywords: Docker, microservices, ASP.NET, conteneur
author: CESARDELATORRE
ms.author: wiwagn
ms.date: 05/26/2017
ms.prod: .net-core
ms.technology: dotnet-docker
ms.topic: article
ms.openlocfilehash: 6fef11e5718706701abb29149c4c4a23ba39bde0
ms.sourcegitcommit: c2e216692ef7576a213ae16af2377cd98d1a67fa
ms.translationtype: HT
ms.contentlocale: fr-FR
ms.lasthandoff: 10/22/2017
---
# <a name="identify-domain-model-boundaries-for-each-microservice"></a><span data-ttu-id="18dac-104">Identifier les limites de modèle de domaine pour chaque microservice</span><span class="sxs-lookup"><span data-stu-id="18dac-104">Identify domain-model boundaries for each microservice</span></span>

<span data-ttu-id="18dac-105">Lors de l’identification des limites de modèle et de la taille de chaque microservice vise ne pas à accéder à la séparation plus granulaire possible, bien que vous devez ont tendance vers microservices small si possible.</span><span class="sxs-lookup"><span data-stu-id="18dac-105">The goal when identifying model boundaries and size for each microservice is not to get to the most granular separation possible, although you should tend toward small microservices if possible.</span></span> <span data-ttu-id="18dac-106">Au lieu de cela, votre objectif doit être pour accéder à la séparation plus significative guidée par votre connaissance du domaine.</span><span class="sxs-lookup"><span data-stu-id="18dac-106">Instead, your goal should be to get to the most meaningful separation guided by your domain knowledge.</span></span> <span data-ttu-id="18dac-107">L’accent n’est pas sur la taille, mais plutôt sur les fonctions de l’entreprise.</span><span class="sxs-lookup"><span data-stu-id="18dac-107">The emphasis is not on the size, but instead on business capabilities.</span></span> <span data-ttu-id="18dac-108">En outre, s’il existe clair cohésion nécessaire pour une certaine zone de l’application basée sur un grand nombre de dépendances, qui indique la nécessité d’un seul microservice, trop.</span><span class="sxs-lookup"><span data-stu-id="18dac-108">In addition, if there is clear cohesion needed for a certain area of the application based on a high number of dependencies, that indicates the need for a single microservice, too.</span></span> <span data-ttu-id="18dac-109">Cohésion consiste à identifier comment dissocier ou microservices ensemble de groupe.</span><span class="sxs-lookup"><span data-stu-id="18dac-109">Cohesion is a way to identify how to break apart or group together microservices.</span></span> <span data-ttu-id="18dac-110">Pour finir, alors que vous bénéficiez plus de connaissances sur le domaine, vous devez adapter la taille de votre microservice, itérative.</span><span class="sxs-lookup"><span data-stu-id="18dac-110">Ultimately, while you gain more knowledge about the domain, you should adapt the size of your microservice, iteratively.</span></span> <span data-ttu-id="18dac-111">Recherche la bonne taille n’est pas un processus Shot.</span><span class="sxs-lookup"><span data-stu-id="18dac-111">Finding the right size is not a one-shot process.</span></span>

<span data-ttu-id="18dac-112">[SAM Newman](http://samnewman.io/), un promoteur reconnu de microservices et l’auteur du livre [Microservices de construction](http://samnewman.io/books/building_microservices/), met en évidence que vous devez concevoir votre microservices basée sur le modèle de contexte délimité (BC) (partie de conception domaine), introduit précédemment.</span><span class="sxs-lookup"><span data-stu-id="18dac-112">[Sam Newman](http://samnewman.io/), a recognized promoter of microservices and author of the book [Building Microservices](http://samnewman.io/books/building_microservices/), highlights that you should design your microservices based on the Bounded Context (BC) pattern (part of domain-driven design), as introduced earlier.</span></span> <span data-ttu-id="18dac-113">Parfois, un BC peut être composée de plusieurs services physiques, mais pas vice versa.</span><span class="sxs-lookup"><span data-stu-id="18dac-113">Sometimes, a BC could be composed of several physical services, but not vice versa.</span></span>

<span data-ttu-id="18dac-114">Un modèle de domaine avec des entités de domaine spécifique s’applique dans un BC concrète ou microservice.</span><span class="sxs-lookup"><span data-stu-id="18dac-114">A domain model with specific domain entities applies within a concrete BC or microservice.</span></span> <span data-ttu-id="18dac-115">Un BC délimite la mise en application d’un modèle de domaine et le développeur de fournit les membres de l’équipe une compréhension claire et partagée de ce qui doit être cohérent et ce qui peut être développé indépendamment.</span><span class="sxs-lookup"><span data-stu-id="18dac-115">A BC delimits the applicability of a domain model and gives developer team members a clear and shared understanding of what must be cohesive and what can be developed independently.</span></span> <span data-ttu-id="18dac-116">Ce sont les mêmes objectifs de microservices.</span><span class="sxs-lookup"><span data-stu-id="18dac-116">These are the same goals for microservices.</span></span>

<span data-ttu-id="18dac-117">Est un autre outil pour informer vos choix de conception [la loi de Conway](https://en.wikipedia.org/wiki/Conway%27s_law), ce qui indique qu’une application reflètent les limites sociaux de l’organisation qui l’a produit.</span><span class="sxs-lookup"><span data-stu-id="18dac-117">Another tool that informs your design choice is [Conway’s law](https://en.wikipedia.org/wiki/Conway%27s_law), which states that an application will reflect the social boundaries of the organization that produced it.</span></span> <span data-ttu-id="18dac-118">Mais parfois le contraire est vrai, organisation de l’entreprise est formée par le logiciel.</span><span class="sxs-lookup"><span data-stu-id="18dac-118">But sometimes the opposite is true—the company’s organization is formed by the software.</span></span> <span data-ttu-id="18dac-119">Pour inverser la loi de Conway et générer les limites comme vous le souhaitez à être organisé, l’entreprise, vous devrez peut-être premiers pas dans la consultation des processus d’entreprise.</span><span class="sxs-lookup"><span data-stu-id="18dac-119">You might need to reverse Conway’s law and build the boundaries the way you want the company to be organized, leaning toward business process consulting.</span></span>

<span data-ttu-id="18dac-120">Afin d’identifier les contextes délimitées, est un modèle DDD qui peut être utilisé pour ce le [modèle de mappage de contexte](https://www.infoq.com/articles/ddd-contextmapping).</span><span class="sxs-lookup"><span data-stu-id="18dac-120">In order to identify bounded contexts, a DDD pattern that can be used for this is the [Context Mapping pattern](https://www.infoq.com/articles/ddd-contextmapping).</span></span> <span data-ttu-id="18dac-121">Mappage de contexte, vous identifiez les différents contextes dans l’application et leurs limites.</span><span class="sxs-lookup"><span data-stu-id="18dac-121">With Context Mapping, you identify the various contexts in the application and their boundaries.</span></span> <span data-ttu-id="18dac-122">Il est courant d’avoir d’un contexte différent et les limites pour chaque sous-système petite, par exemple.</span><span class="sxs-lookup"><span data-stu-id="18dac-122">It is common to have a different context and boundary for each small subsystem, for instance.</span></span> <span data-ttu-id="18dac-123">Le mappage de contexte est un moyen de définir et de rendre explicite ces limites entre domaines.</span><span class="sxs-lookup"><span data-stu-id="18dac-123">The Context Map is a way to define and make explicit those boundaries between domains.</span></span> <span data-ttu-id="18dac-124">Un BC est autonome et inclut les détails d’un domaine unique : détails comme les entités de domaine et définit les contrats d’intégration avec d’autres BCs.</span><span class="sxs-lookup"><span data-stu-id="18dac-124">A BC is autonomous and includes the details of a single domain—details like the domain entities—and defines integration contracts with other BCs.</span></span> <span data-ttu-id="18dac-125">Cela est similaire à la définition d’un microservice : il est autonome, il implémente certaines fonctionnalités de domaine et il doit fournir les interfaces.</span><span class="sxs-lookup"><span data-stu-id="18dac-125">This is similar to the definition of a microservice: it is autonomous, it implements certain domain capability, and it must provide interfaces.</span></span> <span data-ttu-id="18dac-126">C’est pourquoi le mappage de contexte et le modèle de contexte de délimitée sont une bonne approche pour identifier les limites de modèle de domaine de votre microservices.</span><span class="sxs-lookup"><span data-stu-id="18dac-126">This is why Context Mapping and the Bounded Context pattern are good approaches for identifying the domain model boundaries of your microservices.</span></span>

<span data-ttu-id="18dac-127">Lorsque vous concevez une application volumineuse, vous verrez comment son modèle de domaine peut être fragmenté, un expert du domaine du domaine de catalogue nommera entités différemment dans les domaines de catalogue et d’inventaire à un domaine d’expédition expert, pour l’instance.</span><span class="sxs-lookup"><span data-stu-id="18dac-127">When designing a large application, you will see how its domain model can be fragmented — a domain expert from the catalog domain will name entities differently in the catalog and inventory domains than a shipping domain expert, for instance.</span></span> <span data-ttu-id="18dac-128">Ou l’entité de domaine utilisateur peut-être être différente de la taille et le nombre d’attributs lorsque vous traitez avec un expert CRM qui souhaitent stocker tous les détails sur le client que pour un tri expert de domaine qui a besoin uniquement des données partielles sur le client.</span><span class="sxs-lookup"><span data-stu-id="18dac-128">Or the user domain entity might be different in size and number of attributes when dealing with a CRM expert who wants to store every detail about the customer than for an ordering domain expert who just needs partial data about the customer.</span></span> <span data-ttu-id="18dac-129">Il est très difficile à lever l’ambiguïté de tous les termes de domaine dans tous les domaines liés à une application volumineuse.</span><span class="sxs-lookup"><span data-stu-id="18dac-129">It is very hard to disambiguate all domain terms across all the domains related to a large application.</span></span> <span data-ttu-id="18dac-130">Mais le plus important est que vous ne devriez pas unifier les termes du contrat ; au lieu de cela, acceptez les différences et la richesse fournies par chaque domaine.</span><span class="sxs-lookup"><span data-stu-id="18dac-130">But the most important thing is that you should not try to unify the terms; instead, accept the differences and richness provided by each domain.</span></span> <span data-ttu-id="18dac-131">Si vous essayez d’une base de données unifié pour l’application entière, tentatives d’un vocabulaire unifié seront difficiles et ne seront pas son droit à un des experts en plusieurs domaines.</span><span class="sxs-lookup"><span data-stu-id="18dac-131">If you try to have a unified database for the whole application, attempts at a unified vocabulary will be awkward and will not sound right to any of the multiple domain experts.</span></span> <span data-ttu-id="18dac-132">Par conséquent, BCs (implémentés en tant que microservices) vous aidera à clarifier où vous pouvez utiliser certains des termes de domaine, et où vous devez fractionner le système et de créer des BCs supplémentaires avec des domaines différents.</span><span class="sxs-lookup"><span data-stu-id="18dac-132">Therefore, BCs (implemented as microservices) will help you to clarify where you can use certain domain terms and where you will need to split the system and create additional BCs with different domains.</span></span>

<span data-ttu-id="18dac-133">Vous savez que vous avez obtenu les limites de droite et les tailles de chaque BC et modèle de domaine si vous avez plusieurs relations fortes entre les modèles de domaine, et que vous ne sont généralement pas besoin fusionner les informations provenant de plusieurs modèles de domaine lors de l’exécution d’applications standard opérations.</span><span class="sxs-lookup"><span data-stu-id="18dac-133">You will know that you got the right boundaries and sizes of each BC and domain model if you have few strong relationships between domain models, and you do not usually need to merge information from multiple domain models when performing typical application operations.</span></span>

<span data-ttu-id="18dac-134">Peut-être la meilleure réponse à la question de la taille que doit être un modèle de domaine pour chaque microservice est le suivant : elle doit avoir un BC autonome, comme isolé que possible, ce qui vous permet de travailler sans avoir à basculer constamment à d’autres contextes (autre modèles de microservice).</span><span class="sxs-lookup"><span data-stu-id="18dac-134">Perhaps the best answer to the question of how big a domain model for each microservice should be is the following: it should have an autonomous BC, as isolated as possible, that enables you to work without having to constantly switch to other contexts (other microservice’s models).</span></span> <span data-ttu-id="18dac-135">Dans la Figure 4-10, vous pouvez voir comment plusieurs microservices (plusieurs BCs) chaque ont leur propre modèle et comment les entités peuvent être définies, selon les exigences spécifiques de chacun des domaines identifiés dans votre application.</span><span class="sxs-lookup"><span data-stu-id="18dac-135">In Figure 4-10 you can see how multiple microservices (multiple BCs) each have their own model and how their entities can be defined, depending on the specific requirements for each of the identified domains in your application.</span></span>

![](./media/image10.png)

<span data-ttu-id="18dac-136">**Figure 4-10**.</span><span class="sxs-lookup"><span data-stu-id="18dac-136">**Figure 4-10**.</span></span> <span data-ttu-id="18dac-137">Identification des entités et des limites de microservice modèle</span><span class="sxs-lookup"><span data-stu-id="18dac-137">Identifying entities and microservice model boundaries</span></span>

<span data-ttu-id="18dac-138">Figure 4-10 illustre un exemple de scénario lié à un système de gestion de conférence en ligne.</span><span class="sxs-lookup"><span data-stu-id="18dac-138">Figure 4-10 illustrates a sample scenario related to an online conference management system.</span></span> <span data-ttu-id="18dac-139">Vous avez identifié plusieurs BCs qui pourrait être implémentés en tant que microservices, basé sur les domaines définis par des experts du domaine pour vous.</span><span class="sxs-lookup"><span data-stu-id="18dac-139">You have identified several BCs that could be implemented as microservices, based on domains that domain experts defined for you.</span></span> <span data-ttu-id="18dac-140">Comme vous pouvez le voir, il existe des entités qui sont présentes uniquement dans un modèle de microservice unique, comme les paiements dans le paiement de microservice.</span><span class="sxs-lookup"><span data-stu-id="18dac-140">As you can see, there are entities that are present just in a single microservice model, like Payments in the Payment microservice.</span></span> <span data-ttu-id="18dac-141">Celles sera faciles à implémenter.</span><span class="sxs-lookup"><span data-stu-id="18dac-141">Those will be easy to implement.</span></span>

<span data-ttu-id="18dac-142">Toutefois, vous pouvez également disposer des entités qui ont une forme différente, mais partagent la même identité différents plusieurs modèles de domaine à partir de la microservices plusieurs.</span><span class="sxs-lookup"><span data-stu-id="18dac-142">However, you might also have entities that have a different shape but share the same identity across the multiple domain models from the multiple microservices.</span></span> <span data-ttu-id="18dac-143">Par exemple, l’entité d’utilisateur est identifiée dans la gestion de conférences microservice.</span><span class="sxs-lookup"><span data-stu-id="18dac-143">For example, the User entity is identified in the Conferences Management microservice.</span></span> <span data-ttu-id="18dac-144">Ce même utilisateur, avec la même identité est celui nommé acheteurs dans le classement microservice, ou celui nommé Payer dans le paiement microservice et même l’un nommé client dans le Service clientèle de microservice.</span><span class="sxs-lookup"><span data-stu-id="18dac-144">That same user, with the same identity, is the one named Buyers in the Ordering microservice, or the one named Payer in the Payment microservice, and even the one named Customer in the Customer Service microservice.</span></span> <span data-ttu-id="18dac-145">C’est pourquoi, en fonction de la [langage omniprésent](https://martinfowler.com/bliki/UbiquitousLanguage.html) qu’à l’aide de chaque expert du domaine, un utilisateur peut avoir une perspective différente, même avec des attributs différents.</span><span class="sxs-lookup"><span data-stu-id="18dac-145">This is because, depending on the [ubiquitous language](https://martinfowler.com/bliki/UbiquitousLanguage.html) that each domain expert is using, a user might have a different perspective even with different attributes.</span></span> <span data-ttu-id="18dac-146">L’entité d’utilisateur dans le modèle de microservice nommé conférences Management peut-être la plupart de ses attributs de données personnelles.</span><span class="sxs-lookup"><span data-stu-id="18dac-146">The user entity in the microservice model named Conferences Management might have most of its personal data attributes.</span></span> <span data-ttu-id="18dac-147">Toutefois, ce même utilisateur dans la forme de Payer dans le paiement de microservice ou dans la forme du client dans le Service clientèle de microservice devrez peut-être pas la même liste d’attributs.</span><span class="sxs-lookup"><span data-stu-id="18dac-147">However, that same user in the shape of Payer in the microservice Payment or in the shape of Customer in the microservice Customer Service might not need the same list of attributes.</span></span>

<span data-ttu-id="18dac-148">Une approche similaire est illustrée dans la Figure 4-11.</span><span class="sxs-lookup"><span data-stu-id="18dac-148">A similar approach is illustrated in Figure 4-11.</span></span>

![](./media/image11.png)

<span data-ttu-id="18dac-149">**Figure 4-11**.</span><span class="sxs-lookup"><span data-stu-id="18dac-149">**Figure 4-11**.</span></span> <span data-ttu-id="18dac-150">Décomposition des modèles de données traditionnelles en plusieurs modèles de domaine</span><span class="sxs-lookup"><span data-stu-id="18dac-150">Decomposing traditional data models into multiple domain models</span></span>

<span data-ttu-id="18dac-151">Vous pouvez voir comment l’utilisateur est présent dans le modèle de microservice conférences gestion en tant que l’entité d’utilisateur et est également présent dans le formulaire de l’entité de l’acheteur dans le microservice de tarification, avec les autres attributs ou des détails relatifs à l’utilisateur lorsqu’il est en fait un acheteur.</span><span class="sxs-lookup"><span data-stu-id="18dac-151">You can see how the user is present in the Conferences Management microservice model as the User entity and is also present in the form of the Buyer entity in the Pricing microservice, with alternate attributes or details about the user when it is actually a buyer.</span></span> <span data-ttu-id="18dac-152">Chaque microservice ou la BC peut-être pas toutes les données relatives à une entité d’utilisateur, une partie seulement de celui-ci, selon le problème à résoudre ou le contexte.</span><span class="sxs-lookup"><span data-stu-id="18dac-152">Each microservice or BC might not need all the data related to a User entity, just part of it, depending on the problem to solve or the context.</span></span> <span data-ttu-id="18dac-153">Par exemple, dans le modèle de microservice tarification, il est inutile l’adresse ou l’ID de l’utilisateur, simplement ID (en tant qu’identité) et l’état, ce qui aura un impact sur les remises lors de la tarification des sièges par acheteur.</span><span class="sxs-lookup"><span data-stu-id="18dac-153">For instance, in the Pricing microservice model, you do not need the address or the ID of the user, just ID (as identity) and Status, which will have an impact on discounts when pricing the seats per buyer.</span></span>

<span data-ttu-id="18dac-154">L’entité siège a le même nom mais des attributs dans chaque modèle de domaine.</span><span class="sxs-lookup"><span data-stu-id="18dac-154">The Seat entity has the same name but different attributes in each domain model.</span></span> <span data-ttu-id="18dac-155">Toutefois, les partages de siège identité basée sur le même ID, que se passe-t-il avec l’utilisateur et l’acheteur.</span><span class="sxs-lookup"><span data-stu-id="18dac-155">However, Seat shares identity based on the same ID, as happens with User and Buyer.</span></span>

<span data-ttu-id="18dac-156">En fait, il est un concept partagé d’un utilisateur qui existe dans plusieurs services (domaines), qui partagent l’identité de cet utilisateur.</span><span class="sxs-lookup"><span data-stu-id="18dac-156">Basically, there is a shared concept of a user that exists in multiple services (domains), which all share the identity of that user.</span></span> <span data-ttu-id="18dac-157">Il existe cependant dans chaque modèle de domaine supplémentaires ou différents détails sur l’entité d’utilisateur.</span><span class="sxs-lookup"><span data-stu-id="18dac-157">But in each domain model there might be additional or different details about the user entity.</span></span> <span data-ttu-id="18dac-158">Par conséquent, il doit exister un moyen de mapper une entité d’utilisateur d’un domaine (microservice) à un autre.</span><span class="sxs-lookup"><span data-stu-id="18dac-158">Therefore, there needs to be a way to map a user entity from one domain (microservice) to another.</span></span>

<span data-ttu-id="18dac-159">Il existe plusieurs avantages à partage ne pas la même entité d’utilisateur avec le même nombre d’attributs entre les domaines.</span><span class="sxs-lookup"><span data-stu-id="18dac-159">There are several benefits to not sharing the same user entity with the same number of attributes across domains.</span></span> <span data-ttu-id="18dac-160">L’un des avantages sont pour réduire la duplication, afin que les modèles de microservice n’ont pas toutes les données qui n’a pas besoin.</span><span class="sxs-lookup"><span data-stu-id="18dac-160">One benefit is to reduce duplication, so that microservice models do not have any data that they do not need.</span></span> <span data-ttu-id="18dac-161">Un autre avantage rencontre un microservice maître qui possède un certain type de données par entité afin que les mises à jour et les requêtes pour ce type de données sont établies uniquement par ce microservice.</span><span class="sxs-lookup"><span data-stu-id="18dac-161">Another benefit is having a master microservice that owns a certain type of data per entity so that updates and queries for that type of data are driven only by that microservice.</span></span>


>[!div class="step-by-step"]
<span data-ttu-id="18dac-162">[Précédente] (distributed-données-management.md) [suivant] (direct-client-to-microservice-communication-versus-the-api-gateway-pattern.md)</span><span class="sxs-lookup"><span data-stu-id="18dac-162">[Previous] (distributed-data-management.md) [Next] (direct-client-to-microservice-communication-versus-the-api-gateway-pattern.md)</span></span>
