---
title: "Conception d’une application orientée de microservice"
description: "Architecture de Microservices .NET pour les Applications .NET en conteneur | Conception d’une application orientée de microservice"
keywords: Docker, microservices, ASP.NET, conteneur
author: CESARDELATORRE
ms.author: wiwagn
ms.date: 05/26/2017
ms.prod: .net-core
ms.technology: dotnet-docker
ms.topic: article
ms.openlocfilehash: 1e1dc919c7e35580576c86b4cf9872b4f8cea2c2
ms.sourcegitcommit: c2e216692ef7576a213ae16af2377cd98d1a67fa
ms.translationtype: HT
ms.contentlocale: fr-FR
ms.lasthandoff: 10/22/2017
---
# <a name="designing-a-microservice-oriented-application"></a><span data-ttu-id="c97ae-104">Conception d’une application orientée de microservice</span><span class="sxs-lookup"><span data-stu-id="c97ae-104">Designing a microservice-oriented application</span></span>

<span data-ttu-id="c97ae-105">Cette section se concentre sur le développement d’une application hypothétique côté serveur enterprise.</span><span class="sxs-lookup"><span data-stu-id="c97ae-105">This section focuses on developing a hypothetical server-side enterprise application.</span></span>

## <a name="application-specifications"></a><span data-ttu-id="c97ae-106">Spécifications de l’application</span><span class="sxs-lookup"><span data-stu-id="c97ae-106">Application specifications</span></span>

<span data-ttu-id="c97ae-107">L’application hypothétique gère les requêtes par l’exécution de la logique métier, l’accès aux bases de données, puis de retourner les réponses XML, JSON ou HTML.</span><span class="sxs-lookup"><span data-stu-id="c97ae-107">The hypothetical application handles requests by executing business logic, accessing databases, and then returning HTML, JSON, or XML responses.</span></span> <span data-ttu-id="c97ae-108">Disons que l’application doit prendre en charge un éventail de clients, y compris les navigateurs de bureau exécutant des Applications à Page unique (ZPS), les applications web classiques, les applications web mobiles et des applications mobiles natives.</span><span class="sxs-lookup"><span data-stu-id="c97ae-108">We will say that the application must support a variety of clients, including desktop browsers running Single Page Applications (SPAs), traditional web apps, mobile web apps, and native mobile apps.</span></span> <span data-ttu-id="c97ae-109">L’application peut exposer également une API à des tiers à consommer.</span><span class="sxs-lookup"><span data-stu-id="c97ae-109">The application might also expose an API for third parties to consume.</span></span> <span data-ttu-id="c97ae-110">Il doit également être en mesure d’intégrer de façon asynchrone, de son microservices ou les applications externes afin que la méthode permet de résilience de la microservices en cas de défaillance partielle.</span><span class="sxs-lookup"><span data-stu-id="c97ae-110">It should also be able to integrate its microservices or external applications asynchronously, so that approach will help resiliency of the microservices in the case of partial failures.</span></span>

<span data-ttu-id="c97ae-111">L’application se compose de ces types de composants :</span><span class="sxs-lookup"><span data-stu-id="c97ae-111">The application will consist of these types of components:</span></span>

-   <span data-ttu-id="c97ae-112">Composants de la présentation.</span><span class="sxs-lookup"><span data-stu-id="c97ae-112">Presentation components.</span></span> <span data-ttu-id="c97ae-113">Ceux-ci sont responsables de la gestion de l’interface utilisateur et la consommation de services à distance.</span><span class="sxs-lookup"><span data-stu-id="c97ae-113">These are responsible for handling the UI and consuming remote services.</span></span>

-   <span data-ttu-id="c97ae-114">Logique de domaine ou d’entreprise.</span><span class="sxs-lookup"><span data-stu-id="c97ae-114">Domain or business logic.</span></span> <span data-ttu-id="c97ae-115">Il s’agit d’une logique de domaine de l’application.</span><span class="sxs-lookup"><span data-stu-id="c97ae-115">This is the application’s domain logic.</span></span>

-   <span data-ttu-id="c97ae-116">Logique d’accès de base de données.</span><span class="sxs-lookup"><span data-stu-id="c97ae-116">Database access logic.</span></span> <span data-ttu-id="c97ae-117">Il s’agit de composants d’accès aux données responsable de l’accès aux bases de données (SQL ou NoSQL).</span><span class="sxs-lookup"><span data-stu-id="c97ae-117">This consists of data access components responsible for accessing databases (SQL or NoSQL).</span></span>

-   <span data-ttu-id="c97ae-118">Logique de l’intégration d’application.</span><span class="sxs-lookup"><span data-stu-id="c97ae-118">Application integration logic.</span></span> <span data-ttu-id="c97ae-119">Cela inclut un canal de messagerie, principalement en fonction de brokers de message.</span><span class="sxs-lookup"><span data-stu-id="c97ae-119">This includes a messaging channel, mainly based on message brokers.</span></span>

<span data-ttu-id="c97ae-120">L’application demandera une haute évolutivité, tout en autorisant son sous-systèmes verticales montée en puissance parallèle de manière autonome, car certains sous-systèmes nécessitera plus grande que d’autres.</span><span class="sxs-lookup"><span data-stu-id="c97ae-120">The application will require high scalability, while allowing its vertical subsystems to scale out autonomously, because certain subsystems will require more scalability than others.</span></span>

<span data-ttu-id="c97ae-121">L’application doit pouvoir être déployée dans plusieurs environnements d’infrastructure (plusieurs clouds publics et locaux) et doit idéalement être inter-plateformes, la possibilité de déplacer facilement à partir de Linux vers Windows (ou vice versa).</span><span class="sxs-lookup"><span data-stu-id="c97ae-121">The application must be able to be deployed in multiple infrastructure environments (multiple public clouds and on-premises) and ideally should be cross-platform, able to move from Linux to Windows (or vice versa) easily.</span></span>

## <a name="development-team-context"></a><span data-ttu-id="c97ae-122">Contexte d’équipe de développement</span><span class="sxs-lookup"><span data-stu-id="c97ae-122">Development team context</span></span>

<span data-ttu-id="c97ae-123">Nous supposons également les éléments suivants concernant le processus de développement de l’application :</span><span class="sxs-lookup"><span data-stu-id="c97ae-123">We also assume the following about the development process for the application:</span></span>

-   <span data-ttu-id="c97ae-124">Vous avez plusieurs équipes de développement en mettant l’accent sur différents domaines d’activité de l’application.</span><span class="sxs-lookup"><span data-stu-id="c97ae-124">You have multiple dev teams focusing on different business areas of the application.</span></span>

-   <span data-ttu-id="c97ae-125">Membres de l’équipe doivent être plus productifs rapidement, et l’application doit être facile à comprendre et à modifier.</span><span class="sxs-lookup"><span data-stu-id="c97ae-125">New team members must become productive quickly, and the application must be easy to understand and modify.</span></span>

-   <span data-ttu-id="c97ae-126">L’application aura une évolution à long terme et l’évolution des règles d’entreprise.</span><span class="sxs-lookup"><span data-stu-id="c97ae-126">The application will have a long-term evolution and ever-changing business rules.</span></span>

-   <span data-ttu-id="c97ae-127">Vous avez besoin d’une bonne maintenabilité à long terme, qui implique l’agilité lors de l’implémentation de nouvelles modifications à l’avenir tout en étant en mesure de mettre à jour plusieurs sous-systèmes avec un impact minimal sur les autres sous-systèmes.</span><span class="sxs-lookup"><span data-stu-id="c97ae-127">You need good long-term maintainability, which means having agility when implementing new changes in the future while being able to update multiple subsystems with minimum impact on the other subsystems.</span></span>

-   <span data-ttu-id="c97ae-128">Vous souhaitez intégration continue de pratique et de déploiement continu de l’application.</span><span class="sxs-lookup"><span data-stu-id="c97ae-128">You want to practice continuous integration and continuous deployment of the application.</span></span>

-   <span data-ttu-id="c97ae-129">Vous souhaitez tirer parti des nouvelles technologies (infrastructures, langages de programmation, etc.) lors de l’évolution de l’application.</span><span class="sxs-lookup"><span data-stu-id="c97ae-129">You want to take advantage of emerging technologies (frameworks, programming languages, etc.) while evolving the application.</span></span> <span data-ttu-id="c97ae-130">Vous ne souhaitez pas effectuer une migration complète de l’application lors du déplacement vers de nouvelles technologies, car qui serait entraîner des coûts élevés et avoir un impact sur la prévisibilité et la stabilité de l’application.</span><span class="sxs-lookup"><span data-stu-id="c97ae-130">You do not want to make full migrations of the application when moving to new technologies, because that would result in high costs and impact the predictability and stability of the application.</span></span>

## <a name="choosing-an-architecture"></a><span data-ttu-id="c97ae-131">Choix d’une architecture</span><span class="sxs-lookup"><span data-stu-id="c97ae-131">Choosing an architecture</span></span>

<span data-ttu-id="c97ae-132">Quelle doit être l’architecture de déploiement d’application ?</span><span class="sxs-lookup"><span data-stu-id="c97ae-132">What should the application deployment architecture be?</span></span> <span data-ttu-id="c97ae-133">Les spécifications de l’application, ainsi que le contexte de développement, recommandons vivement que vous devez organiser l’application en décomposant en sous-systèmes autonomes sous la forme de microservices de collaboration et de conteneurs, où un microservice. est un conteneur.</span><span class="sxs-lookup"><span data-stu-id="c97ae-133">The specifications for the application, along with the development context, strongly suggest that you should architect the application by decomposing it into autonomous subsystems in the form of collaborating microservices and containers, where a microservice is a container.</span></span>

<span data-ttu-id="c97ae-134">Dans cette approche, chaque service (conteneur) implémente un ensemble de fonctions connexes avec précision et en cohésion.</span><span class="sxs-lookup"><span data-stu-id="c97ae-134">In this approach, each service (container) implements a set of cohesive and narrowly related functions.</span></span> <span data-ttu-id="c97ae-135">Par exemple, une application peut consister en des services tels que le service de catalogue, ordre de service, service de panier d’achat, service de profil utilisateur, etc..</span><span class="sxs-lookup"><span data-stu-id="c97ae-135">For example, an application might consist of services such as the catalog service, ordering service, basket service, user profile service, etc.</span></span>

<span data-ttu-id="c97ae-136">Microservices communiquer à l’aide de protocoles tels que HTTP (REST), mais également de façon asynchrone (c'est-à-dire AMQP) dès que possible, en particulier lorsque propagation des mises à jour avec les événements d’intégration.</span><span class="sxs-lookup"><span data-stu-id="c97ae-136">Microservices communicate using protocols such as HTTP (REST), but also asynchronously (that is AMQP) whenever possible, especially when propagating updates with integration events.</span></span>

<span data-ttu-id="c97ae-137">Microservices sont développés et déployés en tant que conteneurs indépendamment les unes des autres.</span><span class="sxs-lookup"><span data-stu-id="c97ae-137">Microservices are developed and deployed as containers independently of one another.</span></span> <span data-ttu-id="c97ae-138">Cela signifie qu’une équipe de développement peut être développement et le déploiement d’un certain microservice sans affecter d’autres sous-systèmes.</span><span class="sxs-lookup"><span data-stu-id="c97ae-138">This means that a development team can be developing and deploying a certain microservice without impacting other subsystems.</span></span>

<span data-ttu-id="c97ae-139">Chaque microservice possède sa propre base de données, ce qui permet de découpler complètement à partir d’autres microservices.</span><span class="sxs-lookup"><span data-stu-id="c97ae-139">Each microservice has its own database, allowing it to be fully decoupled from other microservices.</span></span> <span data-ttu-id="c97ae-140">Lorsque cela est nécessaire, la cohérence entre les bases de données à partir de différents microservices est obtenue à l’aide d’événements d’intégration au niveau de l’application (via un bus d’événements logique), comme géré dans la commande et de répartition de responsabilité de requête (CQRS).</span><span class="sxs-lookup"><span data-stu-id="c97ae-140">When necessary, consistency between databases from different microservices is achieved using application-level integration events (through a logical event bus), as handled in Command and Query Responsibility Segregation (CQRS).</span></span> <span data-ttu-id="c97ae-141">Par conséquent, les contraintes de l’entreprise doivent adopter la cohérence éventuelle entre le microservices plusieurs et bases de données associées.</span><span class="sxs-lookup"><span data-stu-id="c97ae-141">Because of that, the business constraints must embrace eventual consistency between the multiple microservices and related databases.</span></span>

### <a name="eshoponcontainers-a-reference-application-for-net-core-and-microservices-deployed-using-containers"></a><span data-ttu-id="c97ae-142">eShopOnContainers : une application de référence pour le .NET Core et microservices déployé à l’aide de conteneurs</span><span class="sxs-lookup"><span data-stu-id="c97ae-142">eShopOnContainers: A reference application for .NET Core and microservices deployed using containers</span></span>

<span data-ttu-id="c97ae-143">Afin de pouvoir vous concentrer sur l’architecture et les technologies au lieu de réfléchir à un domaine d’entreprise hypothetic que vous ne savez ne peut-être pas, nous avons sélectionné un domaine d’entreprise connue, à savoir, une application de commerce électronique simplifiée (Boutique) qui présente un catalogue de les produits, prend des commandes à partir de clients, vérifie le stock et effectue d’autres fonctions d’entreprise.</span><span class="sxs-lookup"><span data-stu-id="c97ae-143">So that you can focus on the architecture and technologies instead of thinking about a hypothetic business domain that you might not know, we have selected a well-known business domain—namely, a simplified e-commerce (e-shop) application that presents a catalog of products, takes orders from customers, verifies inventory, and performs other business functions.</span></span> <span data-ttu-id="c97ae-144">Ce code de la source d’application basée sur le conteneur est disponible dans le [eShopOnContainers](http://aka.ms/MicroservicesArchitecture) référentiel GitHub.</span><span class="sxs-lookup"><span data-stu-id="c97ae-144">This container-based application source code is available in the [eShopOnContainers](http://aka.ms/MicroservicesArchitecture) GitHub repo.</span></span>

<span data-ttu-id="c97ae-145">L’application se compose de plusieurs sous-systèmes, y compris plusieurs magasin UI frontaux (une application Web et une application mobile native), ainsi que les principaux microservices et les conteneurs pour toutes les opérations côté serveur requises.</span><span class="sxs-lookup"><span data-stu-id="c97ae-145">The application consists of multiple subsystems, including several store UI front ends (a Web application and a native mobile app), along with the back-end microservices and containers for all the required server-side operations.</span></span> <span data-ttu-id="c97ae-146">Figure 8-1 montre l’architecture de l’application de référence.</span><span class="sxs-lookup"><span data-stu-id="c97ae-146">Figure 8-1 shows the architecture of the reference application.</span></span>

![](./media/image1.png)

<span data-ttu-id="c97ae-147">**Figure 8-1**.</span><span class="sxs-lookup"><span data-stu-id="c97ae-147">**Figure 8-1**.</span></span> <span data-ttu-id="c97ae-148">Les eShopOnContainers référencer l’application, en indiquant une communication client à microservice directe et le bus d’événements</span><span class="sxs-lookup"><span data-stu-id="c97ae-148">The eShopOnContainers reference application, showing a direct client-to-microservice communication and the event bus</span></span>

<span data-ttu-id="c97ae-149">**Environnement d’hébergement**.</span><span class="sxs-lookup"><span data-stu-id="c97ae-149">**Hosting environment**.</span></span> <span data-ttu-id="c97ae-150">Figure 8-1, vous voyez plusieurs conteneurs sont déployés au sein d’un seul hôte Docker.</span><span class="sxs-lookup"><span data-stu-id="c97ae-150">In Figure 8-1, you see several containers deployed within a single Docker host.</span></span> <span data-ttu-id="c97ae-151">Qui peut être le cas lors du déploiement sur un seul hôte Docker avec la docker-composer des commandes.</span><span class="sxs-lookup"><span data-stu-id="c97ae-151">That would be the case when deploying to a single Docker host with the docker-compose up command.</span></span> <span data-ttu-id="c97ae-152">Toutefois, si vous êtes à l’aide d’un orchestrator ou cluster de conteneur, chaque conteneur peut être en cours d’exécution dans un autre ordinateur hôte (nœud), et n’importe quel nœud pouvant s’exécuter n’importe quel nombre de conteneurs, comme expliqué précédemment dans la section architecture.</span><span class="sxs-lookup"><span data-stu-id="c97ae-152">However, if you are using an orchestrator or container cluster, each container could be running in a different host (node), and any node could be running any number of containers, as we explained earlier in the architecture section.</span></span>

<span data-ttu-id="c97ae-153">**Architecture de communication**.</span><span class="sxs-lookup"><span data-stu-id="c97ae-153">**Communication architecture**.</span></span> <span data-ttu-id="c97ae-154">L’application eShopOnContainers utilise deux types de communication, en fonction du type de l’action fonctionnel (requêtes par rapport aux mises à jour et de transactions) :</span><span class="sxs-lookup"><span data-stu-id="c97ae-154">The eShopOnContainers application uses two communication types, depending on the kind of the functional action (queries versus updates and transactions):</span></span>

-   <span data-ttu-id="c97ae-155">Communications client à microservice directe.</span><span class="sxs-lookup"><span data-stu-id="c97ae-155">Direct client-to-microservice communication.</span></span> <span data-ttu-id="c97ae-156">Cela est utilisé pour les requêtes et lors de l’acceptation des mises à jour ou des commandes transactionnelles à partir des applications client.</span><span class="sxs-lookup"><span data-stu-id="c97ae-156">This is used for queries and when accepting update or transactional commands from the client apps.</span></span>

-   <span data-ttu-id="c97ae-157">Communication asynchrone basé sur des événements.</span><span class="sxs-lookup"><span data-stu-id="c97ae-157">Asynchronous event-based communication.</span></span> <span data-ttu-id="c97ae-158">Cela se produit via un bus d’événements se propager les mises à jour sur microservices ou pour intégrer des applications externes.</span><span class="sxs-lookup"><span data-stu-id="c97ae-158">This occurs through an event bus to propagate updates across microservices or to integrate with external applications.</span></span> <span data-ttu-id="c97ae-159">Le bus d’événements peut être implémenté avec les technologies d’infrastructure de service broker de messagerie comme RabbitMQ ou à l’aide du bus de service de niveau supérieur tels que Azure Service Bus, NServiceBus, MassTransit ou Brighter.</span><span class="sxs-lookup"><span data-stu-id="c97ae-159">The event bus can be implemented with any messaging-broker infrastructure technology like RabbitMQ, or using higher-level service buses like Azure Service Bus, NServiceBus, MassTransit, or Brighter.</span></span>

<span data-ttu-id="c97ae-160">L’application est déployée en tant qu’ensemble de microservices sous la forme de conteneurs.</span><span class="sxs-lookup"><span data-stu-id="c97ae-160">The application is deployed as a set of microservices in the form of containers.</span></span> <span data-ttu-id="c97ae-161">Les applications clientes peuvent communiquer avec ces conteneurs ainsi que communiquer entre microservices.</span><span class="sxs-lookup"><span data-stu-id="c97ae-161">Client apps can communicate with those containers as well as communicate between microservices.</span></span> <span data-ttu-id="c97ae-162">Comme mentionné, cette architecture initiale utilise une architecture de communication client à microservice directe, ce qui signifie qu’une application cliente peut envoyer des demandes à chacune de la microservices, de façon directement.</span><span class="sxs-lookup"><span data-stu-id="c97ae-162">As mentioned, this initial architecture is using a direct client-to-microservice communication architecture, which means that a client application can make requests to each of the microservices directly.</span></span> <span data-ttu-id="c97ae-163">Chaque microservice possède un point de terminaison public comme https://servicename.applicationname.companyname.</span><span class="sxs-lookup"><span data-stu-id="c97ae-163">Each microservice has a public endpoint like https://servicename.applicationname.companyname.</span></span> <span data-ttu-id="c97ae-164">Si nécessaire, chaque microservice peut utiliser un port TCP différent.</span><span class="sxs-lookup"><span data-stu-id="c97ae-164">If required, each microservice can use a different TCP port.</span></span> <span data-ttu-id="c97ae-165">En production, permettant d’associer URL à équilibrage de charge du microservices, qui répartit les demandes entre les instances disponibles de microservice.</span><span class="sxs-lookup"><span data-stu-id="c97ae-165">In production, that URL would map to the microservices’ load balancer, which distributes requests across the available microservice instances.</span></span>

<span data-ttu-id="c97ae-166">**Remarque importante sur la passerelle API vs. Communication directe dans eShopOnContainers.**</span><span class="sxs-lookup"><span data-stu-id="c97ae-166">**Important note on API Gateway vs. Direct Communication in eShopOnContainers.**</span></span> <span data-ttu-id="c97ae-167">Comme expliqué dans la section de l’architecture de ce guide, l’architecture de communication client à microservice directe peut avoir des inconvénients lorsque vous générez une application important et complexe microservice.</span><span class="sxs-lookup"><span data-stu-id="c97ae-167">As explained in the architecture section of this guide, the direct client-to-microservice communication architecture can have drawbacks when you are building a large and complex microservice-based application.</span></span> <span data-ttu-id="c97ae-168">Mais il peut être suffisant pour une petite application, par exemple, dans l’eShopOnContainers démarrage de l’application, où l’objectif est de vous concentrer sur l’obtention d’une simple application basée sur un conteneur sur Docker et nous ne vouliez créer une passerelle API monolithique unique peut avoir un impact sur le autonomie des microservices développement.</span><span class="sxs-lookup"><span data-stu-id="c97ae-168">But it can be good enough for a small application, such as in the eShopOnContainers application, where the goal is to focus on a simpler getting started Docker container-based application and we didn’t want to create a single monolithic API Gateway that can impact the microservices’ development autonomy.</span></span>

<span data-ttu-id="c97ae-169">Toutefois, si vous souhaitez concevoir une grande application microservice avec des dizaines de microservices, nous recommandons vivement que vous envisagez du modèle de la passerelle API, comme expliqué dans la section architecture.</span><span class="sxs-lookup"><span data-stu-id="c97ae-169">But, if you are going to design a large microservice-based application with dozens of microservices, we strongly recommend that you consider the API Gateway pattern, as we explained in the architecture section.</span></span>
<span data-ttu-id="c97ae-170">Cette décision architecture pourrait être refactorisée une fois que vous réfléchissez concernant les applications de l’environnement de production et de façades de spécialement à cet effet pour les clients distants.</span><span class="sxs-lookup"><span data-stu-id="c97ae-170">This architectural decision could be refactored once thinking about production-ready applications and specially-made facades for remote clients.</span></span> <span data-ttu-id="c97ae-171">Avoir plusieurs passerelles API personnalisées en fonction du facteur de forme applications client peut offrir des avantages en ce qui concerne l’agrégation des données différentes par l’application cliente, plus vous pouvez masquer des microservices internes ou des API pour les applications client et autoriser dans ce niveau unique.</span><span class="sxs-lookup"><span data-stu-id="c97ae-171">Having multiple custom API Gateways depending on the client apps' form-factor can provide benefits in regard to different data aggregation per client app plus you can hide internal microservices or APIs to the client apps and authorize in that single tier.</span></span> 

<span data-ttu-id="c97ae-172">Toutefois et comme indiqué, soyez attentif aux contre volumineux et monolithique passerelles API qui peut arrêter l’autonomie du développement des votre microservices.</span><span class="sxs-lookup"><span data-stu-id="c97ae-172">However, and as mentioned, beware against large and monolithic API Gateways that might kill your microservices' development autonomy.</span></span>

### <a name="data-sovereignty-per-microservice"></a><span data-ttu-id="c97ae-173">Souveraineté de données par microservice</span><span class="sxs-lookup"><span data-stu-id="c97ae-173">Data sovereignty per microservice</span></span>

<span data-ttu-id="c97ae-174">Dans l’exemple d’application, chaque microservice possède sa propre base de données ou source de données et chaque base de données ou source de données est déployée en tant qu’un autre conteneur.</span><span class="sxs-lookup"><span data-stu-id="c97ae-174">In the sample application, each microservice owns its own database or data source, and each database or data source is deployed as another container.</span></span> <span data-ttu-id="c97ae-175">Cette décision de conception a été effectuée uniquement pour faciliter le travail à un développeur d’obtenir le code à partir de GitHub, cloner et ouvrez-le dans Visual Studio ou Visual Studio Code.</span><span class="sxs-lookup"><span data-stu-id="c97ae-175">This design decision was made only to make it easy for a developer to get the code from GitHub, clone it, and open it in Visual Studio or Visual Studio Code.</span></span> <span data-ttu-id="c97ae-176">Ou, sinon, il facilite la tâche compiler les images Docker personnalisés à l’aide de .NET Core CLI et le Docker et de déployer et de les exécuter dans un environnement de développement de Docker.</span><span class="sxs-lookup"><span data-stu-id="c97ae-176">Or alternatively, it makes it easy to compile the custom Docker images using .NET Core CLI and the Docker CLI, and then deploy and run them in a Docker development environment.</span></span> <span data-ttu-id="c97ae-177">Dans les deux cas, l’utilisation de conteneurs pour les données sources permet aux développeurs générer et déploiement en quelques minutes, sans avoir à configurer une base de données externe ou toute autre source de données avec des dépendances de disque durs sur l’infrastructure (cloud ou localement).</span><span class="sxs-lookup"><span data-stu-id="c97ae-177">Either way, using containers for data sources lets developers build and deploy in a matter of minutes without having to provision an external database or any other data source with hard dependencies on infrastructure (cloud or on-premises).</span></span>

<span data-ttu-id="c97ae-178">Dans un environnement de production réel, pour la haute disponibilité et l’évolutivité, les bases de données doivent être basées sur les serveurs de base de données dans le nuage ou sur site, mais pas dans les conteneurs.</span><span class="sxs-lookup"><span data-stu-id="c97ae-178">In a real production environment, for high availability and for scalability, the databases should be based on database servers in the cloud or on-premises, but not in containers.</span></span>

<span data-ttu-id="c97ae-179">Par conséquent, les unités de déploiement pour microservices (et même pour les bases de données de cette application) sont des conteneurs Docker, et l’application de référence est une application conteneur multiples qui prend en compte les principes de microservices.</span><span class="sxs-lookup"><span data-stu-id="c97ae-179">Therefore, the units of deployment for microservices (and even for databases in this application) are Docker containers, and the reference application is a multi-container application that embraces microservices principles.</span></span>

### <a name="additional-resources"></a><span data-ttu-id="c97ae-180">Ressources supplémentaires</span><span class="sxs-lookup"><span data-stu-id="c97ae-180">Additional resources</span></span>

-   <span data-ttu-id="c97ae-181">**eShopOnContainers référentiel GitHub. Code source pour l’application de référence**
    *https://aka.ms/eShopOnContainers/*</span><span class="sxs-lookup"><span data-stu-id="c97ae-181">**eShopOnContainers GitHub repo. Source code for the reference application**
*https://aka.ms/eShopOnContainers/*</span></span>

## <a name="benefits-of-a-microservice-based-solution"></a><span data-ttu-id="c97ae-182">Avantages d’une solution basée sur les microservice</span><span class="sxs-lookup"><span data-stu-id="c97ae-182">Benefits of a microservice-based solution</span></span>

<span data-ttu-id="c97ae-183">Une solution en fonction de microservice présente de nombreux avantages :</span><span class="sxs-lookup"><span data-stu-id="c97ae-183">A microservice based solution like this has many benefits:</span></span>

<span data-ttu-id="c97ae-184">**Chaque microservice est relativement faible, facile à gérer et faire évoluer**.</span><span class="sxs-lookup"><span data-stu-id="c97ae-184">**Each microservice is relatively small—easy to manage and evolve**.</span></span> <span data-ttu-id="c97ae-185">Plus précisément :</span><span class="sxs-lookup"><span data-stu-id="c97ae-185">Specifically:</span></span>

-   <span data-ttu-id="c97ae-186">Il est facile pour un développeur de comprendre et de prise en main rapidement une bonne productivité.</span><span class="sxs-lookup"><span data-stu-id="c97ae-186">It is easy for a developer to understand and get started quickly with good productivity.</span></span>

-   <span data-ttu-id="c97ae-187">Démarrage des conteneurs rapide, ce qui permet aux développeurs plus productif.</span><span class="sxs-lookup"><span data-stu-id="c97ae-187">Containers start fast, which makes developers more productive.</span></span>

-   <span data-ttu-id="c97ae-188">Un IDE tel que Visual Studio peut charger des projets plus petits rapides, qui effectue les développeurs productifs.</span><span class="sxs-lookup"><span data-stu-id="c97ae-188">An IDE like Visual Studio can load smaller projects fast, making developers productive.</span></span>

-   <span data-ttu-id="c97ae-189">Chaque microservice permettre être conçu, développé et déployé indépendamment des autres microservices, qui fournit l’agilité, car il est plus facile de déployer de nouvelles versions de microservices fréquemment.</span><span class="sxs-lookup"><span data-stu-id="c97ae-189">Each microservice can be designed, developed, and deployed independently of other microservices, which provides agility because it is easier to deploy new versions of microservices frequently.</span></span>

<span data-ttu-id="c97ae-190">**Il est possible de montée en charge les zones individuelles de l’application**.</span><span class="sxs-lookup"><span data-stu-id="c97ae-190">**It is possible to scale out individual areas of the application**.</span></span> <span data-ttu-id="c97ae-191">Par exemple, vous devrez peut-être le service de catalogue ou le service du panier d’achat à l’échelle, mais pas le processus de commande.</span><span class="sxs-lookup"><span data-stu-id="c97ae-191">For instance, the catalog service or the basket service might need to be scaled out, but not the ordering process.</span></span> <span data-ttu-id="c97ae-192">Une infrastructure de microservices sera beaucoup plus efficace en ce qui concerne les ressources utilisées lors de la montée en puissance parallèle à celle une architecture monolithique.</span><span class="sxs-lookup"><span data-stu-id="c97ae-192">A microservices infrastructure will be much more efficient with regard to the resources used when scaling out than a monolithic architecture would be.</span></span>

<span data-ttu-id="c97ae-193">**Vous pouvez diviser le travail de développement entre plusieurs équipes**.</span><span class="sxs-lookup"><span data-stu-id="c97ae-193">**You can divide the development work between multiple teams**.</span></span> <span data-ttu-id="c97ae-194">Chaque service peut être détenue par une équipe de développement unique.</span><span class="sxs-lookup"><span data-stu-id="c97ae-194">Each service can be owned by a single development team.</span></span> <span data-ttu-id="c97ae-195">Chaque équipe peut gérer, développer, déployer et mettre à l’échelle de leur service, indépendamment du reste des équipes.</span><span class="sxs-lookup"><span data-stu-id="c97ae-195">Each team can manage, develop, deploy, and scale their service independently of the rest of the teams.</span></span>

<span data-ttu-id="c97ae-196">**Les problèmes sont plus isolés**.</span><span class="sxs-lookup"><span data-stu-id="c97ae-196">**Issues are more isolated**.</span></span> <span data-ttu-id="c97ae-197">S’il existe un problème dans un service, seulement ce service est affecté initialement (sauf lorsque la conception incorrecte est utilisée avec des dépendances directes entre microservices) et autres services peuvent continuer à traiter les demandes.</span><span class="sxs-lookup"><span data-stu-id="c97ae-197">If there is an issue in one service, only that service is initially impacted (except when the wrong design is used, with direct dependencies between microservices), and other services can continue to handle requests.</span></span> <span data-ttu-id="c97ae-198">En revanche, un composant défectueux dans une architecture de déploiement monolithique peut arrêter l’ensemble du système, notamment si elle implique des ressources, comme une fuite de mémoire.</span><span class="sxs-lookup"><span data-stu-id="c97ae-198">In contrast, one malfunctioning component in a monolithic deployment architecture can bring down the entire system, especially when it involves resources, such as a memory leak.</span></span> <span data-ttu-id="c97ae-199">En outre, lorsqu’un problème dans un microservice est résolu, vous pouvez déployer simplement la microservice affecté sans affecter le reste de l’application.</span><span class="sxs-lookup"><span data-stu-id="c97ae-199">Additionally, when an issue in a microservice is resolved, you can deploy just the affected microservice without impacting the rest of the application.</span></span>

<span data-ttu-id="c97ae-200">**Vous pouvez utiliser les dernières technologies**.</span><span class="sxs-lookup"><span data-stu-id="c97ae-200">**You can use the latest technologies**.</span></span> <span data-ttu-id="c97ae-201">Étant donné que vous pouvez commencer à développer des services de manière indépendante et les exécuter côte à côte (grâce aux conteneurs et .NET Core), commencer à utiliser les dernières technologies et infrastructures échelonnées au lieu de blocage sur une pile ou une infrastructure pour l’ensemble plus anciens application.</span><span class="sxs-lookup"><span data-stu-id="c97ae-201">Because you can start developing services independently and run them side by side (thanks to containers and .NET Core), you can start using the latest technologies and frameworks expediently instead of being stuck on an older stack or framework for the whole application.</span></span>

## <a name="downsides-of-a-microservice-based-solution"></a><span data-ttu-id="c97ae-202">Inconvénients d’une solution basée sur les microservice</span><span class="sxs-lookup"><span data-stu-id="c97ae-202">Downsides of a microservice-based solution</span></span>

<span data-ttu-id="c97ae-203">Une solution en fonction de microservice a également des inconvénients :</span><span class="sxs-lookup"><span data-stu-id="c97ae-203">A microservice based solution like this also has some drawbacks:</span></span>

<span data-ttu-id="c97ae-204">**Application distribuée**.</span><span class="sxs-lookup"><span data-stu-id="c97ae-204">**Distributed application**.</span></span> <span data-ttu-id="c97ae-205">Distribution de l’application ajoute une complexité pour les développeurs lorsqu’ils sont de conception et de création des services.</span><span class="sxs-lookup"><span data-stu-id="c97ae-205">Distributing the application adds complexity for developers when they are designing and building the services.</span></span> <span data-ttu-id="c97ae-206">Par exemple, les développeurs doivent implémenter communication interservices à l’aide des protocoles tels que HTTP ou AMPQ, ce qui augmente la complexité pour les tests et la gestion des exceptions.</span><span class="sxs-lookup"><span data-stu-id="c97ae-206">For example, developers must implement interservice communication using protocols like HTTP or AMPQ, which adds complexity for testing and exception handling.</span></span> <span data-ttu-id="c97ae-207">Il ajoute également une latence dans le système.</span><span class="sxs-lookup"><span data-stu-id="c97ae-207">It also adds latency to the system.</span></span>

<span data-ttu-id="c97ae-208">**La complexité du déploiement**.</span><span class="sxs-lookup"><span data-stu-id="c97ae-208">**Deployment complexity**.</span></span> <span data-ttu-id="c97ae-209">Une application qui a des dizaines de types de microservices et a besoin d’une haute évolutivité (il doit être en mesure de créer des instances par service et équilibrer les services sur plusieurs hôtes) signifie un degré élevé de complexité de déploiement pour la gestion et des opérations informatiques.</span><span class="sxs-lookup"><span data-stu-id="c97ae-209">An application that has dozens of microservices types and needs high scalability (it needs to be able to create many instances per service and balance those services across many hosts) means a high degree of deployment complexity for IT operations and management.</span></span> <span data-ttu-id="c97ae-210">Si vous n’utilisez pas une infrastructure orientée de microservice (comme un orchestrator et du Planificateur), que la complexité supplémentaire peut nécessiter beaucoup plus d’efforts de développement à l’application d’entreprise lui-même.</span><span class="sxs-lookup"><span data-stu-id="c97ae-210">If you are not using a microservice-oriented infrastructure (like an orchestrator and scheduler), that additional complexity can require far more development efforts than the business application itself.</span></span>

<span data-ttu-id="c97ae-211">**Les transactions atomiques**.</span><span class="sxs-lookup"><span data-stu-id="c97ae-211">**Atomic transactions**.</span></span> <span data-ttu-id="c97ae-212">Les transactions atomiques entre plusieurs microservices généralement ne sont pas possibles.</span><span class="sxs-lookup"><span data-stu-id="c97ae-212">Atomic transactions between multiple microservices usually are not possible.</span></span> <span data-ttu-id="c97ae-213">Les exigences métier doivent adopter la cohérence éventuelle entre plusieurs microservices.</span><span class="sxs-lookup"><span data-stu-id="c97ae-213">The business requirements have to embrace eventual consistency between multiple microservices.</span></span>

<span data-ttu-id="c97ae-214">**Augmente les besoins en ressources globales** (total de mémoire, des disques et des ressources réseau pour tous les serveurs ou les ordinateurs hôtes).</span><span class="sxs-lookup"><span data-stu-id="c97ae-214">**Increased global resource needs** (total memory, drives, and network resources for all the servers or hosts).</span></span> <span data-ttu-id="c97ae-215">Dans de nombreux cas, lorsque vous remplacez une application monolithique avec une approche microservices, la quantité de ressources globales requises par l’application microservice sera supérieure aux besoins de l’infrastructure de l’application monolithique d’origine.</span><span class="sxs-lookup"><span data-stu-id="c97ae-215">In many cases, when you replace a monolithic application with a microservices approach, the amount of global resources needed by the new microservice-based application will be larger than the infrastructure needs of the original monolithic application.</span></span> <span data-ttu-id="c97ae-216">Il s’agit, car le niveau plus élevé de granularité et de services distribués nécessite des ressources plus globales.</span><span class="sxs-lookup"><span data-stu-id="c97ae-216">This is because the higher degree of granularity and distributed services requires more global resources.</span></span> <span data-ttu-id="c97ae-217">Toutefois, étant donné le faible coût des ressources en général et l’avantage de permettre la montée en puissance parallèle uniquement certaines zones de l’application par rapport aux coûts à long terme lors de l’évolution des applications monolithiques, l’utilisation accrue de ressources est généralement un bon compromis pour volumineux, applications à long terme.</span><span class="sxs-lookup"><span data-stu-id="c97ae-217">However, given the low cost of resources in general and the benefit of being able to scale out just certain areas of the application compared to long-term costs when evolving monolithic applications, the increased use of resources is usually a good tradeoff for large, long-term applications.</span></span>

<span data-ttu-id="c97ae-218">**Problèmes de communication de direct client‑to‑microservice**.</span><span class="sxs-lookup"><span data-stu-id="c97ae-218">**Issues with direct client‑to‑microservice communication**.</span></span> <span data-ttu-id="c97ae-219">Si l’application est élevée, avec des dizaines de microservices, problèmes et limitations sont si l’application requiert des communications client à microservice directe.</span><span class="sxs-lookup"><span data-stu-id="c97ae-219">When the application is large, with dozens of microservices, there are challenges and limitations if the application requires direct client-to-microservice communications.</span></span> <span data-ttu-id="c97ae-220">Un problème est une incompatibilité possible entre les besoins du client et les API exposées par chacun du microservices.</span><span class="sxs-lookup"><span data-stu-id="c97ae-220">One problem is a potential mismatch between the needs of the client and the APIs exposed by each of the microservices.</span></span> <span data-ttu-id="c97ae-221">Dans certains cas, l’application cliente deviez apporter de nombreuses demandes distinctes pour composer l’interface utilisateur, ce qui peut être inefficace sur Internet et ne conviendrait pas sur un réseau mobile.</span><span class="sxs-lookup"><span data-stu-id="c97ae-221">In certain cases, the client application might need to make many separate requests to compose the UI, which can be inefficient over the Internet and would be impractical over a mobile network.</span></span> <span data-ttu-id="c97ae-222">Par conséquent, les demandes à partir de l’application cliente pour le système principal doivent être réduites.</span><span class="sxs-lookup"><span data-stu-id="c97ae-222">Therefore, requests from the client application to the back-end system should be minimized.</span></span>

<span data-ttu-id="c97ae-223">Un autre problème avec les communications client à microservice directs est que certains microservices peut utiliser les protocoles qui ne sont pas compatibles avec le Web.</span><span class="sxs-lookup"><span data-stu-id="c97ae-223">Another problem with direct client-to-microservice communications is that some microservices might be using protocols that are not Web-friendly.</span></span> <span data-ttu-id="c97ae-224">Un service peut utiliser un protocole binaire, lors d’un autre service peut utiliser la messagerie AMQP.</span><span class="sxs-lookup"><span data-stu-id="c97ae-224">One service might use a binary protocol, while another service might use AMQP messaging.</span></span> <span data-ttu-id="c97ae-225">Ces protocoles ne sont pas firewall‑friendly et sont mieux utilisées en interne.</span><span class="sxs-lookup"><span data-stu-id="c97ae-225">Those protocols are not firewall‑friendly and are best used internally.</span></span> <span data-ttu-id="c97ae-226">En règle générale, une application doit utiliser des protocoles tels que HTTP et WebSockets pour communiquer en dehors du pare-feu.</span><span class="sxs-lookup"><span data-stu-id="c97ae-226">Usually, an application should use protocols such as HTTP and WebSockets for communication outside of the firewall.</span></span>

<span data-ttu-id="c97ae-227">Encore un autre inconvénient avec cette approche client‑to‑service direct est qu’elle rend difficile à refactoriser les contrats pour ces microservices.</span><span class="sxs-lookup"><span data-stu-id="c97ae-227">Yet another drawback with this direct client‑to‑service approach is that it makes it difficult to refactor the contracts for those microservices.</span></span> <span data-ttu-id="c97ae-228">Au fil du temps les développeurs souhaitent modifier la façon dont le système est partitionné dans les services.</span><span class="sxs-lookup"><span data-stu-id="c97ae-228">Over time developers might want to change how the system is partitioned into services.</span></span> <span data-ttu-id="c97ae-229">Par exemple, ils peuvent fusionner les deux services ou fractionner un service en deux ou plusieurs services.</span><span class="sxs-lookup"><span data-stu-id="c97ae-229">For example, they might merge two services or split a service into two or more services.</span></span> <span data-ttu-id="c97ae-230">Toutefois, si les clients communiquent directement avec les services, exécution de ce type de refactorisation peut empêcher la compatibilité avec les applications clientes.</span><span class="sxs-lookup"><span data-stu-id="c97ae-230">However, if clients communicate directly with the services, performing this kind of refactoring can break compatibility with client apps.</span></span>

<span data-ttu-id="c97ae-231">Comme mentionné dans la section architecture, lors de la conception et création d’une application complexe basée sur microservices, vous pouvez envisager l’utilisation de plusieurs passerelles API affinées au lieu de l’approche de communication directe client‑to‑microservice plus simple.</span><span class="sxs-lookup"><span data-stu-id="c97ae-231">As mentioned in the architecture section, when designing and building a complex application based on microservices, you might consider the use of multiple fine-grained API Gateways instead of the simpler direct client‑to‑microservice communication approach.</span></span>

<span data-ttu-id="c97ae-232">**Partitionnement de la microservices**.</span><span class="sxs-lookup"><span data-stu-id="c97ae-232">**Partitioning the microservices**.</span></span> <span data-ttu-id="c97ae-233">Enfin, quel que soit l’approche que vous prenez pour votre architecture microservice, un autre défi consiste à décider comment partitionner une application de bout en bout dans plusieurs microservices.</span><span class="sxs-lookup"><span data-stu-id="c97ae-233">Finally, no matter which approach you take for your microservice architecture, another challenge is deciding how to partition an end-to-end application into multiple microservices.</span></span> <span data-ttu-id="c97ae-234">Comme indiqué dans la section de l’architecture du guide, il existe plusieurs techniques et les approches.</span><span class="sxs-lookup"><span data-stu-id="c97ae-234">As noted in the architecture section of the guide, there are several techniques and approaches you can take.</span></span> <span data-ttu-id="c97ae-235">En fait, vous devez identifier les zones de l’application qui sont découplées à partir des autres domaines, et qui ont un nombre faible de dépendances dures.</span><span class="sxs-lookup"><span data-stu-id="c97ae-235">Basically, you need to identify areas of the application that are decoupled from the other areas and that have a low number of hard dependencies.</span></span> <span data-ttu-id="c97ae-236">Dans de nombreux cas, il est aligné au partitionnement des services en cas d’utilisation.</span><span class="sxs-lookup"><span data-stu-id="c97ae-236">In many cases, this is aligned to partitioning services by use case.</span></span> <span data-ttu-id="c97ae-237">Par exemple, dans notre application de la Boutique, nous avons un service de tri qui est responsable de toute la logique métier liée au processus de commande.</span><span class="sxs-lookup"><span data-stu-id="c97ae-237">For example, in our e-shop application, we have an ordering service that is responsible for all the business logic related to the order process.</span></span> <span data-ttu-id="c97ae-238">Nous avons également le service de catalogue et le service du panier d’achat qui implémentent les autres fonctions.</span><span class="sxs-lookup"><span data-stu-id="c97ae-238">We also have the catalog service and the basket service that implement other capabilities.</span></span> <span data-ttu-id="c97ae-239">Dans l’idéal, chaque service doit avoir uniquement un petit ensemble de responsabilités.</span><span class="sxs-lookup"><span data-stu-id="c97ae-239">Ideally, each service should have only a small set of responsibilities.</span></span> <span data-ttu-id="c97ae-240">Cela est similaire au principe de responsabilité unique (SRP) appliqué aux classes, qui stipule qu’une classe doit avoir uniquement une raison à modifier.</span><span class="sxs-lookup"><span data-stu-id="c97ae-240">This is similar to the single responsibility principle (SRP) applied to classes, which states that a class should only have one reason to change.</span></span> <span data-ttu-id="c97ae-241">Mais dans ce cas, il est microservices, pour que l’étendue soit supérieure à une seule classe.</span><span class="sxs-lookup"><span data-stu-id="c97ae-241">But in this case, it is about microservices, so the scope will be larger than a single class.</span></span> <span data-ttu-id="c97ae-242">Surtout, un microservice doit être complètement autonome, de bout en bout, y compris la responsabilité de ses propres sources de données.</span><span class="sxs-lookup"><span data-stu-id="c97ae-242">Most of all, a microservice has to be completely autonomous, end to end, including responsibility for its own data sources.</span></span>

## <a name="external-versus-internal-architecture-and-design-patterns"></a><span data-ttu-id="c97ae-243">Externe par rapport à des modèles de conception et l’architecture internes</span><span class="sxs-lookup"><span data-stu-id="c97ae-243">External versus internal architecture and design patterns</span></span>

<span data-ttu-id="c97ae-244">L’architecture externe est l’architecture de microservice composée par plusieurs services, suivant les principes décrits dans la section de l’architecture de ce guide.</span><span class="sxs-lookup"><span data-stu-id="c97ae-244">The external architecture is the microservice architecture composed by multiple service, following the principles described in the architecture section of this guide.</span></span> <span data-ttu-id="c97ae-245">Toutefois, selon la nature de chaque microservice, indépendamment d’architecture de haut niveau de microservice vous choisissez, il est commun et parfois conseillé de posséder différentes architectures internes, chacun basé sur des modèles différents pour différents microservices.</span><span class="sxs-lookup"><span data-stu-id="c97ae-245">However, depending on the nature of each microservice, and independently of high-level microservice architecture you choose, it is common and sometimes advisable to have different internal architectures, each based on different patterns, for different microservices.</span></span> <span data-ttu-id="c97ae-246">Le microservices pouvez même utiliser les différentes technologies et les langages de programmation.</span><span class="sxs-lookup"><span data-stu-id="c97ae-246">The microservices can even use different technologies and programming languages.</span></span> <span data-ttu-id="c97ae-247">Figure 8-2 illustre cette diversité.</span><span class="sxs-lookup"><span data-stu-id="c97ae-247">Figure 8-2 illustrates this diversity.</span></span>

![](./media/image2.png)

<span data-ttu-id="c97ae-248">**Figure 8-2**.</span><span class="sxs-lookup"><span data-stu-id="c97ae-248">**Figure 8-2**.</span></span> <span data-ttu-id="c97ae-249">Externe par rapport à la conception et l’architecture interne</span><span class="sxs-lookup"><span data-stu-id="c97ae-249">External versus internal architecture and design</span></span>

<span data-ttu-id="c97ae-250">Par exemple, dans notre *eShopOnContainers* microservices de profil exemple, le catalogue, du panier d’achat et utilisateur sont simples (en fait, les sous-systèmes CRUD).</span><span class="sxs-lookup"><span data-stu-id="c97ae-250">For instance, in our *eShopOnContainers* sample, the catalog, basket, and user profile microservices are simple (basically, CRUD subsystems).</span></span> <span data-ttu-id="c97ae-251">Par conséquent, leur conception et architecture interne est simple.</span><span class="sxs-lookup"><span data-stu-id="c97ae-251">Therefore, their internal architecture and design is straightforward.</span></span> <span data-ttu-id="c97ae-252">Toutefois, vous pouvez avoir d’autres microservices, telles que le tri microservice, qui est plus complexe et représente l’évolution des règles d’entreprise avec un haut degré de complexité du domaine.</span><span class="sxs-lookup"><span data-stu-id="c97ae-252">However, you might have other microservices, such as the ordering microservice, which is more complex and represents ever-changing business rules with a high degree of domain complexity.</span></span> <span data-ttu-id="c97ae-253">Dans ce cas, vous souhaiterez implémenter des modèles plus avancés dans un microservice particulier, telles que celles définies avec les approches de conception domaine (DDD), comme nous le faisons les *eShopOnContainers* classement microservice.</span><span class="sxs-lookup"><span data-stu-id="c97ae-253">In cases like these, you might want to implement more advanced patterns within a particular microservice, like the ones defined with domain-driven design (DDD) approaches, as we are doing in the *eShopOnContainers* ordering microservice.</span></span> <span data-ttu-id="c97ae-254">(Nous allons examiner ces modèles DDD dans la section qui explique l’implémentation de la *eShopOnContainers* classement microservice.)</span><span class="sxs-lookup"><span data-stu-id="c97ae-254">(We will review these DDD patterns in the section later that explains the implementation of the *eShopOnContainers* ordering microservice.)</span></span>

<span data-ttu-id="c97ae-255">Une autre raison d’une technologie différente par microservice peut être la nature de chaque microservice.</span><span class="sxs-lookup"><span data-stu-id="c97ae-255">Another reason for a different technology per microservice might be the nature of each microservice.</span></span> <span data-ttu-id="c97ae-256">Par exemple, il peut être préférable d’utiliser un langage de programmation fonctionnels comme F\#, ou même un langage tel que R si vous ciblez AI et l’apprentissage de domaines, au lieu d’un langage de programmation plus orientée objet tels que C\#.</span><span class="sxs-lookup"><span data-stu-id="c97ae-256">For example, it might be better to use a functional programming language like F\#, or even a language like R if you are targeting AI and machine learning domains, instead of a more object-oriented programming language like C\#.</span></span>

<span data-ttu-id="c97ae-257">Le point important est que chaque microservice peut avoir une architecture interne différente en fonction des modèles de conception.</span><span class="sxs-lookup"><span data-stu-id="c97ae-257">The bottom line is that each microservice can have a different internal architecture based on different design patterns.</span></span> <span data-ttu-id="c97ae-258">Microservices pas toutes doivent être implémentées à l’aide des modèles avancés DDD, car qui serait être trop d’ingénierie les.</span><span class="sxs-lookup"><span data-stu-id="c97ae-258">Not all microservices should be implemented using advanced DDD patterns, because that would be over-engineering them.</span></span> <span data-ttu-id="c97ae-259">De même, microservices complexes avec une logique métier évolution ne doit pas être implémenté en tant que composants CRUD, ou vous pouvez se retrouver avec code de basse qualité.</span><span class="sxs-lookup"><span data-stu-id="c97ae-259">Similarly, complex microservices with ever-changing business logic should not be implemented as CRUD components, or you can end up with low-quality code.</span></span>



## <a name="the-new-world-multiple-architectural-patterns-and-polyglot-microservices"></a><span data-ttu-id="c97ae-260">Le nouveau monde : plusieurs modèles d’architecture et microservices polyglot</span><span class="sxs-lookup"><span data-stu-id="c97ae-260">The new world: multiple architectural patterns and polyglot microservices</span></span>

<span data-ttu-id="c97ae-261">Il existe de nombreux modèles d’architecture utilisées par les développeurs et aux architectes logiciels.</span><span class="sxs-lookup"><span data-stu-id="c97ae-261">There are many architectural patterns used by software architects and developers.</span></span> <span data-ttu-id="c97ae-262">Voici quelques exemples (combinant les styles de l’architecture et les modèles d’architecture) :</span><span class="sxs-lookup"><span data-stu-id="c97ae-262">The following are a few (mixing architecture styles and architecture patterns):</span></span>

-   <span data-ttu-id="c97ae-263">Simple CRUD, niveau unique, simple couche.</span><span class="sxs-lookup"><span data-stu-id="c97ae-263">Simple CRUD, single-tier, single-layer.</span></span>

-   <span data-ttu-id="c97ae-264">[Traditionnel N couches](https://msdn.microsoft.com/en-us/library/ee658109.aspx#Layers).</span><span class="sxs-lookup"><span data-stu-id="c97ae-264">[Traditional N-Layered](https://msdn.microsoft.com/en-us/library/ee658109.aspx#Layers).</span></span>

-   <span data-ttu-id="c97ae-265">[Domaine-Driven Design N couches](https://blogs.msdn.microsoft.com/cesardelatorre/2011/07/03/published-first-alpha-version-of-domain-oriented-n-layered-architecture-v2-0/).</span><span class="sxs-lookup"><span data-stu-id="c97ae-265">[Domain-Driven Design N-layered](https://blogs.msdn.microsoft.com/cesardelatorre/2011/07/03/published-first-alpha-version-of-domain-oriented-n-layered-architecture-v2-0/).</span></span>

-   <span data-ttu-id="c97ae-266">[Nettoyer l’Architecture](https://8thlight.com/blog/uncle-bob/2012/08/13/the-clean-architecture.html) (tel qu’utilisé avec [eShopOnWeb](http://aka.ms/WebAppArchitecture))</span><span class="sxs-lookup"><span data-stu-id="c97ae-266">[Clean Architecture](https://8thlight.com/blog/uncle-bob/2012/08/13/the-clean-architecture.html) (as used with [eShopOnWeb](http://aka.ms/WebAppArchitecture))</span></span>

-   <span data-ttu-id="c97ae-267">[Commande et de répartition de responsabilité de la requête](https://martinfowler.com/bliki/CQRS.html) (CQRS).</span><span class="sxs-lookup"><span data-stu-id="c97ae-267">[Command and Query Responsibility Segregation](https://martinfowler.com/bliki/CQRS.html) (CQRS).</span></span>

-   <span data-ttu-id="c97ae-268">[Pilotée par événements Architecture](https://en.wikipedia.org/wiki/Event-driven_architecture) (EDA).</span><span class="sxs-lookup"><span data-stu-id="c97ae-268">[Event-Driven Architecture](https://en.wikipedia.org/wiki/Event-driven_architecture) (EDA).</span></span>

<span data-ttu-id="c97ae-269">Vous pouvez également générer des microservices avec de nombreuses technologies et les langages, tels que des API Web ASP.NET Core, NancyFx, ASP.NET Core SignalR (disponible avec .NET Core 2), F\#, Node.js, Python, Java, C++, GoLang et bien plus encore.</span><span class="sxs-lookup"><span data-stu-id="c97ae-269">You can also build microservices with many technologies and languages, such as ASP.NET Core Web APIs, NancyFx, ASP.NET Core SignalR (available with .NET Core 2), F\#, Node.js, Python, Java, C++, GoLang, and more.</span></span>

<span data-ttu-id="c97ae-270">Le point important est qu’aucun modèle d’architecture particulière ou style, ni une technologie particulière, est adaptée à toutes les situations.</span><span class="sxs-lookup"><span data-stu-id="c97ae-270">The important point is that no particular architecture pattern or style, nor any particular technology, is right for all situations.</span></span> <span data-ttu-id="c97ae-271">Figure 8-3 illustre certaines approches et des technologies (mais pas dans un ordre particulier) qui peuvent être utilisés dans différentes microservices.</span><span class="sxs-lookup"><span data-stu-id="c97ae-271">Figure 8-3 shows some approaches and technologies (although not in any particular order) that could be used in different microservices.</span></span>

![](./media/image3.png)

<span data-ttu-id="c97ae-272">**Figure 8-3**.</span><span class="sxs-lookup"><span data-stu-id="c97ae-272">**Figure 8-3**.</span></span> <span data-ttu-id="c97ae-273">Modèles architecturaux multiples et le monde microservices polyglot</span><span class="sxs-lookup"><span data-stu-id="c97ae-273">Multi-architectural patterns and the polyglot microservices world</span></span>

<span data-ttu-id="c97ae-274">Comme indiqué dans la Figure 8-3, dans les applications composé de nombreuses microservices (délimitée contextes dans la terminologie de conception domaine, ou simplement « sous-systèmes » en tant que microservices autonome), vous pouvez implémenter chaque microservice d’une manière différente.</span><span class="sxs-lookup"><span data-stu-id="c97ae-274">As shown in Figure 8-3, in applications composed of many microservices (Bounded Contexts in domain-driven design terminology, or simply “subsystems” as autonomous microservices), you might implement each microservice in a different way.</span></span> <span data-ttu-id="c97ae-275">Chacun peut ont un modèle d’architecture différente et utiliser différentes langues et les bases de données en fonction de la nature de l’application, les besoins de l’entreprise et les priorités.</span><span class="sxs-lookup"><span data-stu-id="c97ae-275">Each might have a different architecture pattern and use different languages and databases depending on the application’s nature, business requirements, and priorities.</span></span> <span data-ttu-id="c97ae-276">Dans certains cas, le microservices peut être similaire.</span><span class="sxs-lookup"><span data-stu-id="c97ae-276">In some cases the microservices might be similar.</span></span> <span data-ttu-id="c97ae-277">Mais qui n’est pas généralement le cas, étant donné que la limite de contexte et les exigences de chaque sous-système sont généralement différents.</span><span class="sxs-lookup"><span data-stu-id="c97ae-277">But that is not usually the case, because each subsystem’s context boundary and requirements are usually different.</span></span>

<span data-ttu-id="c97ae-278">Par exemple, pour une application de gestion CRUD simple, il peut être pas judicieux de concevoir et implémenter des modèles DDD.</span><span class="sxs-lookup"><span data-stu-id="c97ae-278">For instance, for a simple CRUD maintenance application, it might not make sense to design and implement DDD patterns.</span></span> <span data-ttu-id="c97ae-279">Mais pour votre domaine de base ou d’un cœur de métier, vous devrez peut-être appliquer des modèles plus avancés pour attaquer la complexité d’entreprise avec l’évolution des règles d’entreprise.</span><span class="sxs-lookup"><span data-stu-id="c97ae-279">But for your core domain or core business, you might need to apply more advanced patterns to tackle business complexity with ever-changing business rules.</span></span>

<span data-ttu-id="c97ae-280">En particulier lorsque vous travaillez avec grandes applications composées par plusieurs sous-systèmes, vous ne devez pas appliquer une architecture de niveau supérieur unique basée sur un modèle d’architecture unique.</span><span class="sxs-lookup"><span data-stu-id="c97ae-280">Especially when you deal with large applications composed by multiple sub-systems, you should not apply a single top-level architecture based on a single architecture pattern.</span></span> <span data-ttu-id="c97ae-281">Par exemple, CQRS ne doit pas être appliquée comme une architecture de niveau supérieur pour un ensemble de l’application, mais il peut être utile pour un ensemble spécifique de services.</span><span class="sxs-lookup"><span data-stu-id="c97ae-281">For instance, CQRS should not be applied as a top-level architecture for a whole application, but might be useful for a specific set of services.</span></span>

<span data-ttu-id="c97ae-282">Aucune puce silver ou un modèle d’architecture adéquate pour tous les cas donné existe.</span><span class="sxs-lookup"><span data-stu-id="c97ae-282">There is no silver bullet or a right architecture pattern for every given case.</span></span> <span data-ttu-id="c97ae-283">Vous ne pouvez pas « un modèle d’architecture pour toutes les règles. »</span><span class="sxs-lookup"><span data-stu-id="c97ae-283">You cannot have “one architecture pattern to rule them all.”</span></span> <span data-ttu-id="c97ae-284">Selon les priorités de chaque microservice, vous devez choisir une approche différente pour chacune, comme expliqué dans les sections suivantes.</span><span class="sxs-lookup"><span data-stu-id="c97ae-284">Depending on the priorities of each microservice, you must choose a different approach for each, as explained in the following sections.</span></span>


>[!div class="step-by-step"]
<span data-ttu-id="c97ae-285">[Précédente] (index.md) [suivant] (données-driven-crud-microservice.md)</span><span class="sxs-lookup"><span data-stu-id="c97ae-285">[Previous] (index.md) [Next] (data-driven-crud-microservice.md)</span></span>
