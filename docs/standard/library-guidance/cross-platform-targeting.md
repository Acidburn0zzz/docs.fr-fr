---
title: Ciblage d’inter-plateformes
description: Meilleures pratiques recommandées pour la création des bibliothèques inter-plateformes .NET.
author: jamesnk
ms.author: mairaw
ms.date: 10/02/2018
ms.openlocfilehash: 72fa891d5b1054af485a98d89b4efb11d6b0018b
ms.sourcegitcommit: e42d09e5966dd9fd02847d3e7eeb4ec0877069f8
ms.translationtype: MT
ms.contentlocale: fr-FR
ms.lasthandoff: 10/17/2018
ms.locfileid: "49374885"
---
# <a name="cross-platform-targeting"></a><span data-ttu-id="c8371-103">Ciblage d’inter-plateformes</span><span class="sxs-lookup"><span data-stu-id="c8371-103">Cross-platform targeting</span></span>

<span data-ttu-id="c8371-104">.NET modernes prend en charge plusieurs systèmes d’exploitation et les appareils.</span><span class="sxs-lookup"><span data-stu-id="c8371-104">Modern .NET supports multiple operating systems and devices.</span></span> <span data-ttu-id="c8371-105">Il est important pour les bibliothèques .NET open source prendre en charge les développeurs autant que possible, que leur développiez un site Web ASP.NET hébergé dans Azure, ou une partie de .NET dans Unity.</span><span class="sxs-lookup"><span data-stu-id="c8371-105">It's important for .NET open-source libraries to support as many developers as possible, whether they're building an ASP.NET website hosted in Azure, or a .NET game in Unity.</span></span>

## <a name="net-standard"></a><span data-ttu-id="c8371-106">.NET Standard</span><span class="sxs-lookup"><span data-stu-id="c8371-106">.NET Standard</span></span>

<span data-ttu-id="c8371-107">.NET standard est la meilleure façon d’ajouter la prise en charge multiplateforme dans une bibliothèque .NET.</span><span class="sxs-lookup"><span data-stu-id="c8371-107">.NET Standard is the best way to add cross-platform support to a .NET library.</span></span> <span data-ttu-id="c8371-108">[.NET standard](../net-standard.md) est une spécification d’API .NET qui sont disponibles sur toutes les implémentations de .NET.</span><span class="sxs-lookup"><span data-stu-id="c8371-108">[.NET Standard](../net-standard.md) is a specification of .NET APIs that are available on all .NET implementations.</span></span> <span data-ttu-id="c8371-109">Ciblage de .NET Standard vous permet de générer des bibliothèques qui sont contraints d’utiliser des API qui se trouvent dans une version donnée de .NET Standard, ce qui signifie qu’il est utilisable par toutes les plateformes qui implémentent cette version de .NET Standard.</span><span class="sxs-lookup"><span data-stu-id="c8371-109">Targeting .NET Standard lets you produce libraries that are constrained to use APIs that are in a given version of .NET Standard, which means it's usable by all platforms that implement that version of the .NET Standard.</span></span>

<span data-ttu-id="c8371-110">![.NET standard](./media/cross-platform-targeting/platforms-netstandard.png ".NET Standard")</span><span class="sxs-lookup"><span data-stu-id="c8371-110">![.NET Standard](./media/cross-platform-targeting/platforms-netstandard.png ".NET Standard")</span></span>

<span data-ttu-id="c8371-111">Ciblage de .NET Standard et la compilation avec succès votre projet, ne garantissent pas que la bibliothèque fonctionne correctement sur toutes les plateformes :</span><span class="sxs-lookup"><span data-stu-id="c8371-111">Targeting .NET Standard, and successfully compiling your project, doesn't guarantee the library will run successfully on all platforms:</span></span>

1. <span data-ttu-id="c8371-112">API propres aux plateformes échouera sur d’autres plateformes.</span><span class="sxs-lookup"><span data-stu-id="c8371-112">Platform-specific APIs will fail on other platforms.</span></span> <span data-ttu-id="c8371-113">Par exemple, <xref:Microsoft.Win32.Registry?displayProperty=nameWithType> réussissent sur Windows et de lever <xref:System.PlatformNotSupportedException> lorsqu’il est utilisé sur n’importe quel autre système d’exploitation.</span><span class="sxs-lookup"><span data-stu-id="c8371-113">For example, <xref:Microsoft.Win32.Registry?displayProperty=nameWithType> will succeed on Windows and throw <xref:System.PlatformNotSupportedException> when used on any other OS.</span></span>
2. <span data-ttu-id="c8371-114">API peuvent se comporter différemment.</span><span class="sxs-lookup"><span data-stu-id="c8371-114">APIs can behave differently.</span></span> <span data-ttu-id="c8371-115">Par exemple, la réflexion API ont les caractéristiques de performances différentes lorsqu’une application utilise la compilation ahead of time sur iOS ou UWP.</span><span class="sxs-lookup"><span data-stu-id="c8371-115">For example, reflection APIs have different performance characteristics when an application uses ahead-of-time compilation on iOS or UWP.</span></span>

> [!TIP]
> <span data-ttu-id="c8371-116">L’équipe .NET [offre un analyseur Roslyn](../analyzers/api-analyzer.md) pour vous aider à détecter les éventuels problèmes.</span><span class="sxs-lookup"><span data-stu-id="c8371-116">The .NET team [offers a Roslyn analyzer](../analyzers/api-analyzer.md) to help you discover possible issues.</span></span>

<span data-ttu-id="c8371-117">**FAIRE ✔️** commencer par y compris un `netstandard2.0` cible.</span><span class="sxs-lookup"><span data-stu-id="c8371-117">**✔️ DO** start with including a `netstandard2.0` target.</span></span>

> <span data-ttu-id="c8371-118">Plus les bibliothèques à usage général ne devez pas les API en dehors de .NET Standard 2.0.</span><span class="sxs-lookup"><span data-stu-id="c8371-118">Most general-purpose libraries should not need APIs outside of .NET Standard 2.0.</span></span> <span data-ttu-id="c8371-119">.NET standard 2.0 est pris en charge par toutes les plateformes modernes et est la méthode recommandée pour prendre en charge plusieurs plateformes avec une cible.</span><span class="sxs-lookup"><span data-stu-id="c8371-119">.NET Standard 2.0 is supported by all modern platforms and is the recommended way to support multiple platforms with one target.</span></span>

<span data-ttu-id="c8371-120">**Évitez de ❌** , y compris un `netstandard1.x` cible.</span><span class="sxs-lookup"><span data-stu-id="c8371-120">**❌ AVOID** including a `netstandard1.x` target.</span></span>

> <span data-ttu-id="c8371-121">.NET standard 1.x est distribué sous la forme d’un ensemble précis de packages NuGet, qui crée un graphique de dépendance de package volumineux et entraîne le téléchargement d’un grand nombre de packages lors de la génération de développeurs.</span><span class="sxs-lookup"><span data-stu-id="c8371-121">.NET Standard 1.x is distributed as a granular set of NuGet packages, which creates a large package dependency graph and results in developers downloading a lot of packages when building.</span></span> <span data-ttu-id="c8371-122">Les plateformes .NET modernes, y compris .NET Framework 4.6.1, UWP et Xamarin, tous les prennent en charge .NET Standard 2.0.</span><span class="sxs-lookup"><span data-stu-id="c8371-122">Modern .NET platforms, including .NET Framework 4.6.1, UWP and Xamarin, all support .NET Standard 2.0.</span></span> <span data-ttu-id="c8371-123">Vous devez uniquement cibler .NET Standard 1.x si vous avez besoin de cibler une plateforme plus ancienne.</span><span class="sxs-lookup"><span data-stu-id="c8371-123">You should only target .NET Standard 1.x if you specifically need to target an older platform.</span></span>

<span data-ttu-id="c8371-124">**FAIRE ✔️** incluent un `netstandard2.0` cible si vous avez besoin d’un `netstandard1.x` cible.</span><span class="sxs-lookup"><span data-stu-id="c8371-124">**✔️ DO** include a `netstandard2.0` target if you require a `netstandard1.x` target.</span></span>

> <span data-ttu-id="c8371-125">Toutes les plateformes prenant en charge .NET Standard 2.0 utilisera le `netstandard2.0` cible et de profiter d’un graphique de package plus petit tandis que les anciennes plateformes toujours travaillera et revenir à l’utilisation du `netstandard1.x` cible.</span><span class="sxs-lookup"><span data-stu-id="c8371-125">All platforms supporting .NET Standard 2.0 will use the `netstandard2.0` target and benefit from having a smaller package graph while older platforms will still work and fall back to using the `netstandard1.x` target.</span></span>

<span data-ttu-id="c8371-126">**N’est pas le cas de ❌** incluent une cible .NET Standard si la bibliothèque s’appuie sur un modèle d’application spécifique à la plateforme.</span><span class="sxs-lookup"><span data-stu-id="c8371-126">**❌ DO NOT** include a .NET Standard target if the library relies on a platform-specific app model.</span></span>

> <span data-ttu-id="c8371-127">Par exemple, une bibliothèque de boîte à outils contrôles UWP dépend d’un modèle d’application qui est uniquement disponible sur UWP.</span><span class="sxs-lookup"><span data-stu-id="c8371-127">For example, a UWP control toolkit library depends on an app model that is only available on UWP.</span></span> <span data-ttu-id="c8371-128">Modèle spécifiques de l’application API ne sera pas disponibles dans .NET Standard.</span><span class="sxs-lookup"><span data-stu-id="c8371-128">App model specific APIs will not be available in .NET Standard.</span></span>

## <a name="multi-targeting"></a><span data-ttu-id="c8371-129">Multi-ciblage</span><span class="sxs-lookup"><span data-stu-id="c8371-129">Multi-targeting</span></span>

<span data-ttu-id="c8371-130">Parfois, vous avez besoin accéder aux API de framework spécifique à partir de vos bibliothèques.</span><span class="sxs-lookup"><span data-stu-id="c8371-130">Sometimes you need to access framework-specific APIs from your libraries.</span></span> <span data-ttu-id="c8371-131">La meilleure façon d’appeler des API spécifiques à l’infrastructure est grâce au multi-ciblage, qui génère votre projet pour un grand nombre [frameworks cibles de .NET](../frameworks.md) plutôt que pour un seul.</span><span class="sxs-lookup"><span data-stu-id="c8371-131">The best way to call framework-specific APIs is using multi-targeting, which builds your project for many [.NET target frameworks](../frameworks.md) rather than for just one.</span></span>

<span data-ttu-id="c8371-132">Pour protéger vos consommateurs d’avoir à créer pour chaque infrastructure, vous devez vous efforcer d’avoir une sortie Standard de .NET ainsi qu’une ou plusieurs sorties spécifiques à l’infrastructure.</span><span class="sxs-lookup"><span data-stu-id="c8371-132">To shield your consumers from having to build for individual frameworks, you should strive to have a .NET Standard output plus one or more framework-specific outputs.</span></span> <span data-ttu-id="c8371-133">Avec la fonctionnalité de multi-ciblage, tous les assemblys sont empaquetées dans un seul package NuGet.</span><span class="sxs-lookup"><span data-stu-id="c8371-133">With multi-targeting, all assemblies are packaged inside a single NuGet package.</span></span> <span data-ttu-id="c8371-134">Les consommateurs peuvent ensuite référencer le même package et NuGet choisit l’implémentation appropriée.</span><span class="sxs-lookup"><span data-stu-id="c8371-134">Consumers can then reference the same package and NuGet will pick the appropriate implementation.</span></span> <span data-ttu-id="c8371-135">Votre bibliothèque .NET Standard sert de la bibliothèque de secours est utilisé partout, sauf pour les cas où votre package NuGet offre une implémentation spécifique de framework.</span><span class="sxs-lookup"><span data-stu-id="c8371-135">Your .NET Standard library serves as the fallback library that is used everywhere, except for the cases where your NuGet package offers a framework-specific implementation.</span></span> <span data-ttu-id="c8371-136">Multi-ciblage permet d’utiliser la compilation conditionnelle dans votre code et appeler des API spécifiques à l’infrastructure.</span><span class="sxs-lookup"><span data-stu-id="c8371-136">Multi-targeting allows you to use conditional compilation in your code and call framework-specific APIs.</span></span>

<span data-ttu-id="c8371-137">![Package NuGet avec plusieurs assemblys](./media/cross-platform-targeting/nuget-package-multiple-assemblies.png "package NuGet avec plusieurs assemblys")</span><span class="sxs-lookup"><span data-stu-id="c8371-137">![NuGet package with multiple assemblies](./media/cross-platform-targeting/nuget-package-multiple-assemblies.png "NuGet package with multiple assemblies")</span></span>

<span data-ttu-id="c8371-138">**ENVISAGEZ de ✔️** ciblant les implémentations de .NET en plus de .NET Standard.</span><span class="sxs-lookup"><span data-stu-id="c8371-138">**✔️ CONSIDER** targeting .NET implementations in addition to .NET Standard.</span></span>

> <span data-ttu-id="c8371-139">Ciblage des implémentations de .NET vous permet d’appeler les API spécifiques à la plateforme qui sont trouvent en dehors de .NET Standard.</span><span class="sxs-lookup"><span data-stu-id="c8371-139">Targeting .NET implementations allows you to call platform-specific APIs that are outside of .NET Standard.</span></span>
>
> <span data-ttu-id="c8371-140">Ne pas supprimer de prise en charge de .NET Standard lorsque vous effectuez cette opération.</span><span class="sxs-lookup"><span data-stu-id="c8371-140">Do not drop support for .NET Standard when you do this.</span></span> <span data-ttu-id="c8371-141">Au lieu de cela, lever à partir de l’implémentation et offre la fonctionnalité API.</span><span class="sxs-lookup"><span data-stu-id="c8371-141">Instead, throw from the implementation and offer capability APIs.</span></span> <span data-ttu-id="c8371-142">De cette façon, votre bibliothèque peut être utilisée partout et prend en charge le runtime mise en évidence des fonctionnalités.</span><span class="sxs-lookup"><span data-stu-id="c8371-142">This way, your library can be used anywhere and supports runtime light-up of features.</span></span>

<span data-ttu-id="c8371-143">**Évitez de ❌** à l’aide de multi-ciblage avec .NET Standard si votre code source est identique pour toutes les cibles.</span><span class="sxs-lookup"><span data-stu-id="c8371-143">**❌ AVOID** using multi-targeting with .NET Standard if your source code is the same for all targets.</span></span>

> <span data-ttu-id="c8371-144">L’assembly .NET Standard est automatiquement utilisé par NuGet.</span><span class="sxs-lookup"><span data-stu-id="c8371-144">The .NET Standard assembly will automatically be used by NuGet.</span></span> <span data-ttu-id="c8371-145">Ciblage des implémentations .NET individuelles augmente la `*.nupkg` taille sans recevoir aucun avantage.</span><span class="sxs-lookup"><span data-stu-id="c8371-145">Targeting individual .NET implementations increases the `*.nupkg` size for no benefit.</span></span>

<span data-ttu-id="c8371-146">**✔️ Envisagez** Ajout d’une cible pour `net461` lorsque que vous proposez un `netstandard2.0` cible.</span><span class="sxs-lookup"><span data-stu-id="c8371-146">**✔️ CONSIDER** adding a target for `net461` when you're offering a `netstandard2.0` target.</span></span> 

> <span data-ttu-id="c8371-147">À l’aide de .NET Standard 2.0 de .NET Framework a certains problèmes qui ont été résolus dans .NET Framework 4.7.2.</span><span class="sxs-lookup"><span data-stu-id="c8371-147">Using .NET Standard 2.0 from .NET Framework has some issues that were addressed in .NET Framework 4.7.2.</span></span> <span data-ttu-id="c8371-148">Vous pouvez améliorer l’expérience pour les développeurs qui se trouvent toujours sur .NET Framework 4.6.1 - 4.7.1 en leur offrant un fichier binaire qui est conçu pour le .NET Framework 4.6.1.</span><span class="sxs-lookup"><span data-stu-id="c8371-148">You can improve the experience for developers that are still on .NET Framework 4.6.1 - 4.7.1 by offering them a binary that is built for .NET Framework 4.6.1.</span></span>

<span data-ttu-id="c8371-149">**FAIRE ✔️** distribuer votre bibliothèque à l’aide d’un package NuGet.</span><span class="sxs-lookup"><span data-stu-id="c8371-149">**✔️ DO** distribute your library using a NuGet package.</span></span>

> <span data-ttu-id="c8371-150">NuGet sélectionne la meilleure cible pour les développeurs et de protéger les avoir à choisir l’implémentation appropriée.</span><span class="sxs-lookup"><span data-stu-id="c8371-150">NuGet will select the best target for the developer and shield them having to pick the appropriate implementation.</span></span>

<span data-ttu-id="c8371-151">**FAIRE ✔️** utiliser un fichier de projet `TargetFrameworks` propriété lors de la fonctionnalité de multi-ciblage.</span><span class="sxs-lookup"><span data-stu-id="c8371-151">**✔️ DO** use a project file's `TargetFrameworks` property when multi-targeting.</span></span>

```xml
<Project Sdk="Microsoft.NET.Sdk">
  <PropertyGroup>
    <!-- This project will output netstandard2.0 and net461 assemblies -->
    <TargetFrameworks>netstandard2.0;net461</TargetFrameworks>
  </PropertyGroup>
</Project>
```

<span data-ttu-id="c8371-152">**✔️ Envisagez** à l’aide de [MSBuild.Sdk.Extras](https://github.com/onovotny/MSBuildSdkExtras) lorsque multi-targeting pour UWP et Xamarin car il simplifie considérablement votre fichier projet.</span><span class="sxs-lookup"><span data-stu-id="c8371-152">**✔️ CONSIDER** using [MSBuild.Sdk.Extras](https://github.com/onovotny/MSBuildSdkExtras) when multi-targeting for UWP and Xamarin as it greatly simplifies your project file.</span></span>

## <a name="older-targets"></a><span data-ttu-id="c8371-153">Cibles plus anciens</span><span class="sxs-lookup"><span data-stu-id="c8371-153">Older targets</span></span>

<span data-ttu-id="c8371-154">.NET prend en charge des versions ciblage du .NET Framework qui sont longues en dehors de la prise en charge, ainsi que des plateformes n’est plus couramment utilisées.</span><span class="sxs-lookup"><span data-stu-id="c8371-154">.NET supports targeting versions of the .NET Framework that are long out of support as well as platforms that are no longer commonly used.</span></span> <span data-ttu-id="c8371-155">Pendant de valeur pour effectuer votre travail de bibliothèque sur comme de nombreux objectifs que possible, de devoir contourner manque des API peuvent ajouter importante surcharge.</span><span class="sxs-lookup"><span data-stu-id="c8371-155">While there's value in making your library work on as many targets as possible, having to work around missing APIs can add significant overhead.</span></span> <span data-ttu-id="c8371-156">Nous pensons que certaines infrastructures ne sont plus intéressant de ciblage, envisagez leur portée et les limitations.</span><span class="sxs-lookup"><span data-stu-id="c8371-156">We believe certain frameworks are no longer worth targeting, considering their reach and limitations.</span></span>

<span data-ttu-id="c8371-157">**N’est pas le cas de ❌** inclure une cible de la bibliothèque de classes Portable (PCL).</span><span class="sxs-lookup"><span data-stu-id="c8371-157">**❌ DO NOT** include a Portable Class Library (PCL) target.</span></span> <span data-ttu-id="c8371-158">Par exemple, `portable-net45+win8+wpa81+wp8`.</span><span class="sxs-lookup"><span data-stu-id="c8371-158">For example, `portable-net45+win8+wpa81+wp8`.</span></span>

> <span data-ttu-id="c8371-159">.NET standard est la manière moderne pour prendre en charge les bibliothèques .NET multiplateforme et remplace les bibliothèques de classes portables.</span><span class="sxs-lookup"><span data-stu-id="c8371-159">.NET Standard is the modern way to support cross-platform .NET libraries and replaces PCLs.</span></span>

<span data-ttu-id="c8371-160">**N’est pas le cas de ❌** incluent des cibles pour les plateformes .NET qui ne sont plus prises en charge.</span><span class="sxs-lookup"><span data-stu-id="c8371-160">**❌ DO NOT** include targets for .NET platforms that are no longer supported.</span></span> <span data-ttu-id="c8371-161">Par exemple, `SL4`, `WP`.</span><span class="sxs-lookup"><span data-stu-id="c8371-161">For example, `SL4`, `WP`.</span></span>

>[!div class="step-by-step"]
<span data-ttu-id="c8371-162">[Précédent](./get-started.md)
[Suivant](./strong-naming.md)</span><span class="sxs-lookup"><span data-stu-id="c8371-162">[Previous](./get-started.md)
[Next](./strong-naming.md)</span></span>
