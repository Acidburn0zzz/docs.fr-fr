---
title: Instructions de codage sécurisé
ms.date: 03/30/2017
ms.technology: dotnet-standard
helpviewer_keywords:
- managed wrapper to native code implementation
- secure coding
- reusable components
- library code that exposes protected resources
- code, security
- code security
- secure coding, options
- components [.NET Framework], security
- code security, options
- security-neutral code
- security [.NET Framework], coding guidelines
ms.assetid: 4f882d94-262b-4494-b0a6-ba9ba1f5f177
author: mairaw
ms.author: mairaw
ms.openlocfilehash: f8d61e76a657c7341ec7dfcede6d7dc9943d4659
ms.sourcegitcommit: 3d5d33f384eeba41b2dff79d096f47ccc8d8f03d
ms.translationtype: MT
ms.contentlocale: fr-FR
ms.lasthandoff: 05/04/2018
ms.locfileid: "33588159"
---
# <a name="secure-coding-guidelines"></a><span data-ttu-id="bc62c-102">Instructions de codage sécurisé</span><span class="sxs-lookup"><span data-stu-id="bc62c-102">Secure Coding Guidelines</span></span>
<span data-ttu-id="bc62c-103">La sécurité basée sur les preuves et la sécurité d’accès du code fournissent des mécanismes particulièrement puissants et explicites d’implémentation de la sécurité.</span><span class="sxs-lookup"><span data-stu-id="bc62c-103">Evidence-based security and code access security provide very powerful, explicit mechanisms to implement security.</span></span> <span data-ttu-id="bc62c-104">La plupart des codes d’application peuvent simplement utiliser l’infrastructure implémentée par le .NET Framework.</span><span class="sxs-lookup"><span data-stu-id="bc62c-104">Most application code can simply use the infrastructure implemented by the .NET Framework.</span></span> <span data-ttu-id="bc62c-105">Dans certains cas, une sécurité supplémentaire spécifique à l’application est nécessaire, générée via l’extension du système de sécurité ou via de nouvelles méthodes ad hoc.</span><span class="sxs-lookup"><span data-stu-id="bc62c-105">In some cases, additional application-specific security is required, built either by extending the security system or by using new ad hoc methods.</span></span>  
  
 <span data-ttu-id="bc62c-106">Vous devez utiliser les autorisations appliquées par le .NET Framework et d’autres vérifications dans le code pour dresser des barrières visant à empêcher un code malveillant d’obtenir des informations que vous ne voulez pas partager ou d’effectuer d’autres actions indésirables.</span><span class="sxs-lookup"><span data-stu-id="bc62c-106">Using the .NET Framework-enforced permissions and other enforcement in your code, you should erect barriers to prevent malicious code from obtaining information that you do not want it to have or performing other undesirable actions.</span></span> <span data-ttu-id="bc62c-107">En outre, il vous faut trouver un compromis entre la sécurité et les possibilités d’utilisation dans tous les scénarios prévus qui utilisent du code de confiance.</span><span class="sxs-lookup"><span data-stu-id="bc62c-107">Additionally, you must strike a balance between security and usability in all the expected scenarios using trusted code.</span></span>  
  
 <span data-ttu-id="bc62c-108">Cette présentation décrit les différents procédés permettant de concevoir du code qui fonctionne avec le système de sécurité.</span><span class="sxs-lookup"><span data-stu-id="bc62c-108">This overview describes the different ways code can be designed to work with the security system.</span></span>  
  
## <a name="securing-resource-access"></a><span data-ttu-id="bc62c-109">Sécurisation de l’accès aux ressources</span><span class="sxs-lookup"><span data-stu-id="bc62c-109">Securing Resource Access</span></span>  
 <span data-ttu-id="bc62c-110">Lorsque vous concevez et écrivez votre code, vous devez protéger et limiter l’accès du code aux ressources, tout particulièrement quand vous utilisez ou appelez un code d’une origine inconnue.</span><span class="sxs-lookup"><span data-stu-id="bc62c-110">When designing and writing your code, you need to protect and limit the access that code has to resources, especially when using or invoking code of unknown origin.</span></span> <span data-ttu-id="bc62c-111">Par conséquent, ayez à l’esprit les techniques suivantes afin de garantir la sécurité de votre code :</span><span class="sxs-lookup"><span data-stu-id="bc62c-111">So, keep in mind the following techniques to ensure your code is secure:</span></span>  
  
-   <span data-ttu-id="bc62c-112">N’utilisez pas la sécurité d’accès du code (CAS, Code Access Security).</span><span class="sxs-lookup"><span data-stu-id="bc62c-112">Do not use Code Access Security (CAS).</span></span>  
  
-   <span data-ttu-id="bc62c-113">N’utilisez pas du code de confiance partielle.</span><span class="sxs-lookup"><span data-stu-id="bc62c-113">Do not use partial trusted code.</span></span>  
  
-   <span data-ttu-id="bc62c-114">N’utilisez pas .NET Remoting.</span><span class="sxs-lookup"><span data-stu-id="bc62c-114">Do not use .NET Remoting.</span></span>  
  
-   <span data-ttu-id="bc62c-115">N’utilisez pas le modèle COM distribué (Distributed Component Object Model, DCOM).</span><span class="sxs-lookup"><span data-stu-id="bc62c-115">Do not use Distributed Component Object Model (DCOM).</span></span>  
  
-   <span data-ttu-id="bc62c-116">N’utilisez pas de formateurs binaires.</span><span class="sxs-lookup"><span data-stu-id="bc62c-116">Do not use binary formatters.</span></span>  
  
 <span data-ttu-id="bc62c-117">La sécurité d’accès au code et le code transparent de sécurité ne seront pas pris en charge en tant que frontière de sécurité avec du code d’un niveau de confiance partiel.</span><span class="sxs-lookup"><span data-stu-id="bc62c-117">Code Access Security and Security-Transparent Code will not be supported as a security boundary with partially trusted code.</span></span> <span data-ttu-id="bc62c-118">Nous vous déconseillons de charger et d'exécuter du code d'origine inconnue sans mettre en place d'autres mesures de sécurité.</span><span class="sxs-lookup"><span data-stu-id="bc62c-118">We advise against loading and executing code of unknown origins without putting alternative security measures in place.</span></span> <span data-ttu-id="bc62c-119">Les autres mesures de sécurité sont les suivantes :</span><span class="sxs-lookup"><span data-stu-id="bc62c-119">The alternative security measures are:</span></span>  
  
-   <span data-ttu-id="bc62c-120">Virtualisation</span><span class="sxs-lookup"><span data-stu-id="bc62c-120">Virtualization</span></span>  
  
-   <span data-ttu-id="bc62c-121">Conteneurs d’applications</span><span class="sxs-lookup"><span data-stu-id="bc62c-121">AppContainers</span></span>  
  
-   <span data-ttu-id="bc62c-122">Utilisateurs et autorisations du système d’exploitation</span><span class="sxs-lookup"><span data-stu-id="bc62c-122">Operating system (OS) users and permissions</span></span>  
  
-   <span data-ttu-id="bc62c-123">Conteneurs Hyper-V</span><span class="sxs-lookup"><span data-stu-id="bc62c-123">Hyper-V containers</span></span>  
  
## <a name="security-neutral-code"></a><span data-ttu-id="bc62c-124">Code indépendant de la sécurité</span><span class="sxs-lookup"><span data-stu-id="bc62c-124">Security-Neutral Code</span></span>  
 <span data-ttu-id="bc62c-125">Un code indépendant de la sécurité ne fait rien d’explicite avec le système de sécurité.</span><span class="sxs-lookup"><span data-stu-id="bc62c-125">Security-neutral code does nothing explicit with the security system.</span></span> <span data-ttu-id="bc62c-126">Il s’exécute quelles que soient les autorisations qu’il reçoit.</span><span class="sxs-lookup"><span data-stu-id="bc62c-126">It runs with whatever permissions it receives.</span></span> <span data-ttu-id="bc62c-127">Des applications qui ne parviennent pas à intercepter les exceptions de sécurité associées à des opérations protégées (comme l’utilisation de fichiers, la mise en réseau, etc.) peuvent engendrer une exception non gérée, mais le code indépendant de la sécurité tire néanmoins parti des technologies de sécurité du .NET Framework.</span><span class="sxs-lookup"><span data-stu-id="bc62c-127">Although applications that fail to catch security exceptions associated with protected operations (such as using files, networking, and so on) can result in an unhandled exception, security-neutral code still takes advantage of the .NET Framework security technologies.</span></span>  
  
 <span data-ttu-id="bc62c-128">Une bibliothèque indépendante de la sécurité possède des caractéristiques particulières que vous devez connaître.</span><span class="sxs-lookup"><span data-stu-id="bc62c-128">A security-neutral library has special characteristics that you should understand.</span></span> <span data-ttu-id="bc62c-129">Supposons que votre bibliothèque fournisse des éléments d’API qui utilisent des fichiers ou appellent du code non managé. Si votre code ne possède pas l’autorisation correspondante, il ne s’exécutera pas comme décrit.</span><span class="sxs-lookup"><span data-stu-id="bc62c-129">Suppose your library provides API elements that use files or call unmanaged code; if your code does not have the corresponding permission, it will not run as described.</span></span> <span data-ttu-id="bc62c-130">Toutefois, même si le code possède cette autorisation, n’importe quel autre code d’application qui l’appelle doit avoir la même autorisation pour pouvoir fonctionner.</span><span class="sxs-lookup"><span data-stu-id="bc62c-130">However, even if the code has the permission, any application code that calls it must have the same permission in order to work.</span></span> <span data-ttu-id="bc62c-131">Si le code appelant n’a pas l’autorisation appropriée, une <xref:System.Security.SecurityException> s’affiche à la suite le parcours de pile de code access security.</span><span class="sxs-lookup"><span data-stu-id="bc62c-131">If the calling code does not have the right permission, a <xref:System.Security.SecurityException> appears as a result of the code access security stack walk.</span></span>  
  
## <a name="application-code-that-is-not-a-reusable-component"></a><span data-ttu-id="bc62c-132">Code d’application ne correspondant pas à un composant réutilisable</span><span class="sxs-lookup"><span data-stu-id="bc62c-132">Application Code That Is Not a Reusable Component</span></span>  
 <span data-ttu-id="bc62c-133">Si votre code fait partie d’une application qui ne sera pas appelée par un autre code, la sécurité est simple et un codage spécial peut ne pas être requis.</span><span class="sxs-lookup"><span data-stu-id="bc62c-133">If your code is part of an application that will not be called by other code, security is simple and special coding might not be required.</span></span> <span data-ttu-id="bc62c-134">Toutefois, n’oubliez pas qu’un code malveillant peut appeler votre code.</span><span class="sxs-lookup"><span data-stu-id="bc62c-134">However, remember that malicious code can call your code.</span></span> <span data-ttu-id="bc62c-135">Si la sécurité d’accès du code peut empêcher le code malveillant d’accéder à des ressources, ce type de code est toutefois capable de lire les valeurs de vos champs ou propriétés susceptibles de contenir des informations confidentielles.</span><span class="sxs-lookup"><span data-stu-id="bc62c-135">While code access security might stop malicious code from accessing resources, such code could still read values of your fields or properties that might contain sensitive information.</span></span>  
  
 <span data-ttu-id="bc62c-136">De plus, si votre code accepte des entrées utilisateur à partir d’Internet ou d’autres sources peu fiables, vous devez vous méfier des entrées malveillantes.</span><span class="sxs-lookup"><span data-stu-id="bc62c-136">Additionally, if your code accepts user input from the Internet or other unreliable sources, you must be careful about malicious input.</span></span>  
  
## <a name="managed-wrapper-to-native-code-implementation"></a><span data-ttu-id="bc62c-137">Implémentation d’un wrapper managé vers du code natif</span><span class="sxs-lookup"><span data-stu-id="bc62c-137">Managed Wrapper to Native Code Implementation</span></span>  
 <span data-ttu-id="bc62c-138">Dans ce scénario, certaines fonctionnalités utiles sont implémentées dans du code natif que vous souhaitez mettre à la disposition du code managé.</span><span class="sxs-lookup"><span data-stu-id="bc62c-138">Typically in this scenario, some useful functionality is implemented in native code that you want to make available to managed code.</span></span> <span data-ttu-id="bc62c-139">Il est aisé d’écrire des wrappers managés en utilisant l’appel de code non managé ou COM Interop.</span><span class="sxs-lookup"><span data-stu-id="bc62c-139">Managed wrappers are easy to write using either platform invoke or COM interop.</span></span> <span data-ttu-id="bc62c-140">Toutefois, si vous procédez ainsi, les appelants de vos wrappers doivent avoir des droits de code non managé pour réussir.</span><span class="sxs-lookup"><span data-stu-id="bc62c-140">However, if you do this, callers of your wrappers must have unmanaged code rights in order to succeed.</span></span> <span data-ttu-id="bc62c-141">Dans le cadre de la stratégie par défaut, cela signifie que le code téléchargé depuis un intranet ou Internet ne fonctionne pas avec les wrappers.</span><span class="sxs-lookup"><span data-stu-id="bc62c-141">Under default policy, this means that code downloaded from an intranet or the Internet will not work with the wrappers.</span></span>  
  
 <span data-ttu-id="bc62c-142">Au lieu d’accorder des droits de code non managé à toutes les applications qui utilisent ces wrappers, il est préférable d’accorder ces droits uniquement au code wrapper.</span><span class="sxs-lookup"><span data-stu-id="bc62c-142">Instead of giving all applications that use these wrappers unmanaged code rights, it is better to give these rights only to the wrapper code.</span></span> <span data-ttu-id="bc62c-143">Si les fonctionnalités sous-jacentes n’exposent aucune ressource et que l’implémentation est également sécurisée, le wrapper doit simplement déclarer ses droits, ce qui permet à n’importe quel code d’effectuer un appel via celui-ci.</span><span class="sxs-lookup"><span data-stu-id="bc62c-143">If the underlying functionality exposes no resources and the implementation is likewise safe, the wrapper only needs to assert its rights, which enables any code to call through it.</span></span> <span data-ttu-id="bc62c-144">Lorsque des ressources sont impliquées, le codage de sécurité doit être identique à l’exemple de code de bibliothèque décrit dans la section suivante.</span><span class="sxs-lookup"><span data-stu-id="bc62c-144">When resources are involved, security coding should be the same as the library code case described in the next section.</span></span> <span data-ttu-id="bc62c-145">Comme le wrapper expose potentiellement les appelants à ces ressources, une vérification minutieuse de la sécurité du code natif est nécessaire. Celle-ci relève de la responsabilité du wrapper.</span><span class="sxs-lookup"><span data-stu-id="bc62c-145">Because the wrapper is potentially exposing callers to these resources, careful verification of the safety of the native code is necessary and is the wrapper's responsibility.</span></span>  
  
## <a name="library-code-that-exposes-protected-resources"></a><span data-ttu-id="bc62c-146">Code de bibliothèque exposant des ressources protégées</span><span class="sxs-lookup"><span data-stu-id="bc62c-146">Library Code That Exposes Protected Resources</span></span>  
 <span data-ttu-id="bc62c-147">Il s’agit de l’approche la plus puissante et donc la plus risquée (si elle n’est pas exécutée correctement) du codage de sécurité : votre bibliothèque sert d’interface permettant à un autre code d’accéder à certaines ressources qui ne sont pas disponibles autrement, tout comme les classes du .NET Framework appliquent des autorisations pour les ressources qu’elles utilisent.</span><span class="sxs-lookup"><span data-stu-id="bc62c-147">This is the most powerful and hence potentially dangerous (if done incorrectly) approach for security coding: Your library serves as an interface for other code to access certain resources that are not otherwise available, just as the classes of the .NET Framework enforce permissions for the resources they use.</span></span> <span data-ttu-id="bc62c-148">Chaque fois que vous exposez une ressource, votre code doit en premier lieu demander l’autorisation appropriée à la ressource (autrement dit, il doit effectuer une vérification de sécurité), puis généralement déclarer ses droits pour effectuer l’opération proprement dite.</span><span class="sxs-lookup"><span data-stu-id="bc62c-148">Wherever you expose a resource, your code must first demand the permission appropriate to the resource (that is, it must perform a security check) and then typically assert its rights to perform the actual operation.</span></span>  
  
## <a name="related-topics"></a><span data-ttu-id="bc62c-149">Rubriques connexes</span><span class="sxs-lookup"><span data-stu-id="bc62c-149">Related Topics</span></span>  
  
|<span data-ttu-id="bc62c-150">Titre</span><span class="sxs-lookup"><span data-stu-id="bc62c-150">Title</span></span>|<span data-ttu-id="bc62c-151">Description</span><span class="sxs-lookup"><span data-stu-id="bc62c-151">Description</span></span>|  
|-----------|-----------------|  
|[<span data-ttu-id="bc62c-152">Sécurisation des données d’état</span><span class="sxs-lookup"><span data-stu-id="bc62c-152">Securing State Data</span></span>](../../../docs/standard/security/securing-state-data.md)|<span data-ttu-id="bc62c-153">Décrit comment protéger les membres privés.</span><span class="sxs-lookup"><span data-stu-id="bc62c-153">Describes how to protect private members.</span></span>|  
|[<span data-ttu-id="bc62c-154">Sécurité et entrées d’utilisateur</span><span class="sxs-lookup"><span data-stu-id="bc62c-154">Security and User Input</span></span>](../../../docs/standard/security/security-and-user-input.md)|<span data-ttu-id="bc62c-155">Décrit les problèmes de sécurité liés à des applications qui acceptent les entrées utilisateur.</span><span class="sxs-lookup"><span data-stu-id="bc62c-155">Describes security concerns for applications that accept user input.</span></span>|  
|[<span data-ttu-id="bc62c-156">Sécurité et conditions de concurrence</span><span class="sxs-lookup"><span data-stu-id="bc62c-156">Security and Race Conditions</span></span>](../../../docs/standard/security/security-and-race-conditions.md)|<span data-ttu-id="bc62c-157">Décrit comment éviter des conditions de concurrence critique dans votre code.</span><span class="sxs-lookup"><span data-stu-id="bc62c-157">Describes how to avoid race conditions in your code.</span></span>|  
|[<span data-ttu-id="bc62c-158">Sécurité et génération de code immédiate</span><span class="sxs-lookup"><span data-stu-id="bc62c-158">Security and On-the-Fly Code Generation</span></span>](../../../docs/standard/security/security-and-on-the-fly-code-generation.md)|<span data-ttu-id="bc62c-159">Décrit les problèmes de sécurité liés à des applications qui génèrent du code dynamique.</span><span class="sxs-lookup"><span data-stu-id="bc62c-159">Describes security concerns for applications that generate dynamic code.</span></span>|  
|[<span data-ttu-id="bc62c-160">Sécurité basée sur les rôles</span><span class="sxs-lookup"><span data-stu-id="bc62c-160">Role-Based Security</span></span>](../../../docs/standard/security/role-based-security.md)|<span data-ttu-id="bc62c-161">Fournit une description détaillée de la sécurité basée sur les rôles de .NET Framework et explique comment l’utiliser dans votre code.</span><span class="sxs-lookup"><span data-stu-id="bc62c-161">Describes .NET Framework role-based security in detail and provides instructions for using it in your code.</span></span>|
