---
title: "Common architectures d’application web"
description: "Architecture des applications web avec ASP.NET Core et Microsoft Azure | Common architectures d’application web"
author: ardalis
ms.author: wiwagn
ms.date: 10/06/2017
ms.prod: .net-core
ms.technology: dotnet-docker
ms.openlocfilehash: b6236cfab290211f930d6a1987075abeade4fd6d
ms.sourcegitcommit: 4f3fef493080a43e70e951223894768d36ce430a
ms.translationtype: HT
ms.contentlocale: fr-FR
ms.lasthandoff: 11/21/2017
---
#<a name="common-web-application-architectures"></a><span data-ttu-id="06e88-103">Common Architectures d’Application Web</span><span class="sxs-lookup"><span data-stu-id="06e88-103">Common Web Application Architectures</span></span>

> <span data-ttu-id="06e88-104">« Si vous pensez que la bonne architecture est coûteuse, essayez une architecture incorrecte. »</span><span class="sxs-lookup"><span data-stu-id="06e88-104">"If you think good architecture is expensive, try bad architecture."</span></span>  
> <span data-ttu-id="06e88-105">_-Brian pi et Joseph Yoder_</span><span class="sxs-lookup"><span data-stu-id="06e88-105">_- Brian Foote and Joseph Yoder_</span></span>

## <a name="summary"></a><span data-ttu-id="06e88-106">Résumé</span><span class="sxs-lookup"><span data-stu-id="06e88-106">Summary</span></span>

<span data-ttu-id="06e88-107">.NET traditionnels sont déployées sous la forme d’unités correspondant à un fichier exécutable ou une seule application web qui s’exécutent dans un appdomain IIS unique.</span><span class="sxs-lookup"><span data-stu-id="06e88-107">Most traditional .NET applications are deployed as single units corresponding to an executable or a single web application running within a single IIS appdomain.</span></span> <span data-ttu-id="06e88-108">Cela est le modèle de déploiement plus simple et sert de nombreuses applications internes et publics plus petites très bien.</span><span class="sxs-lookup"><span data-stu-id="06e88-108">This is the simplest deployment model and serves many internal and smaller public applications very well.</span></span> <span data-ttu-id="06e88-109">Toutefois, même si cette unité de déploiement unique, la plupart des applications métier non trivial bénéficient certaine séparation logique en plusieurs couches.</span><span class="sxs-lookup"><span data-stu-id="06e88-109">However, even given this single unit of deployment, most non-trivial business applications benefit from some logical separation into several layers.</span></span>

## <a name="what-is-a-monolithic-application"></a><span data-ttu-id="06e88-110">Qu’est une application monolithique ?</span><span class="sxs-lookup"><span data-stu-id="06e88-110">What is a monolithic application?</span></span>

<span data-ttu-id="06e88-111">Une application monolithique n’est complète, en termes de son comportement.</span><span class="sxs-lookup"><span data-stu-id="06e88-111">A monolithic application is one that is entirely self-contained, in terms of its behavior.</span></span> <span data-ttu-id="06e88-112">Il peut interagir avec d’autres banques de données ou des services au cours de ses opérations, mais la base de son comportement s’exécute dans son propre processus et l’ensemble de l’application est généralement déployé comme une unité unique.</span><span class="sxs-lookup"><span data-stu-id="06e88-112">It may interact with other services or data stores in the course of performing its operations, but the core of its behavior runs within its own process and the entire application is typically deployed as a single unit.</span></span> <span data-ttu-id="06e88-113">Si une telle application doit pouvoir évoluer horizontalement, en général, l’application entière est dupliquée sur plusieurs serveurs ou ordinateurs virtuels.</span><span class="sxs-lookup"><span data-stu-id="06e88-113">If such an application needs to scale horizontally, typically the entire application is duplicated across multiple servers or virtual machines.</span></span>

## <a name="all-in-one-applications"></a><span data-ttu-id="06e88-114">Applications de tout-en-un</span><span class="sxs-lookup"><span data-stu-id="06e88-114">All-in-One applications</span></span>

<span data-ttu-id="06e88-115">Le plus petit nombre possible de projets pour une architecture d’application est un.</span><span class="sxs-lookup"><span data-stu-id="06e88-115">The smallest possible number of projects for an application architecture is one.</span></span> <span data-ttu-id="06e88-116">Dans cette architecture, l’intégralité de la logique de l’application est contenue dans un seul projet compilé dans un assembly unique et déployé comme une unité unique.</span><span class="sxs-lookup"><span data-stu-id="06e88-116">In this architecture, the entire logic of the application is contained in a single project, compiled to a single assembly, and deployed as a single unit.</span></span>

<span data-ttu-id="06e88-117">Un nouveau projet ASP.NET Core, si créée dans Visual Studio ou à partir de la ligne de commande démarre comme un simple monolithique de « tout-en-un ».</span><span class="sxs-lookup"><span data-stu-id="06e88-117">A new ASP.NET Core project, whether created in Visual Studio or from the command line, starts out as a simple "all-in-one" monolith.</span></span> <span data-ttu-id="06e88-118">Il contient l’ensemble du comportement de l’application, y compris la logique de présentation, métier et données d’accès.</span><span class="sxs-lookup"><span data-stu-id="06e88-118">It contains all of the behavior of the application, including presentation, business, and data access logic.</span></span> <span data-ttu-id="06e88-119">Figure 5-1 montre la structure des fichiers d’une application de projet unique.</span><span class="sxs-lookup"><span data-stu-id="06e88-119">Figure 5-1 shows the file structure of a single-project app.</span></span>

<span data-ttu-id="06e88-120">**Figure 5-1.**</span><span class="sxs-lookup"><span data-stu-id="06e88-120">**Figure 5-1.**</span></span> <span data-ttu-id="06e88-121">Un seul projet ASP.NET Core application</span><span class="sxs-lookup"><span data-stu-id="06e88-121">A single project ASP.NET Core app</span></span>

![](./media/image5-1.png)

<span data-ttu-id="06e88-122">Dans un scénario de projet unique, la séparation des problèmes est obtenue grâce à l’utilisation des dossiers.</span><span class="sxs-lookup"><span data-stu-id="06e88-122">In a single project scenario, separation of concerns is achieved through the use of folders.</span></span> <span data-ttu-id="06e88-123">Le modèle par défaut inclut des dossiers distincts pour les responsabilités du modèle MVC de modèles, des vues et des contrôleurs, ainsi que des dossiers supplémentaires pour les Services et les données.</span><span class="sxs-lookup"><span data-stu-id="06e88-123">The default template includes separate folders for MVC pattern responsibilities of Models, Views, and Controllers, as well as additional folders for Data and Services.</span></span> <span data-ttu-id="06e88-124">Dans cette configuration, les détails de présentation doivent être limitées autant que possible dans le dossier Views et détails d’implémentation d’un accès aux données doivent être limités aux classes conservés dans le dossier de données.</span><span class="sxs-lookup"><span data-stu-id="06e88-124">In this arrangement, presentation details should be limited as much as possible to the Views folder, and data access implementation details should be limited to classes kept in the Data folder.</span></span> <span data-ttu-id="06e88-125">Logique métier doit résider dans les classes dans le dossier de modèles et de services.</span><span class="sxs-lookup"><span data-stu-id="06e88-125">Business logic should reside in services and classes within the Models folder.</span></span>

<span data-ttu-id="06e88-126">Bien que simple, la solution monolithique de projet unique présente des inconvénients.</span><span class="sxs-lookup"><span data-stu-id="06e88-126">Although simple, the single-project monolithic solution has some disadvantages.</span></span> <span data-ttu-id="06e88-127">Comme la taille et la complexité du projet augmente, le nombre de fichiers et dossiers continueront à croître également.</span><span class="sxs-lookup"><span data-stu-id="06e88-127">As the project's size and complexity grows, the number of files and folders will continue to grow as well.</span></span> <span data-ttu-id="06e88-128">Problèmes d’interface utilisateur (modèles, vues, contrôleurs) se trouvent dans plusieurs dossiers qui ne sont pas regroupés par ordre alphabétique.</span><span class="sxs-lookup"><span data-stu-id="06e88-128">UI concerns (models, views, controllers) reside in multiple folders, which are not grouped together alphabetically.</span></span> <span data-ttu-id="06e88-129">Ce problème seulement s’aggrave lorsque des constructions supplémentaires au niveau de l’interface utilisateur, telles que les filtres ou ModelBinders, sont ajoutées dans leurs propres dossiers.</span><span class="sxs-lookup"><span data-stu-id="06e88-129">This issue only gets worse when additional UI-level constructs, such as Filters or ModelBinders, are added in their own folders.</span></span> <span data-ttu-id="06e88-130">Logique métier est répartie entre les dossiers de modèles et des Services, et il n’existe aucun signe évident dont les classes dans les dossiers qui doivent s’appuyer sur d’autres.</span><span class="sxs-lookup"><span data-stu-id="06e88-130">Business logic is scattered between the Models and Services folders, and there is no clear indication of which classes in which folders should depend on which others.</span></span> <span data-ttu-id="06e88-131">Ce manque de l’organisation au niveau du projet se traduit généralement par [code spaghetti](http://deviq.com/spaghetti-code/).</span><span class="sxs-lookup"><span data-stu-id="06e88-131">This lack of organization at the project level frequently leads to [spaghetti code](http://deviq.com/spaghetti-code/).</span></span>

<span data-ttu-id="06e88-132">Pour résoudre ces problèmes, applications deviennent souvent des solutions à projets multiples, où chaque projet est considéré comme résidant dans un particulier *couche* de l’application.</span><span class="sxs-lookup"><span data-stu-id="06e88-132">In order to address these issues, applications often evolve into multi-project solutions, where each project is considered to reside in a particular *layer* of the application.</span></span>

## <a name="what-are-layers"></a><span data-ttu-id="06e88-133">Quelles sont les couches ?</span><span class="sxs-lookup"><span data-stu-id="06e88-133">What are layers?</span></span>

<span data-ttu-id="06e88-134">Comme les applications de croître en complexité, une méthode pour gérer cette complexité consiste à décomposer l’application en fonction de ses responsabilités ou les problèmes.</span><span class="sxs-lookup"><span data-stu-id="06e88-134">As applications grow in complexity, one way to manage that complexity is to break the application up according to its responsibilities or concerns.</span></span> <span data-ttu-id="06e88-135">Suit la séparation du principe de problèmes, il peut aider à conserver une base de code croissante organisée afin que les développeurs peuvent facilement rechercher où certaines fonctionnalités sont implémentées.</span><span class="sxs-lookup"><span data-stu-id="06e88-135">This follows the separation of concerns principle, and can help keep a growing codebase organized so that developers can easily find where certain functionality is implemented.</span></span> <span data-ttu-id="06e88-136">Architecture multiniveau offre plusieurs avantages au-delà de l’organisation de code uniquement, cependant.</span><span class="sxs-lookup"><span data-stu-id="06e88-136">Layered architecture offers a number of advantages beyond just code organization, though.</span></span>

<span data-ttu-id="06e88-137">En organisant code en couches, des fonctionnalités communes de bas niveau peuvent être réutilisées dans l’ensemble de l’application.</span><span class="sxs-lookup"><span data-stu-id="06e88-137">By organizing code into layers, common low-level functionality can be reused throughout the application.</span></span> <span data-ttu-id="06e88-138">Cette réutilisation est bénéfique, car il a donc que besoin de moins de code à écrire et car elle permet à l’application afin de normaliser sur une implémentation unique, selon le principe sec.</span><span class="sxs-lookup"><span data-stu-id="06e88-138">This reuse is beneficial because it means less code needs to be written and because it can allow the application to standardize on a single implementation, following the DRY principle.</span></span>

<span data-ttu-id="06e88-139">Avec une architecture en couches, les applications peuvent appliquer des restrictions sur lequel les couches peuvent communiquer avec les autres couches.</span><span class="sxs-lookup"><span data-stu-id="06e88-139">With a layered architecture, applications can enforce restrictions on which layers can communicate with other layers.</span></span> <span data-ttu-id="06e88-140">Cela permet d’améliorer l’encapsulation.</span><span class="sxs-lookup"><span data-stu-id="06e88-140">This helps to achieve encapsulation.</span></span> <span data-ttu-id="06e88-141">Lorsqu’une couche est modifiée ou remplacée, seuls ces couches qui fonctionnent avec lui doivent être affectées.</span><span class="sxs-lookup"><span data-stu-id="06e88-141">When a layer is changed or replaced, only those layers that work with it should be impacted.</span></span> <span data-ttu-id="06e88-142">En limitant qui couches varient sur lequel les autres couches, l’impact de modifications peuvent être atténuées afin qu’une seule modification n’affecte pas l’application entière.</span><span class="sxs-lookup"><span data-stu-id="06e88-142">By limiting which layers depend on which other layers, the impact of changes can be mitigated so that a single change doesn't impact the entire application.</span></span>

<span data-ttu-id="06e88-143">Couches (et encapsulation) rendent beaucoup plus facile de remplacer la fonctionnalité de l’application.</span><span class="sxs-lookup"><span data-stu-id="06e88-143">Layers (and encapsulation) make it much easier to replace functionality within the application.</span></span> <span data-ttu-id="06e88-144">Par exemple, une application peut utiliser initialement sa propre base de données SQL Server pour la persistance, mais plus tard peut choisir d’utiliser une stratégie basée sur le cloud de persistance, ou un derrière une API web.</span><span class="sxs-lookup"><span data-stu-id="06e88-144">For example, an application might initially use its own SQL Server database for persistence, but later could choose to use a cloud-based persistence strategy, or one behind a web API.</span></span> <span data-ttu-id="06e88-145">Si l’application a encapsulé correctement son implémentation de persistance au sein d’une couche logique, cette couche spécifique de SQL Server a remplacé par une implémentation de la même interface publique.</span><span class="sxs-lookup"><span data-stu-id="06e88-145">If the application has properly encapsulated its persistence implementation within a logical layer, that SQL Server specific layer could be replaced by a new one implementing the same public interface.</span></span>

<span data-ttu-id="06e88-146">Outre la possibilité de permutation des implémentations en réponse aux modifications futures dans la configuration requise, les couches application également facilitent permuter des implémentations à des fins de test.</span><span class="sxs-lookup"><span data-stu-id="06e88-146">In addition to the potential of swapping out implementations in response to future changes in requirements, application layers can also make it easier to swap out implementations for testing purposes.</span></span> <span data-ttu-id="06e88-147">Au lieu d’écrire des tests qui fonctionnent sur la couche de données réelles ou l’interface utilisateur de l’application, ces couches peuvent être remplacés au moment de test avec des implémentations factices qui fournissent des réponses aux demandes connus.</span><span class="sxs-lookup"><span data-stu-id="06e88-147">Instead of having to write tests that operate against the real data layer or UI layer of the application, these layers can be replaced at test time with fake implementations that provide known responses to requests.</span></span> <span data-ttu-id="06e88-148">En règle générale, cela fait tests beaucoup plus facile à écrire et beaucoup plus rapides à exécuter par rapport à exécuter les tests à nouveau infrastructure réelle de l’application.</span><span class="sxs-lookup"><span data-stu-id="06e88-148">This typically makes tests much easier to write and much faster to run when compared to running tests again the application's real infrastructure.</span></span>

<span data-ttu-id="06e88-149">En couches logiques est une technique courante pour l’amélioration de l’organisation de code dans les applications d’entreprise, et il existe plusieurs façons dans lequel le code peut être organisé en couches.</span><span class="sxs-lookup"><span data-stu-id="06e88-149">Logical layering is a common technique for improving the organization of code in enterprise software applications, and there are several ways in which code can be organized into layers.</span></span>

> [!NOTE]
> <span data-ttu-id="06e88-150">*Couches* représentent une séparation logique dans l’application.</span><span class="sxs-lookup"><span data-stu-id="06e88-150">*Layers* represent logical separation within the application.</span></span> <span data-ttu-id="06e88-151">Dans le cas où la logique de l’application est distribuée physiquement pour séparer les serveurs ou des processus, ces cibles de déploiement physique distincte sont appelés *niveaux*.</span><span class="sxs-lookup"><span data-stu-id="06e88-151">In the event that application logic is physically distributed to separate servers or processes, these separate physical deployment targets are referred to as *tiers*.</span></span> <span data-ttu-id="06e88-152">Il est possible et qu’il est assez courant d’avoir une application de couche N est déployée sur un même niveau.</span><span class="sxs-lookup"><span data-stu-id="06e88-152">It's possible, and quite common, to have an N-Layer application that is deployed to a single tier.</span></span>

## <a name="traditional-n-layer-architecture-applications"></a><span data-ttu-id="06e88-153">Applications d’architecture traditionnelles couche « N »</span><span class="sxs-lookup"><span data-stu-id="06e88-153">Traditional "N-Layer" architecture applications</span></span>

<span data-ttu-id="06e88-154">L’organisation courante de logique d’application en couches il montre la Figure 5-2.</span><span class="sxs-lookup"><span data-stu-id="06e88-154">The most common organization of application logic into layers it shown in Figure 5-2.</span></span>

<span data-ttu-id="06e88-155">**Figure 5-2.**</span><span class="sxs-lookup"><span data-stu-id="06e88-155">**Figure 5-2.**</span></span> <span data-ttu-id="06e88-156">Couches d’application standard.</span><span class="sxs-lookup"><span data-stu-id="06e88-156">Typical application layers.</span></span>

![](./media/image5-2.png)

<span data-ttu-id="06e88-157">Ces couches sont souvent abrégés en tant que l’interface utilisateur, BLL (Business Logic Layer) et DAL (couche d’accès aux données).</span><span class="sxs-lookup"><span data-stu-id="06e88-157">These layers are frequently abbreviated as UI, BLL (Business Logic Layer), and DAL (Data Access Layer).</span></span> <span data-ttu-id="06e88-158">À l’aide de cette architecture, les utilisateurs font des demandes via la couche d’interface utilisateur qui interagit uniquement avec la couche BLL.</span><span class="sxs-lookup"><span data-stu-id="06e88-158">Using this architecture, users make requests through the UI layer, which interacts only with the BLL.</span></span> <span data-ttu-id="06e88-159">La couche BLL, à son tour, peut appeler la couche DAL pour les demandes d’accès aux données.</span><span class="sxs-lookup"><span data-stu-id="06e88-159">The BLL, in turn, can call the DAL for data access requests.</span></span> <span data-ttu-id="06e88-160">La couche d’interface utilisateur ne devez pas apporter toutes les demandes à la couche DAL directement, ni doit interagir avec la persistance par d’autres moyens.</span><span class="sxs-lookup"><span data-stu-id="06e88-160">The UI layer should not make any requests to the DAL directly, nor should it interact with persistence directly through other means.</span></span> <span data-ttu-id="06e88-161">De même, la couche BLL interagissez uniquement persistance en passant par la couche DAL.</span><span class="sxs-lookup"><span data-stu-id="06e88-161">Likewise, the BLL should only interact with persistence by going through the DAL.</span></span> <span data-ttu-id="06e88-162">De cette manière, chaque couche possède sa propre responsabilité bien connue.</span><span class="sxs-lookup"><span data-stu-id="06e88-162">In this way, each layer has its own well-known responsibility.</span></span>

<span data-ttu-id="06e88-163">L’un des inconvénients de cette approche en couches traditionnel sont que les dépendances de compilation s’exécuter à partir du haut vers le bas.</span><span class="sxs-lookup"><span data-stu-id="06e88-163">One disadvantage of this traditional layering approach is that compile-time dependencies run from the top to the bottom.</span></span> <span data-ttu-id="06e88-164">Autrement dit, la couche d’interface utilisateur dépend de la couche BLL, ce qui dépend de la couche DAL.</span><span class="sxs-lookup"><span data-stu-id="06e88-164">That is, the UI layer depends on the BLL, which depends on the DAL.</span></span> <span data-ttu-id="06e88-165">Cela signifie que la couche BLL, qui contient généralement la logique la plus importante dans l’application, est dépendante sur les détails d’implémentation d’un accès aux données (et souvent de l’existence d’une base de données).</span><span class="sxs-lookup"><span data-stu-id="06e88-165">This means that the BLL, which usually holds the most important logic in the application, is dependent on data access implementation details (and often on the existence of a database).</span></span> <span data-ttu-id="06e88-166">Il est souvent difficile, nécessitant une base de données de test de logique métier de test dans une telle architecture.</span><span class="sxs-lookup"><span data-stu-id="06e88-166">Testing business logic in such an architecture is often difficult, requiring a test database.</span></span> <span data-ttu-id="06e88-167">Le principe d’inversion de dépendance peut être utilisé pour résoudre ce problème, comme vous le verrez dans la section suivante.</span><span class="sxs-lookup"><span data-stu-id="06e88-167">The dependency inversion principle can be used to address this issue, as you'll see in the next section.</span></span>

<span data-ttu-id="06e88-168">Figure 5-3 montre un exemple de solution, arrêt de l’application dans trois projets par responsabilité (ou couche).</span><span class="sxs-lookup"><span data-stu-id="06e88-168">Figure 5-3 shows an example solution, breaking the application into three projects by responsibility (or layer).</span></span>

<span data-ttu-id="06e88-169">**Figure 5-3.**</span><span class="sxs-lookup"><span data-stu-id="06e88-169">**Figure 5-3.**</span></span> <span data-ttu-id="06e88-170">Une simple application monolithique avec trois projets.</span><span class="sxs-lookup"><span data-stu-id="06e88-170">A simple monolithic application with three projects.</span></span>

![](./media/image5-3.png)

<span data-ttu-id="06e88-171">Bien que cette application utilise plusieurs projets à des fins d’organisation, il est toujours déployé comme une unité unique et ses clients interagissent avec lui comme une application web unique.</span><span class="sxs-lookup"><span data-stu-id="06e88-171">Although this application uses several projects for organizational purposes, it is still deployed as a single unit and its clients will interact with it as a single web app.</span></span> <span data-ttu-id="06e88-172">Cela permet à un processus de déploiement très simple.</span><span class="sxs-lookup"><span data-stu-id="06e88-172">This allows for very simple deployment process.</span></span> <span data-ttu-id="06e88-173">Figure 5-4 montre comment une telle application peut être hébergé à l’aide de Windows Azure.</span><span class="sxs-lookup"><span data-stu-id="06e88-173">Figure 5-4 shows how such an app might be hosted using Windows Azure.</span></span>

![](./media/image5-4.png)

<span data-ttu-id="06e88-174">**Figure 5-4.**</span><span class="sxs-lookup"><span data-stu-id="06e88-174">**Figure 5-4.**</span></span> <span data-ttu-id="06e88-175">Déploiement simple de l’application Web Azure</span><span class="sxs-lookup"><span data-stu-id="06e88-175">Simple deployment of Azure Web App</span></span>

<span data-ttu-id="06e88-176">Comme l’application doit augmenter, les solutions de déploiement plus complexe et robuste peuvent être nécessaire.</span><span class="sxs-lookup"><span data-stu-id="06e88-176">As application needs grow, more complex and robust deployment solutions may be required.</span></span> <span data-ttu-id="06e88-177">Figure 5-5 montre un exemple d’un plan de déploiement plus complexe qui prend en charge des fonctionnalités supplémentaires.</span><span class="sxs-lookup"><span data-stu-id="06e88-177">Figure 5-5 shows an example of a more complex deployment plan that supports additional capabilities.</span></span>

![](./media/image5-5.png)

<span data-ttu-id="06e88-178">**Figure 5-5.**</span><span class="sxs-lookup"><span data-stu-id="06e88-178">**Figure 5-5.**</span></span> <span data-ttu-id="06e88-179">Déploiement d’une application web à un Service d’application Azure</span><span class="sxs-lookup"><span data-stu-id="06e88-179">Deploying a web app to an Azure App Service</span></span>

<span data-ttu-id="06e88-180">En interne, une organisation de ce projet en plusieurs projets en fonction de la responsabilité améliore la facilité de maintenance de l’application.</span><span class="sxs-lookup"><span data-stu-id="06e88-180">Internally, this project's organization into multiple projects based on responsibility improves the maintainability of the application.</span></span>

<span data-ttu-id="06e88-181">Cette unité peut être monté en haut ou out pour tirer parti de l’évolutivité de la demande sur le cloud.</span><span class="sxs-lookup"><span data-stu-id="06e88-181">This unit can be scaled up or out to take advantage of cloud-based on-demand scalability.</span></span> <span data-ttu-id="06e88-182">L’évolution verticale signifie l’ajout d’UC supplémentaires, mémoire, espace disque ou autres ressources pour l’ou les serveurs hébergeant votre application.</span><span class="sxs-lookup"><span data-stu-id="06e88-182">Scaling up means adding additional CPU, memory, disk space, or other resources to the server(s) hosting your app.</span></span> <span data-ttu-id="06e88-183">Montée en puissance parallèle signifie que l’ajout d’instances supplémentaires de ces serveurs, si ce sont des serveurs physiques ou virtuels.</span><span class="sxs-lookup"><span data-stu-id="06e88-183">Scaling out means adding additional instances of such servers, whether these are physical servers or virtual machines.</span></span> <span data-ttu-id="06e88-184">Lorsque votre application est hébergée sur plusieurs instances, un équilibreur de charge est utilisé pour assigner les requêtes à des instances d’application individuels.</span><span class="sxs-lookup"><span data-stu-id="06e88-184">When your app is hosted across multiple instances, a load balancer is used to assign requests to individual app instances.</span></span>

<span data-ttu-id="06e88-185">L’approche la plus simple à l’échelle d’une application web dans Azure consiste à configurer la mise à l’échelle manuellement dans du Plan l’application App Service.</span><span class="sxs-lookup"><span data-stu-id="06e88-185">The simplest approach to scaling a web application in Azure is to configure scaling manually in the application's App Service Plan.</span></span> <span data-ttu-id="06e88-186">Figure 5-6 afficher l’écran du tableau de bord Azure approprié pour configurer le nombre d’occurrences servent à une application.</span><span class="sxs-lookup"><span data-stu-id="06e88-186">Figure 5-6 show the appropriate Azure dashboard screen to configure how many instances are serving an app.</span></span>

![](./media/image5-6.png)

<span data-ttu-id="06e88-187">**Figure 5-6.**</span><span class="sxs-lookup"><span data-stu-id="06e88-187">**Figure 5-6.**</span></span> <span data-ttu-id="06e88-188">Plan App Service mise à l’échelle dans Azure.</span><span class="sxs-lookup"><span data-stu-id="06e88-188">App Service Plan scaling in Azure.</span></span>

## <a name="clean-architecture"></a><span data-ttu-id="06e88-189">Nouvelle architecture</span><span class="sxs-lookup"><span data-stu-id="06e88-189">Clean architecture</span></span>

<span data-ttu-id="06e88-190">Les applications qui suivent le principe d’Inversion de dépendance, ainsi que les principes de la conception orientée ont tendance à arriver à une architecture similaire.</span><span class="sxs-lookup"><span data-stu-id="06e88-190">Applications that follow the Dependency Inversion Principle as well as Domain-Driven Design (DDD) principles tend to arrive at a similar architecture.</span></span> <span data-ttu-id="06e88-191">Cette architecture est passé par le nombre de noms au fil des années.</span><span class="sxs-lookup"><span data-stu-id="06e88-191">This architecture has gone by many names over the years.</span></span> <span data-ttu-id="06e88-192">Un des noms des première a été Architecture Hexagonal, suivi par les adaptateurs et des Ports.</span><span class="sxs-lookup"><span data-stu-id="06e88-192">One of the first names was Hexagonal Architecture, followed by Ports-and-Adapters.</span></span> <span data-ttu-id="06e88-193">Plus récemment, il est citée en tant que le [en cercles concentriques Architecture](http://jeffreypalermo.com/blog/the-onion-architecture-part-1/) ou [propre Architecture](https://8thlight.com/blog/uncle-bob/2012/08/13/the-clean-architecture.html).</span><span class="sxs-lookup"><span data-stu-id="06e88-193">More recently, it's been cited as the [Onion Architecture](http://jeffreypalermo.com/blog/the-onion-architecture-part-1/) or [Clean Architecture](https://8thlight.com/blog/uncle-bob/2012/08/13/the-clean-architecture.html).</span></span> <span data-ttu-id="06e88-194">Il est de ce nom, nouvelle Architecture, qui est utilisé comme base pour la description de l’architecture dans ce livre électronique.</span><span class="sxs-lookup"><span data-stu-id="06e88-194">It is this last name, Clean Architecture, that is used as the basis for describing the architecture in this e-book.</span></span>

> [!NOTE]
> <span data-ttu-id="06e88-195">Le terme que propre Architecture peut être appliqué aux applications qui sont générées à l’aide des principes DDD ainsi qu’à ceux qui ne sont pas générées à l’aide de DDD.</span><span class="sxs-lookup"><span data-stu-id="06e88-195">The term Clean Architecture can be applied to applications that are built using DDD Principles as well as to those that are not built using DDD.</span></span> <span data-ttu-id="06e88-196">Dans le cas de la première, cette combinaison peut être appelée en tant que « Nouvelle Architecture de DDD ».</span><span class="sxs-lookup"><span data-stu-id="06e88-196">In the case of the former, this combination may be referred to as "Clean DDD Architecture".</span></span>

<span data-ttu-id="06e88-197">Nouvelle architecture place le modèle logique et les applications d’entreprise dans le centre de l’application.</span><span class="sxs-lookup"><span data-stu-id="06e88-197">Clean architecture puts the business logic and application model at the center of the application.</span></span> <span data-ttu-id="06e88-198">Au lieu de logique métier dépendent de l’accès aux données ou d’autres problèmes d’infrastructure, cette dépendance est inversée : détails de l’infrastructure et de l’implémentation varient selon le cœur de l’Application.</span><span class="sxs-lookup"><span data-stu-id="06e88-198">Instead of having business logic depend on data access or other infrastructure concerns, this dependency is inverted: infrastructure and implementation details depend on the Application Core.</span></span> <span data-ttu-id="06e88-199">Cela est possible en définissant des abstractions ou des interfaces, dans le noyau de l’Application, puis implémentées par les types définis dans la couche d’Infrastructure.</span><span class="sxs-lookup"><span data-stu-id="06e88-199">This is achieved by defining abstractions, or interfaces, in the Application Core, which are then implemented by types defined in the Infrastructure layer.</span></span> <span data-ttu-id="06e88-200">Une méthode courante de visualisation de cette architecture est d’utiliser une série de cercles concentriques, similaires à une en cercles concentriques.</span><span class="sxs-lookup"><span data-stu-id="06e88-200">A common way of visualizing this architecture is to use a series of concentric circles, similar to an onion.</span></span> <span data-ttu-id="06e88-201">Figure 5-X montre un exemple de ce style de représentation de l’architecture.</span><span class="sxs-lookup"><span data-stu-id="06e88-201">Figure 5-X shows an example of this style of architectural representation.</span></span>

![](./media/image5-7.png)

<span data-ttu-id="06e88-202">**Figure 5-7.**</span><span class="sxs-lookup"><span data-stu-id="06e88-202">**Figure 5-7.**</span></span> <span data-ttu-id="06e88-203">Nouvelle Architecture ; vue d’en cercles concentriques</span><span class="sxs-lookup"><span data-stu-id="06e88-203">Clean Architecture; onion view</span></span>

<span data-ttu-id="06e88-204">Dans ce diagramme de flux de dépendances vers le cercle plus profond.</span><span class="sxs-lookup"><span data-stu-id="06e88-204">In this diagram, dependencies flow toward the innermost circle.</span></span> <span data-ttu-id="06e88-205">Par conséquent, vous pouvez voir que le cœur de l’Application (qui tire son nom à partir de sa position au cœur de ce diagramme) ne dispose d’aucune dépendance sur d’autres couches application.</span><span class="sxs-lookup"><span data-stu-id="06e88-205">Thus, you can see that the Application Core (which takes its name from its position at the core of this diagram) has no dependencies on other application layers.</span></span> <span data-ttu-id="06e88-206">Dans le centre de très sont des entités et les interfaces de l’application.</span><span class="sxs-lookup"><span data-stu-id="06e88-206">At the very center are the application's entities and interfaces.</span></span> <span data-ttu-id="06e88-207">À l’extérieur, mais dans le cœur de l’Application, sont des services de domaine, qui implémentent généralement des interfaces définies dans le cercle interne.</span><span class="sxs-lookup"><span data-stu-id="06e88-207">Just outside, but still in the Application Core, are domain services, which typically implement interfaces defined in the inner circle.</span></span> <span data-ttu-id="06e88-208">En dehors de l’Application Core, l’Interface utilisateur et les couches d’Infrastructure varient sur le cœur de l’Application, mais pas sur un autre (nécessairement).</span><span class="sxs-lookup"><span data-stu-id="06e88-208">Outside of the Application Core, both the User Interface and the Infrastructure layers depend on the Application Core, but not on one another (necessarily).</span></span>

<span data-ttu-id="06e88-209">Figure 5-X affiche un diagramme de couche horizontal plus classique qui reflète mieux la dépendance entre l’interface utilisateur et d’autres couches.</span><span class="sxs-lookup"><span data-stu-id="06e88-209">Figure 5-X shows a more traditional horizontal layer diagram that better reflects the dependency between the UI and other layers.</span></span>

![](./media/image5-8.png)

<span data-ttu-id="06e88-210">**Figure 5-8.**</span><span class="sxs-lookup"><span data-stu-id="06e88-210">**Figure 5-8.**</span></span> <span data-ttu-id="06e88-211">Nouvelle Architecture ; vue de la couche horizontale</span><span class="sxs-lookup"><span data-stu-id="06e88-211">Clean Architecture; horizontal layer view</span></span>

<span data-ttu-id="06e88-212">Notez que les flèches solides représentent les dépendances de compilation, tandis que la flèche en pointillé représente une dépendance de runtime.</span><span class="sxs-lookup"><span data-stu-id="06e88-212">Note that the solid arrows represent compile-time dependencies, while the dashed arrow represents a runtime-only dependency.</span></span> <span data-ttu-id="06e88-213">À l’aide de la nouvelle architecture, la couche d’interface utilisateur fonctionne avec les interfaces définies dans le cœur de l’Application au moment de la compilation, et dans l’idéal, ne doivent pas avoir des connaissances sur les types d’implémentation définie dans la couche d’Infrastructure.</span><span class="sxs-lookup"><span data-stu-id="06e88-213">Using the clean architecture, the UI layer works with interfaces defined in the Application Core at compile time, and ideally should not have any knowledge of the implementation types defined in the Infrastructure layer.</span></span> <span data-ttu-id="06e88-214">Lors de l’exécution, toutefois, ces types de mise en œuvre seront requis pour l’application à exécuter, donc ils devront être présent et câblé jusqu'à les interfaces de base d’Application via l’injection de dépendances.</span><span class="sxs-lookup"><span data-stu-id="06e88-214">At runtime, however, these implementation types will be required for the app to execute, so they will need to be present and wired up to the Application Core interfaces via dependency injection.</span></span>

<span data-ttu-id="06e88-215">Figure 5-9 illustre une vue plus détaillée de l’architecture d’une application ASP.NET Core lors de la génération en suivant ces recommandations.</span><span class="sxs-lookup"><span data-stu-id="06e88-215">Figure 5-9 shows a more detailed view of an ASP.NET Core application's architecture when built following these recommendations.</span></span>

![Architecture de base ASPNET](./media/image5-9.png)

<span data-ttu-id="06e88-217">**Figure 5-9.**</span><span class="sxs-lookup"><span data-stu-id="06e88-217">**Figure 5-9.**</span></span> <span data-ttu-id="06e88-218">Diagramme d’architecture ASP.NET Core suivant la nouvelle Architecture.</span><span class="sxs-lookup"><span data-stu-id="06e88-218">ASP.NET Core architecture diagram following Clean Architecture.</span></span>

<span data-ttu-id="06e88-219">Étant donné que le cœur de l’Application ne dépend d’Infrastructure, il est très facile d’écrire des tests unitaires automatisés pour cette couche.</span><span class="sxs-lookup"><span data-stu-id="06e88-219">Because the Application Core doesn't depend on Infrastructure, it is very easy to write automated unit tests for this layer.</span></span> <span data-ttu-id="06e88-220">Figures 5 à 10 et 11-5 montrent comment les tests s’adaptent à cette architecture.</span><span class="sxs-lookup"><span data-stu-id="06e88-220">Figures 5-10 and 5-11 show how tests fit into this architecture.</span></span>

![UnitTestCore](./media/image5-10.png)

<span data-ttu-id="06e88-222">**Figure 5-10.**</span><span class="sxs-lookup"><span data-stu-id="06e88-222">**Figure 5-10.**</span></span> <span data-ttu-id="06e88-223">Test unitaire de base d’Application dans d’isolation.</span><span class="sxs-lookup"><span data-stu-id="06e88-223">Unit testing Application Core in isolation.</span></span>

![IntegrationTests](./media/image5-11.png)

<span data-ttu-id="06e88-225">**Figure 5-11.**</span><span class="sxs-lookup"><span data-stu-id="06e88-225">**Figure 5-11.**</span></span> <span data-ttu-id="06e88-226">Intégration de test des implémentations d’Infrastructure avec des dépendances externes.</span><span class="sxs-lookup"><span data-stu-id="06e88-226">Integration testing Infrastructure implementations with external dependencies.</span></span>

<span data-ttu-id="06e88-227">Puisque la couche d’interface utilisateur n’a pas une dépendance directe sur les types définis dans le projet d’Infrastructure, il est également très facile à échanger des implémentations, soit pour faciliter le test ou en réponse à l’évolution des besoins de l’application.</span><span class="sxs-lookup"><span data-stu-id="06e88-227">Since the UI layer doesn't have any direct dependency on types defined in the Infrastructure project, it is likewise very easy to swap out implementations, either to facilitate testing or in response to changing application requirements.</span></span> <span data-ttu-id="06e88-228">D’ASP.NET Core utilisation intégrée d’et prise en charge pour l’injection de dépendance rend cette architecture de la manière la plus appropriée aux applications monolithique de structure non trivial.</span><span class="sxs-lookup"><span data-stu-id="06e88-228">ASP.NET Core's built-in use of and support for dependency injection makes this architecture the most appropriate way to structure non-trivial monolithic applications.</span></span>

<span data-ttu-id="06e88-229">Pour les applications monolithiques les projets de base de l’Application, l’Infrastructure et l’Interface utilisateur sont exécutés en tant qu’une seule application.</span><span class="sxs-lookup"><span data-stu-id="06e88-229">For monolithic applications the Application Core, Infrastructure, and User Interface projects are all run as a single application.</span></span> <span data-ttu-id="06e88-230">L’architecture d’application runtime peut ressembler à la Figure 5-12.</span><span class="sxs-lookup"><span data-stu-id="06e88-230">The runtime application architecture might look something like Figure 5-12.</span></span>

![Architecture de ASPNET 2](./media/image5-12.png)

<span data-ttu-id="06e88-232">**Figure 5-12.**</span><span class="sxs-lookup"><span data-stu-id="06e88-232">**Figure 5-12.**</span></span> <span data-ttu-id="06e88-233">Architecture d’exécution d’une application exemple ASP.NET Core.</span><span class="sxs-lookup"><span data-stu-id="06e88-233">A sample ASP.NET Core app's runtime architecture.</span></span>

### <a name="organizing-code-in-clean-architecture"></a><span data-ttu-id="06e88-234">Organisation du Code dans la nouvelle Architecture</span><span class="sxs-lookup"><span data-stu-id="06e88-234">Organizing Code in Clean Architecture</span></span>

<span data-ttu-id="06e88-235">Dans une solution nouvelle Architecture, chaque projet est claire des responsabilités.</span><span class="sxs-lookup"><span data-stu-id="06e88-235">In a Clean Architecture solution, each project has clear responsibilities.</span></span> <span data-ttu-id="06e88-236">Par conséquent, certains types appartiendra dans chaque projet et vous trouverez souvent les dossiers correspondant à ces types dans le projet approprié.</span><span class="sxs-lookup"><span data-stu-id="06e88-236">As such, certain types will belong in each project and you'll frequently find folders corresponding to these types in the appropriate project.</span></span>

<span data-ttu-id="06e88-237">Le cœur de l’Application contient le modèle d’entreprise, ce qui inclut les entités, les services et les interfaces.</span><span class="sxs-lookup"><span data-stu-id="06e88-237">The Application Core holds the business model, which includes entities, services, and interfaces.</span></span> <span data-ttu-id="06e88-238">Ces interfaces incluent des abstractions pour les opérations qui seront effectuées à l’aide de l’Infrastructure, tels que l’accès aux données, les accès au système de fichiers, les appels réseau, etc.. Parfois, services ou des interfaces définies au niveau de cette couche devrez travailler avec les types d’entité non qui n’ont aucune dépendance sur l’interface utilisateur ou d’Infrastructure.</span><span class="sxs-lookup"><span data-stu-id="06e88-238">These interfaces include abstractions for operations that will be performed using Infrastructure, such as data access, file system access, network calls, etc. Sometimes services or interfaces defined at this layer will need to work with non-entity types that have no dependencies on UI or Infrastructure.</span></span> <span data-ttu-id="06e88-239">Il peuvent être définis comme simple transférer des objets de données (DTO).</span><span class="sxs-lookup"><span data-stu-id="06e88-239">These can be defined as simple Data Transfer Objects (DTOs).</span></span>

> ### <a name="application-core-types"></a><span data-ttu-id="06e88-240">Types de base d’application</span><span class="sxs-lookup"><span data-stu-id="06e88-240">Application Core Types</span></span>
> -   <span data-ttu-id="06e88-241">Entités (entreprise classes de modèle qui sont conservées)</span><span class="sxs-lookup"><span data-stu-id="06e88-241">Entities (business model classes that are persisted)</span></span>
> -   <span data-ttu-id="06e88-242">Interfaces</span><span class="sxs-lookup"><span data-stu-id="06e88-242">Interfaces</span></span>
> -   <span data-ttu-id="06e88-243">Services</span><span class="sxs-lookup"><span data-stu-id="06e88-243">Services</span></span>
> -   <span data-ttu-id="06e88-244">DTO</span><span class="sxs-lookup"><span data-stu-id="06e88-244">DTOs</span></span>

<span data-ttu-id="06e88-245">Le projet d’Infrastructure inclut généralement des implémentations d’accès aux données.</span><span class="sxs-lookup"><span data-stu-id="06e88-245">The Infrastructure project will typically include data access implementations.</span></span> <span data-ttu-id="06e88-246">Dans une application web ASP.NET Core classique, cela inclut l’Entity Framework DbContext, les Migrations de noyaux EF qui ont été définies et classes d’implémentation d’un accès aux données.</span><span class="sxs-lookup"><span data-stu-id="06e88-246">In a typical ASP.NET Core web application, this will include the Entity Framework DbContext, any EF Core Migrations that have been defined, and data access implementation classes.</span></span> <span data-ttu-id="06e88-247">La méthode la plus courante d’abstraire le code d’implémentation d’un accès aux données est à l’aide de la [modèle de conception de référentiel](http://deviq.com/repository-pattern/).</span><span class="sxs-lookup"><span data-stu-id="06e88-247">The most common way to abstract data access implementation code is through the use of the [Repository design pattern](http://deviq.com/repository-pattern/).</span></span>

<span data-ttu-id="06e88-248">En plus des implémentations d’accès aux données, le projet de l’Infrastructure doit contenir des implémentations de services qui doivent interagir avec des problèmes d’infrastructure.</span><span class="sxs-lookup"><span data-stu-id="06e88-248">In addition to data access implementations, the Infrastructure project should contain implementations of services that must interact with infrastructure concerns.</span></span> <span data-ttu-id="06e88-249">Ces services doivent implémenter les interfaces définies dans le cœur de l’Application et Infrastructure doit avoir une référence au projet de base de l’Application.</span><span class="sxs-lookup"><span data-stu-id="06e88-249">These services should implement interfaces defined in the Application Core, and so Infrastructure should have a reference to the Application Core project.</span></span>

> ### <a name="infrastructure-types"></a><span data-ttu-id="06e88-250">Types d’infrastructure</span><span class="sxs-lookup"><span data-stu-id="06e88-250">Infrastructure Types</span></span>
> -   <span data-ttu-id="06e88-251">Types de principaux EF (DbContext, Migrations)</span><span class="sxs-lookup"><span data-stu-id="06e88-251">EF Core types (DbContext, Migrations)</span></span>
> -   <span data-ttu-id="06e88-252">Types d’implémentation (référentiels) d’accès aux données</span><span class="sxs-lookup"><span data-stu-id="06e88-252">Data access implementation types (Repositories)</span></span>
> -   <span data-ttu-id="06e88-253">Services d’infrastructure spécifique (FileLogger, SmtpNotifier, etc.).</span><span class="sxs-lookup"><span data-stu-id="06e88-253">Infrastructure-specific services (FileLogger, SmtpNotifier, etc.)</span></span>

<span data-ttu-id="06e88-254">La couche d’interface utilisateur dans une application ASP.NET MVC de base sera le point d’entrée pour l’application et sera un projet ASP.NET MVC de base.</span><span class="sxs-lookup"><span data-stu-id="06e88-254">The user interface layer in an ASP.NET Core MVC application will be the entry point for the application, and will be an ASP.NET Core MVC project.</span></span> <span data-ttu-id="06e88-255">Ce projet doit référencer le projet de base de l’Application et ses types doivent interagir avec l’infrastructure strictement via les interfaces définies dans la base de l’Application.</span><span class="sxs-lookup"><span data-stu-id="06e88-255">This project should reference the Application Core project, and its types should interact with infrastructure strictly through interfaces defined in Application Core.</span></span> <span data-ttu-id="06e88-256">Aucun l’instanciation directe de (ou les appels statiques) types de couche d’Infrastructure doivent être autorisées dans la couche d’interface utilisateur.</span><span class="sxs-lookup"><span data-stu-id="06e88-256">No direct instantiation of (or static calls to) Infrastructure layer types should be permitted in the UI layer.</span></span>

> ### <a name="ui-layer-types"></a><span data-ttu-id="06e88-257">Types de couche d’interface utilisateur</span><span class="sxs-lookup"><span data-stu-id="06e88-257">UI Layer Types</span></span>
> -   <span data-ttu-id="06e88-258">Contrôleurs</span><span class="sxs-lookup"><span data-stu-id="06e88-258">Controllers</span></span>
> -   <span data-ttu-id="06e88-259">Filtres</span><span class="sxs-lookup"><span data-stu-id="06e88-259">Filters</span></span>
> -   <span data-ttu-id="06e88-260">Affichages</span><span class="sxs-lookup"><span data-stu-id="06e88-260">Views</span></span>
> -   <span data-ttu-id="06e88-261">ViewModel</span><span class="sxs-lookup"><span data-stu-id="06e88-261">ViewModels</span></span>
> -   <span data-ttu-id="06e88-262">Démarrage</span><span class="sxs-lookup"><span data-stu-id="06e88-262">Startup</span></span>

<span data-ttu-id="06e88-263">La classe de démarrage est chargée pour la configuration de l’application et pour la création de types d’implémentation pour les interfaces, ce qui permet d’injection de dépendances fonctionne correctement au moment de l’exécution.</span><span class="sxs-lookup"><span data-stu-id="06e88-263">The Startup class is responsible for configuring the application, and for wiring up implementation types to interfaces, allowing dependency injection to work properly at run time.</span></span>

> [!NOTE]
> <span data-ttu-id="06e88-264">Pour associer l’injection de dépendances dans ConfigureServices dans le fichier Startup.cs du projet de l’interface utilisateur, le projet devrez peut-être fait référence au projet d’Infrastructure.</span><span class="sxs-lookup"><span data-stu-id="06e88-264">In order to wire up dependency injection in ConfigureServices in the Startup.cs file of the UI project, the project may need to reference the Infrastructure project.</span></span> <span data-ttu-id="06e88-265">Cette dépendance peut être éliminée plus facilement à l’aide d’un conteneur DI personnalisé.</span><span class="sxs-lookup"><span data-stu-id="06e88-265">This dependency can be eliminated, most easily by using a custom DI container.</span></span> <span data-ttu-id="06e88-266">Dans le cadre de cet exemple, l’approche la plus simple doit autoriser l’interface utilisateur project référencer le projet d’Infrastructure.</span><span class="sxs-lookup"><span data-stu-id="06e88-266">For the purposes of this sample, the simplest approach is to allow the UI project to reference the Infrastructure project.</span></span>

## <a name="monolithic-applications-and-containers"></a><span data-ttu-id="06e88-267">Conteneurs et les Applications monolithiques</span><span class="sxs-lookup"><span data-stu-id="06e88-267">Monolithic Applications and Containers</span></span> 

<span data-ttu-id="06e88-268">Vous pouvez générer un Service ou une unique et monolithique déploiement Application Web basée sur et le déployer en tant que conteneur.</span><span class="sxs-lookup"><span data-stu-id="06e88-268">You can build a single and monolithic-deployment based Web Application or Service and deploy it as a container.</span></span> <span data-ttu-id="06e88-269">Dans l’application, il peut être monolithique mais sont organisés en plusieurs bibliothèques, composants ou couches.</span><span class="sxs-lookup"><span data-stu-id="06e88-269">Within the application, it might not be monolithic but organized into several libraries, components or layers.</span></span> <span data-ttu-id="06e88-270">En externe, il est un conteneur unique comme un processus unique, la seule application web ou le service unique.</span><span class="sxs-lookup"><span data-stu-id="06e88-270">Externally it is a single container like a single process, single web application or single service.</span></span>

<span data-ttu-id="06e88-271">Pour gérer ce modèle, vous déployez un conteneur unique pour représenter l’application.</span><span class="sxs-lookup"><span data-stu-id="06e88-271">To manage this model, you deploy a single container to represent the application.</span></span> <span data-ttu-id="06e88-272">Pour mettre à l’échelle, ajoutez simplement des copies supplémentaires avec un équilibrage de charge à l’avant.</span><span class="sxs-lookup"><span data-stu-id="06e88-272">To scale, just add additional copies with a load balancer in front.</span></span> <span data-ttu-id="06e88-273">La simplicité provient de la gestion d’un déploiement unique dans un seul conteneur ou d’une machine virtuelle.</span><span class="sxs-lookup"><span data-stu-id="06e88-273">The simplicity comes from managing a single deployment in a single container or VM.</span></span>

![](./media/image5-13.png)

<span data-ttu-id="06e88-274">Vous pouvez inclure plusieurs composants/bibliothèques ou couches internes dans chaque conteneur, comme illustré dans la Figure 5-X.</span><span class="sxs-lookup"><span data-stu-id="06e88-274">You can include multiple components/libraries or internal layers within each container, as illustrated in Figure 5-X.</span></span> <span data-ttu-id="06e88-275">Mais, suivant le principal du conteneur de *» un conteneur fait une chose et qu’il le fait dans un processus*», le modèle monolithique peut être un conflit.</span><span class="sxs-lookup"><span data-stu-id="06e88-275">But, following the container principal of *"a container does one thing, and does it in one process*", the monolithic pattern might be a conflict.</span></span>

<span data-ttu-id="06e88-276">L’inconvénient de cette approche est fournie si/quand l’application atteint, nécessitant une mise à l’échelle.</span><span class="sxs-lookup"><span data-stu-id="06e88-276">The downside of this approach comes if/when the application grows, requiring it to scale.</span></span> <span data-ttu-id="06e88-277">Si la mise à l’échelle de l’application entière, il n’est pas réellement un problème.</span><span class="sxs-lookup"><span data-stu-id="06e88-277">If the entire application scaled, it's not really a problem.</span></span> <span data-ttu-id="06e88-278">Toutefois, dans la plupart des cas, certaines parties de l’application sont les points d’étranglement nécessitant une mise à l’échelle, tandis que les autres composants sont moins utilisé.</span><span class="sxs-lookup"><span data-stu-id="06e88-278">However, in most cases, a few parts of the application are the choke points requiring scaling, while other components are used less.</span></span>

<span data-ttu-id="06e88-279">À l’aide de l’exemple classique de commerce électronique ; Vous devez probablement à l’échelle est le composant d’informations de produit.</span><span class="sxs-lookup"><span data-stu-id="06e88-279">Using the typical eCommerce example; what you likely need to scale is the product information component.</span></span> <span data-ttu-id="06e88-280">De nombreux clients plus parcourir les produits que les acheter.</span><span class="sxs-lookup"><span data-stu-id="06e88-280">Many more customers browse products than purchase them.</span></span> <span data-ttu-id="06e88-281">Davantage de clients utilisent leur panier d’achat que d’utiliser le pipeline de paiement.</span><span class="sxs-lookup"><span data-stu-id="06e88-281">More customers use their basket than use the payment pipeline.</span></span> <span data-ttu-id="06e88-282">Les clients moins ajouter des commentaires ou afficher leur historique d’achat.</span><span class="sxs-lookup"><span data-stu-id="06e88-282">Fewer customers add comments or view their purchase history.</span></span> <span data-ttu-id="06e88-283">Il vous suffit probablement le quelques employés, dans une région unique, qui ont besoin de gérer le contenu et les campagnes marketing.</span><span class="sxs-lookup"><span data-stu-id="06e88-283">And you likely only have a handful of employees, in a single region, that need to manage the content and marketing campaigns.</span></span> <span data-ttu-id="06e88-284">Par la mise à l’échelle de la conception monolithique, tout le code est déployé plusieurs fois.</span><span class="sxs-lookup"><span data-stu-id="06e88-284">By scaling the monolithic design, all the code is deployed multiple times.</span></span>

<span data-ttu-id="06e88-285">En plus de l’échelle tout problème, modifications apportées à un seul composant nécessitent un nouveau test complet de l’application entière et un redéploiement complet de toutes les instances.</span><span class="sxs-lookup"><span data-stu-id="06e88-285">In addition to the scale everything problem, changes to a single component require complete retesting of the entire application, and a complete redeployment of all the instances.</span></span>

<span data-ttu-id="06e88-286">L’approche monolithique est courant, et de nombreuses organisations développez avec cette approche architecturale.</span><span class="sxs-lookup"><span data-stu-id="06e88-286">The monolithic approach is common, and many organizations are developing with this architectural approach.</span></span> <span data-ttu-id="06e88-287">Nombreux sont ayant une bonne nombre insuffisant de résultats, alors que d’autres sont en appuyant sur les limites.</span><span class="sxs-lookup"><span data-stu-id="06e88-287">Many are having good enough results, while others are hitting limits.</span></span> <span data-ttu-id="06e88-288">La plupart conçus leurs applications dans ce modèle, car l’infrastructure et les outils ont été trop difficiles à générer des architectures orientées service (SOA), et il n’a pas été voit la nécessité - jusqu'à ce que l’application a fait l’objet.</span><span class="sxs-lookup"><span data-stu-id="06e88-288">Many designed their applications in this model, because the tools and infrastructure were too difficult to build service oriented architectures (SOA), and they didn't see the need - until the app grew.</span></span> <span data-ttu-id="06e88-289">Si vous trouvez que vous rencontrez les limites de l’approche monolithique, la division de l’application pour lui permettre de mieux tirer parti des conteneurs et microservices peut être la prochaine étape logique.</span><span class="sxs-lookup"><span data-stu-id="06e88-289">If you find you're hitting the limits of the monolithic approach, breaking the app up to enable it to better leverage containers and microservices may be the next logical step.</span></span>

![](./media/image5-14.png)

<span data-ttu-id="06e88-290">Déploiement d’applications monolithiques dans Microsoft Azure peut être obtenue à l’aide de machines virtuelles dédiées pour chaque instance.</span><span class="sxs-lookup"><span data-stu-id="06e88-290">Deploying monolithic applications in Microsoft Azure can be achieved using dedicated VMs for each instance.</span></span> <span data-ttu-id="06e88-291">À l’aide de [jeux de mise à l’échelle de machine virtuelle Azure](https://docs.microsoft.com/azure/virtual-machine-scale-sets/), vous pouvez adapter facilement les machines virtuelles.</span><span class="sxs-lookup"><span data-stu-id="06e88-291">Using [Azure VM Scale Sets](https://docs.microsoft.com/azure/virtual-machine-scale-sets/), you can easily scale the VMs.</span></span> <span data-ttu-id="06e88-292">[Services d’application Azure](https://azure.microsoft.com/services/app-service/) peuvent exécuter des applications monolithiques et gérer facilement des instances sans avoir à gérer les machines virtuelles.</span><span class="sxs-lookup"><span data-stu-id="06e88-292">[Azure App Services](https://azure.microsoft.com/services/app-service/) can run monolithic applications and easily scale instances without having to manage the VMs.</span></span> <span data-ttu-id="06e88-293">Services d’application Azure peut exécuter des instances uniques des conteneurs Docker, ce qui simplifie le déploiement.</span><span class="sxs-lookup"><span data-stu-id="06e88-293">Azure App Services can run single instances of Docker containers as well, simplifying the deployment.</span></span> <span data-ttu-id="06e88-294">À l’aide de Docker, vous pouvez déployer une seule machine virtuelle comme un hôte Docker et exécuter plusieurs instances.</span><span class="sxs-lookup"><span data-stu-id="06e88-294">Using Docker, you can deploy a single VM as a Docker host, and run multiple instances.</span></span> <span data-ttu-id="06e88-295">À l’aide de l’équilibrage de Azure, comme indiqué dans la Figure 5-14, vous pouvez gérer la mise à l’échelle.</span><span class="sxs-lookup"><span data-stu-id="06e88-295">Using the Azure balancer, as shown in the Figure 5-14, you can manage scaling.</span></span>

<span data-ttu-id="06e88-296">Le déploiement sur les ordinateurs hôtes différents peut être géré avec les techniques de déploiement traditionnelles.</span><span class="sxs-lookup"><span data-stu-id="06e88-296">The deployment to the various hosts can be managed with traditional deployment techniques.</span></span> <span data-ttu-id="06e88-297">Les hôtes Docker peuvent être gérés avec les commandes telles que **docker exécuter** effectuée manuellement ou via l’automatisation, telles que les pipelines de livraison continue (CD).</span><span class="sxs-lookup"><span data-stu-id="06e88-297">The Docker hosts can be managed with commands like **docker run** performed manually, or through automation such as Continuous Delivery (CD) pipelines.</span></span>

### <a name="monolithic-application-deployed-as-a-container"></a><span data-ttu-id="06e88-298">Application monolithique déployée comme un conteneur</span><span class="sxs-lookup"><span data-stu-id="06e88-298">Monolithic application deployed as a container</span></span>

<span data-ttu-id="06e88-299">Il existe des avantages de l’utilisation de conteneurs pour gérer les déploiements d’applications monolithique.</span><span class="sxs-lookup"><span data-stu-id="06e88-299">There are benefits of using containers to manage monolithic application deployments.</span></span> <span data-ttu-id="06e88-300">Mise à l’échelle les instances de conteneurs est beaucoup plus rapide et plus facile que le déploiement de machines virtuelles supplémentaires.</span><span class="sxs-lookup"><span data-stu-id="06e88-300">Scaling the instances of containers is far faster and easier than deploying additional VMs.</span></span> <span data-ttu-id="06e88-301">Même si vous utilisez des jeux de mise à l’échelle de machine virtuelle à l’échelle de machines virtuelles, elles de temps à l’instance.</span><span class="sxs-lookup"><span data-stu-id="06e88-301">Even when using VM Scale Sets to scale VMs, they take time to instance.</span></span> <span data-ttu-id="06e88-302">Lors du déploiement en tant qu’instances de l’application, la configuration de l’application est gérée dans le cadre de la machine virtuelle.</span><span class="sxs-lookup"><span data-stu-id="06e88-302">When deployed as app instances, the configuration of the app is managed as part of the VM.</span></span>

<span data-ttu-id="06e88-303">Déploiement des mises à jour comme images Docker est beaucoup plus rapide et efficace du réseau.</span><span class="sxs-lookup"><span data-stu-id="06e88-303">Deploying updates as Docker images is far faster and network efficient.</span></span> <span data-ttu-id="06e88-304">Docker Images démarrent généralement en secondes, ce qui accélère les déploiements.</span><span class="sxs-lookup"><span data-stu-id="06e88-304">Docker Images typically start in seconds, speeding rollouts.</span></span> <span data-ttu-id="06e88-305">Destruction d’une instance de Docker est aussi simple que l’émission d’un **stop de docker** commande, généralement à la fin dans moins d’une seconde.</span><span class="sxs-lookup"><span data-stu-id="06e88-305">Tearing down a Docker instance is as easy as issuing a **docker stop** command, typically completing in less than a second.</span></span>

<span data-ttu-id="06e88-306">Comme les conteneurs sont par nature immuables par sa conception, vous devez jamais à vous soucier des machines virtuelles d’endommagés, tandis que les scripts de mise à jour peuvent oublier pour prendre en compte une configuration spécifique ou d’un fichier restant sur le disque.</span><span class="sxs-lookup"><span data-stu-id="06e88-306">As containers are inherently immutable by design, you never need to worry about corrupted VMs, whereas update scripts might forget to account for some specific configuration or file left on disk.</span></span>

<span data-ttu-id="06e88-307">Alors que les applications monolithiques peuvent tirer parti de Docker, en fractionnant l’application monolithique aux systèmes sub qui peut être mis à l’échelle, développés et déployés de manière individuelle peut être votre point d’entrée dans le domaine de microservices.</span><span class="sxs-lookup"><span data-stu-id="06e88-307">While monolithic apps can benefit from Docker, breaking up the monolithic application into sub systems which can be scaled, developed and deployed individually may be your entry point into the realm of microservices.</span></span>

> ### <a name="references--common-web-architectures"></a><span data-ttu-id="06e88-308">Références – Architectures Web courantes</span><span class="sxs-lookup"><span data-stu-id="06e88-308">References – Common Web Architectures</span></span>
> - <span data-ttu-id="06e88-309">**La nouvelle Architecture**</span><span class="sxs-lookup"><span data-stu-id="06e88-309">**The Clean Architecture**</span></span>  
> <span data-ttu-id="06e88-310"><https://8thlight.com/blog/Uncle-Bob/2012/08/13/the-Clean-architecture.HTML></span><span class="sxs-lookup"><span data-stu-id="06e88-310"><https://8thlight.com/blog/uncle-bob/2012/08/13/the-clean-architecture.html></span></span>
> - <span data-ttu-id="06e88-311">**L’Architecture en cercles concentriques**</span><span class="sxs-lookup"><span data-stu-id="06e88-311">**The Onion Architecture**</span></span>  
> <span data-ttu-id="06e88-312"><http://jeffreypalermo.com/blog/the-Onion-architecture-part-1/></span><span class="sxs-lookup"><span data-stu-id="06e88-312"><http://jeffreypalermo.com/blog/the-onion-architecture-part-1/></span></span>
> - <span data-ttu-id="06e88-313">**Le modèle de référentiel**</span><span class="sxs-lookup"><span data-stu-id="06e88-313">**The Repository Pattern**</span></span>  
> <span data-ttu-id="06e88-314"><http://deviq.com/repository-Pattern/></span><span class="sxs-lookup"><span data-stu-id="06e88-314"><http://deviq.com/repository-pattern/></span></span>
> - <span data-ttu-id="06e88-315">**Nettoyer l’exemple de Solution d’Architecture**</span><span class="sxs-lookup"><span data-stu-id="06e88-315">**Clean Architecture Solution Sample**</span></span>  
> <span data-ttu-id="06e88-316"><https://github.com/ardalis/cleanarchitecture></span><span class="sxs-lookup"><span data-stu-id="06e88-316"><https://github.com/ardalis/cleanarchitecture></span></span>
> - <span data-ttu-id="06e88-317">**Architecture des livres Microservices** <http://aka.ms/MicroservicesEbook></span><span class="sxs-lookup"><span data-stu-id="06e88-317">**Architecting Microservices e-book** <http://aka.ms/MicroservicesEbook></span></span>

>[!div class="step-by-step"]
<span data-ttu-id="06e88-318">[Précédente] (architecture principles.md) [suivant] (commun-client-côté-web-technologies.md)</span><span class="sxs-lookup"><span data-stu-id="06e88-318">[Previous] (architectural-principles.md) [Next] (common-client-side-web-technologies.md)</span></span>
